import{u as e,r as a,aP as o,ah as l,d as s,p as t,h as n,n as c,o as i,f as p,t as u,v as r,e as d,s as m,F as f,L as h,i as v,ac as w,ae as g,b0 as A,aZ as _,a_ as C,b1 as b,b2 as U,b3 as j,b4 as x,D as y}from"./index-B2xpwpwA.js";import{_ as E}from"./wd-input.DWD3v5sG.js";import{r as k}from"./uni-app.es.DSnRb9Bl.js";import{_ as V}from"./wd-button.C5ofvjh5.js";import{_ as M}from"./wd-count-down.BRJIj759.js";import{_ as B}from"./wd-popup.DoF1ewYn.js";import{a as Q,_ as D}from"./eye-close.svmFXsMK.js";import{_ as z}from"./password.CEHs-Dkx.js";import{_ as I}from"./email.BTFPQqYm.js";import{_ as N}from"./phone.Bhvab_M0.js";import{_ as T}from"./close.DRSZaJDX.js";import{Q as G}from"./qt-login-tab.DMlntvqi.js";import{_ as H}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./wd-icon.av9Pe6hJ.js";import"./props.3mmIwxF7.js";import"./useParent.qK3nwHc2.js";import"./useTranslate.CisUcI6B.js";import"./base64.3RFQOR3W.js";const Y=H({__name:"auth-forgot-password",setup(H){const{t:Y}=e(),Z=a(!0),W=a(!0),q=a(!1),P=a(!1),F=a(!0),L=a("phone"),X=[{value:"phone",label:Y("common.phone")},{value:"email",label:Y("common.email")}],S=a(!1),K=o({phone:"",email:"",password:"",passwordConfirm:"",spread_code:"",captcha:"",area_code:"86"}),R=a(!1),J=a(6e4),O=a(" ss "),{logout:$}=l();function ee(){R.value=!1}function ae(){F.value=!1,q.value=!1}const oe=a(!1);function le(){if(S.value)!function(){if(!K.password)return void g({title:Y("common.enter")+Y("forget.password"),icon:"none"});if(!K.passwordConfirm)return void g({title:Y("common.enter")+Y("forget.passwordConfirm"),icon:"none"});if(K.password!==K.passwordConfirm)return void g({title:Y("forget.passwordNotEqual"),icon:"none"});let e={captcha:K.captcha,password:K.password};"phone"===L.value?e.account=K.phone:e.account=K.email;j(e).then((e=>{g({title:e.msg,icon:"none"}),setTimeout((()=>{$(),x()}),1e3)}))}();else if(("email"!==L.value||K.email)&&("phone"!==L.value||K.phone)){if("phone"===L.value){if(!K.phone)return g({title:Y("common.enter")+Y("common.phone"),icon:"none"}),!1}else if(!A.test(K.email))return g({title:Y("common.enter")+Y("common.emailText"),icon:"none"}),!1;q.value=!0,F.value=!0,oe.value||se()}}function se(){"phone"===L.value?_({phone:K.phone,area_code:K.area_code,type:"rest"}).then((()=>{R.value=!0,oe.value=!0})):C({email:K.email,type:"rest"}).then((()=>{R.value=!0,oe.value=!0}))}function te(){b({success:function(e){K.captcha=e.data}})}function ne(){K.captcha?function(){let e={captcha:K.captcha};"phone"===L.value?e.account=K.phone:e.account=K.email;P.value||(P.value=!0,setTimeout((()=>{P.value=!1}),2e3),U(e).then((()=>{q.value=!1,F.value=!1,S.value=!0})))}():g({title:Y("common.enter")+Y("common.captcha"),icon:"none"})}return(e,a)=>{const o=y,l=c,g=k(s("wd-input"),E),A=k(s("wd-button"),V),_=k(s("wd-count-down"),M),C=k(s("wd-popup"),B);return i(),t(l,{class:"forgot-main"},{default:n((()=>[p(l,{class:"forgot-tip"},{default:n((()=>[p(o,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAAXNSR0IArs4c6QAABX1JREFUWEfVmV2ME1UUx//ndsNXO8UIfjxpDGqAxU7ZRE1kwYgfCxpfxMAGlO1sEFwQn3zQGIkJUXzxQQwBlHQKwagYjZGYRb4SAWPUBDrlM0Q0+qQIiXRaWMjOHHPbnTIztNuZ7SDLfevcc8/59c6Zc849l9DC+GtbKp4YpE4IepTZng7G/SC6A0BiSG0JzH+DcJpInADbB0oxHLxzaaE8UrMUdiEzqJxLdTGTBsKzAMaH1HEJjJ1ErMczhe+IwGHWhwI2dfU5AGsAqGGMDCNrMOjtpJb/Oqi+QMD/5mZMiXFsI4AngyoOKbfHIqvvlsyxM83WNQU2s+oiED4CkGyg7DcAu4noENn2SSs27g9lfNmUsualuBKzBu5mIaYxcycBXQzc00BPEeAVilb4bDjohsDSV0t6ai2I3qyjwAbwBQvxQbLnyI/NdsWZlzrNrDqLBFYBWAhAXLOW+Z2EVnirkW/XBa7A5tQPgYpi/9gPFquV3iMngoLWkzOzM6eDbGljbp35zYmM0VcPui5wSVfXMfC6T9EAiF5TMvkNrYD615p6eiXA7wMY554j4L2EZrzhl78G2NRT3QB96hXk8zbjmYm9hZ+ihHV0XcimHhaEbwGa5IFmXpzoLXhYPMBD0eCw7wP7h2HPSWpHT10PWEdnUX9gKkEcAHCby45pkTXTHT08wKau7vaFrks282NhdtbUVU8iUDSjaSTy7jTtBzDBBb1H0YynnN81ZUNJ4UvPLhKtUDJ5GdICj1aApREzl14O5s0+gwsUzfhKPqsAD0WFI74M5vlnQYlbBa5A6+o+b/SgQiKTT8uoUQEuZdUuJuyqQREGIWIpZenhk0FBHblIgLd1TINtFcBou+oKPD+hFXZVgE1dldllkTPJhO3JjPFiWNgo5U1d3Q5giUvn54pmdJMsEeMWnXPHQSbqTGbyP0QJEFZXUU/NJpCMGs4YKMd4MvndgYDf4xljStiyLyxQM/lqGauecdcexJhHpVz6XWZ2Z5TNima83Ezh/zFv6uomACtqfky0jkq6+g2jUohXBhG9kMjkPxkpUBQfnWO7lEsvYWbpy1U2YCeZuiojwVTnoRDoiPcYMsSNaEQJXN6qzrRtyMzrjFNk6qlz7hzOYuzkZM/P50dEW404I850fpvFrQ9NIvuyDAhDg8/LHb4MYIzzKBEfHEsLj18ZDcC8o31Mqdwm+Zxx5WYEHr0ucWFL+60i1uZyz6pL3Fwf3U0X1uokjk2KZvSNho/O1FXZWqglMaomjtQ8BvW7gnNLqTmqsFY3NYPnR178RAVczKVnEfMh15uuFj/yQZTlZVTApq7Kw2f31ZyBHUqvsahawPvcAqOhgLesY+5GixD20/Geo/2uI1I6D3DK9Qp2K5rRFfbji2KHTV3dC+Dxq7Z9R6Qht5CdSc8hlEHLk1r+4zDQrQIX9fRLBPYefImfVzKFCluzY/5Fm3nuDT3mE+9VMoVa17ReI0WWloprV29oI8W2Yh0Tlx3+1RV2vS+8UatKQMyPa/lfwrhHUNmynn7Qht0fulXlGGjUDGTm1cnewpagIEHkitnUMiJa7796CNwMlEaatFv3gcWrLbdbZe/BsmS71RUNan8xXLu1Bj18Q3sHC7E+dEN7a/oRYn4l0oa2+1WW9PRiBssiZPgrA9BBEnzSwtg/lQGrWAmV42LJGC7fxTZNY/DsZlcGRLSy2QE4UGfxwpaOe0Xb4EYwPRHEL0PLEO+1B9v63NGgkY5AwM5iM5daABZrfBkxNJ9rgQHitU5SCKIoFLDj25WLRVAvqv0MT6s/gNEByP4COHvdLxb9MGc3tCcmTIh1gsQcMM9g4D4A3qtb4CwBpwEcB/j7ixetQ7evOl4K8MfqivwHX9HBWqOfHuUAAAAASUVORK5CYII="}),p(l,null,{default:n((()=>[u(r(e.$t("forget.tip")),1)])),_:1})])),_:1}),S.value?(i(),d(f,{key:0},[S.value?(i(),t(l,{key:0,class:"login-row"},{default:n((()=>[p(l,{class:"login-input"},{default:n((()=>[p(g,{placeholder:e.$t("forget.password"),modelValue:K.password,"onUpdate:modelValue":a[2]||(a[2]=e=>K.password=e),placeholderClass:"placeholder-class","use-suffix-slot":"","use-prefix-slot":"",type:Z.value?"password":""},{suffix:n((()=>[Z.value?(i(),t(o,{key:0,onClick:a[0]||(a[0]=e=>Z.value=!Z.value),class:"login-icon",src:Q})):(i(),t(o,{key:1,onClick:a[1]||(a[1]=e=>Z.value=!Z.value),class:"login-icon",src:D}))])),prefix:n((()=>[p(o,{class:"login-icon",src:z})])),_:1},8,["placeholder","modelValue","type"])])),_:1})])),_:1})):m("",!0),S.value?(i(),t(l,{key:1,class:"login-row"},{default:n((()=>[p(l,{class:"login-input"},{default:n((()=>[p(g,{placeholder:e.$t("forget.passwordConfirm"),modelValue:K.passwordConfirm,"onUpdate:modelValue":a[5]||(a[5]=e=>K.passwordConfirm=e),placeholderClass:"placeholder-class","use-suffix-slot":"","use-prefix-slot":"",type:W.value?"password":""},{suffix:n((()=>[W.value?(i(),t(o,{key:0,onClick:a[3]||(a[3]=e=>W.value=!W.value),class:"login-icon",src:Q})):(i(),t(o,{key:1,onClick:a[4]||(a[4]=e=>W.value=!W.value),class:"login-icon",src:D}))])),prefix:n((()=>[p(o,{class:"login-icon",src:z})])),_:1},8,["placeholder","modelValue","type"])])),_:1})])),_:1})):m("",!0)],64)):(i(),d(f,{key:1},[p(G,{tabs:X,modelValue:L.value,"onUpdate:modelValue":a[6]||(a[6]=e=>L.value=e)},null,8,["modelValue"]),"email"===L.value?(i(),t(l,{key:0,class:"login-row"},{default:n((()=>[p(l,{class:"login-input"},{default:n((()=>[p(g,{placeholder:e.$t("common.email"),modelValue:K.email,"onUpdate:modelValue":a[7]||(a[7]=e=>K.email=e),placeholderClass:"placeholder-class","use-prefix-slot":""},{prefix:n((()=>[p(o,{class:"login-icon",src:I})])),_:1},8,["placeholder","modelValue"])])),_:1})])),_:1})):m("",!0),"phone"===L.value?(i(),t(l,{key:1,class:"login-row"},{default:n((()=>[p(l,{class:"login-input"},{default:n((()=>[p(g,{placeholder:e.$t("common.phone"),modelValue:K.phone,"onUpdate:modelValue":a[8]||(a[8]=e=>K.phone=e),placeholderClass:"placeholder-class","use-prefix-slot":"",type:"digit"},{prefix:n((()=>[p(o,{class:"login-icon",src:N})])),_:1},8,["placeholder","modelValue"])])),_:1})])),_:1})):m("",!0)],64)),p(A,{class:h({"login-disable":"email"===L.value&&!K.email||"phone"===L.value&&!K.phone}),onClick:le},{default:n((()=>[u(r(e.$t("forget.button")),1)])),_:1},8,["class"]),p(C,{modelValue:q.value,"onUpdate:modelValue":a[11]||(a[11]=e=>q.value=e),position:"bottom"},{default:n((()=>[p(l,{class:"custom-popup"},{default:n((()=>[p(l,{class:"popup-header"},{default:n((()=>[p(l,{class:"popup-header-title"},{default:n((()=>[u(r(e.$t("common.security")),1)])),_:1}),p(o,{src:T,onClick:ae})])),_:1}),p(l,{class:"popup-main"},{default:n((()=>[p(l,{class:"popup-tip"},{default:n((()=>[p(o,{src:N}),p(l,null,{default:n((()=>[u(r(e.$t("common.sendCode"))+" "+r("phone"===L.value?K.phone:K.email),1)])),_:1})])),_:1}),p(l,{class:"popup-input"},{default:n((()=>[p(g,{type:"number",modelValue:K.captcha,"onUpdate:modelValue":a[9]||(a[9]=e=>K.captcha=e),placeholder:e.$t("common.enter")+e.$t("common.captcha"),maxlength:"6"},null,8,["modelValue","placeholder"])])),_:1}),p(l,{class:"code-tip"},{default:n((()=>[p(l,{class:"code-tip-text"},{default:n((()=>[u(r(e.$t("common.noCode"))+"? ",1),R.value?(i(),d("span",{key:1,class:"code-tip-text-tip"},[p(_,{time:J.value,format:O.value,onFinish:ee},null,8,["time","format"]),u(r(e.$t("common.sendCodeTime")),1)])):(i(),d("span",{key:0,onClick:se},r(e.$t("common.newSendCode")),1))])),_:1}),p(l,{class:"code-tip-btn",onClick:te},{default:n((()=>[u(r(e.$t("common.paste")),1)])),_:1})])),_:1}),p(A,{onClick:a[10]||(a[10]=e=>v(w)(ne))},{default:n((()=>[u(r(e.$t("common.confirm")),1)])),_:1}),p(l,{class:"code-tip"},{default:n((()=>[p(l,{class:"code-tip-text"},{default:n((()=>[u(r(e.$t("common.security_tip")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}},[["__scopeId","data-v-b124d8a1"]]);export{Y as default};
