import{u as l,a as e,c as a,r as o,w as t,d as s,p as u,h as n,n as m,o as d,f as r,i as f,aE as i,t as c,v as _,cp as p,aF as w,e as v,A as y,F as h,a9 as b,s as j,an as k,ac as g,ae as x,cq as $,aH as C,D as V,E as F,L as q}from"./index-B2xpwpwA.js";import{_ as T}from"./wd-icon.av9Pe6hJ.js";import{a as D,r as S}from"./uni-app.es.DSnRb9Bl.js";import{_ as A}from"./wd-navbar.Cm5X2aH8.js";import{_ as I}from"./wd-input.DWD3v5sG.js";import{_ as P}from"./qt-number.CH-g_Olh.js";import{_ as U}from"./mp-html.DgqQCtcY.js";import{_ as B}from"./wd-checkbox.5Lxw8Lvp.js";import{u as E,_ as L}from"./wd-message-box.CEsBvNb5.js";import{_ as M}from"./historical-records.NAoIfmZH.js";import{_ as z}from"./user.jseFO-Wa.js";import{_ as H,a as O}from"./star.yrGmBtDd.js";import"./useTranslate.CisUcI6B.js";import{d as Q,e as X}from"./follow.cgHHAECj.js";import{q as G}from"./qt-password-pay.qUy-cTPI.js";import{_ as J}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./props.3mmIwxF7.js";import"./useParent.qK3nwHc2.js";import"./wd-popup.DoF1ewYn.js";import"./wd-button.C5ofvjh5.js";import"./base64.3RFQOR3W.js";import"./close.DRSZaJDX.js";import"./eye-close.svmFXsMK.js";const K=J({__name:"follow-trade",setup(J){const{t:K}=l(),N=e(),R=a((()=>N.systemConfig)),W=o({money:"",trader_id:"",days_id:"",pay_password:""}),Y=o(!1),Z=o(""),ll=o({}),el=o(!1),al=o([]),ol=o(""),tl=o({}),sl=E(),ul=o(!1),nl=o();function ml(){W.value.money?2!==ll.value.type||W.value.days_id?Y.value?ul.value=!0:sl.confirm({title:K("common.systemTip"),msg:K("common.userAgreement"),confirmButtonText:K("common.sure"),cancelButtonText:K("common.cancel")}).then((()=>{Y.value=!0})):x({title:K("common.select")+K("follow.type"),icon:"none"}):x({title:K("common.enter")+K("follow.money"),icon:"none"})}function dl(l){el.value||(el.value=!0,setTimeout((()=>{el.value=!1}),2e3),W.value.pay_password=l,X(W.value).then((l=>{$({id:l.data.id})})))}return D((l=>{Z.value=l.id,W.value.trader_id=l.id,Q(Z.value).then((l=>{ll.value=l.data.trader,tl.value=l.data.money,ol.value=l.data.tips,l.data.trader.tags&&(al.value=l.data.trader.tags.split(","))}))})),t((()=>W.value.money),(l=>{const e=String(l).match(/^\d*(\.\d?)?/),a=e?e[0]:"."!==e[1]?l:"";a!==l&&(W.value.money=a,C((()=>{var l,e;if(null==(l=nl.value)?void 0:l.setValue)nl.value.setValue(a);else if(null==(e=nl.value)?void 0:e.$el){const l=nl.value.$el.querySelector("input");l&&(l.value=a)}})))})),(l,e)=>{const a=S(s("wd-icon"),T),o=m,t=V,x=S(s("wd-navbar"),A),$=F,C=S(s("wd-input"),I),D=S(s("qt-number"),P),E=S(s("mp-html"),U),Q=S(s("wd-checkbox"),B),X=S(s("wd-message-box"),L);return d(),u(o,null,{default:n((()=>[r(x,{title:"",placeholder:"",safeAreaInsetTop:"",fixed:"",bordered:!1,"custom-style":"background-color: #121317;"},{left:n((()=>[r(a,{name:"thin-arrow-left",size:"28rpx",color:"#fff",onClick:f(i)},null,8,["onClick"])])),title:n((()=>[r(o,{class:"text-eee-17"},{default:n((()=>[c(_(1===ll.value.type?l.$t("follow.dailyFollow"):l.$t("follow.manyDaysFollow")),1)])),_:1})])),right:n((()=>[r(o,{class:"head-text"},{default:n((()=>[r(t,{src:M,alt:"",onClick:f(p)},null,8,["onClick"])])),_:1})])),_:1}),r(o,{class:"follow-main"},{default:n((()=>[r(o,{class:"follow-mentors"},{default:n((()=>[r(o,{class:"follow-mentors-title"},{default:n((()=>[c(_(l.$t("star-mentor")),1)])),_:1}),r(o,{class:"follow-item"},{default:n((()=>[r(o,{class:"follow-item-head"},{default:n((()=>[r(o,{class:"follow-item-head-profile"},{default:n((()=>[r(t,{src:ll.value.avatar},null,8,["src"])])),_:1}),r(o,{class:"follow-item-head-info"},{default:n((()=>[r(o,{class:"follow-item-head-info-name"},{default:n((()=>[r(o,null,{default:n((()=>[c(_(ll.value.name),1)])),_:1})])),_:1}),r(o,{class:"follow-item-head-info-total"},{default:n((()=>[r(t,{src:z}),c(" "+_(f(w)(ll.value.follow_number))+" ",1),r($,null,{default:n((()=>[c("/"+_(f(w)(ll.value.max_follow_number)),1)])),_:1})])),_:1})])),_:1})])),_:1}),r(o,{class:"follow-mentors-tag"},{default:n((()=>[(d(!0),v(h,null,y(al.value,((l,e)=>(d(),u($,{key:e+1},{default:n((()=>[c(_(l),1)])),_:2},1024)))),128))])),_:1}),r(o,{class:"follow-mentors-saying"},{default:n((()=>[c(_(ll.value.explain),1)])),_:1}),r(o,{class:"follow-mentors-info"},{default:n((()=>[r($,null,{default:n((()=>[c(_(l.$t("follow.min_money"))+": "+_(f(w)(ll.value.min_money)),1)])),_:1}),r($,null,{default:n((()=>[c(_(l.$t("follow.commission"))+":"+_(ll.value.divide_into)+"% ",1)])),_:1}),r($,null,{default:n((()=>[c(_(l.$t("follow.max_money"))+":"+_(f(w)(ll.value.max_money)),1)])),_:1})])),_:1})])),_:1})])),_:1}),r(o,{class:"follow-title"},{default:n((()=>[r(o,{class:"follow-title-left"},{default:n((()=>[r(o,null,{default:n((()=>[c(_(l.$t("follow.min_tips")),1)])),_:1})])),_:1})])),_:1}),r(o,{class:"follow-input"},{default:n((()=>[r(C,{ref_key:"moneyInput",ref:nl,modelValue:W.value.money,"onUpdate:modelValue":e[0]||(e[0]=l=>W.value.money=l),placeholder:l.$t("common.enter")+l.$t("follow.money"),placeholderStyle:"color:#38393C"},null,8,["modelValue","placeholder"])])),_:1}),r(o,{class:"follow-title"},{default:n((()=>[r(o,{class:"follow-title-left"},{default:n((()=>[r(o,null,{default:n((()=>[c(_(l.$t("follow.buyType")),1)])),_:1})])),_:1}),r(o,{class:"follow-title-right"},{default:n((()=>["1"==R.value.open_user_recharge?(d(),u($,{key:0,onClick:f(b)},{default:n((()=>[c(_(l.$t("positions.recharge")),1)])),_:1},8,["onClick"])):j("",!0)])),_:1})])),_:1}),r(o,{class:"follow-input-text"},{default:n((()=>[c(_(tl.value.name)+"( "+_(l.$t("follow.balance"))+" ",1),r(D,{data:tl.value.balance,"is-margin":!0},null,8,["data"]),c(" "+_(tl.value.unit)+" ) ",1)])),_:1}),2===ll.value.type?(d(),u(o,{key:0,class:"follow-type"},{default:n((()=>[(d(!0),v(h,null,y(ll.value.days,((l,e)=>(d(),u(o,{class:q(["follow-type-item",{disable:2===l.status,active:l.id===W.value.days_id}]),onClick:e=>function(l){1===l.status&&(W.value.days_id=l.id)}(l),key:e+1},{default:n((()=>[r(o,null,{default:n((()=>[c(_(l.name),1)])),_:2},1024),r(o,null,{default:n((()=>[c(_(f(w)(l.min_money))+"~"+_(f(w)(l.max_money)),1)])),_:2},1024),1===l.status?(d(),u(t,{key:0,src:H})):(d(),u(t,{key:1,src:O}))])),_:2},1032,["onClick","class"])))),128))])),_:1})):j("",!0),2===ll.value.type?(d(),u(o,{key:1,class:"follow-describe-text"},{default:n((()=>[r(E,{content:ol.value},null,8,["content"])])),_:1})):j("",!0)])),_:1}),r(o,{class:"follow-bottom"},{default:n((()=>[r(o,{class:"follow-bottom-head"},{default:n((()=>[r(o,{class:"follow-bottom-head-left"},{default:n((()=>[r(Q,{shape:"square","checked-color":"#F39F2F",modelValue:Y.value,"onUpdate:modelValue":e[1]||(e[1]=l=>Y.value=l)},null,8,["modelValue"]),r(o,{class:"agreement"},{default:n((()=>[c(_(l.$t("common.agreement")),1)])),_:1}),r($,{onClick:e[2]||(e[2]=l=>f(k)({code:"follow_agreement"}))},{default:n((()=>[c(" 《"+_(l.$t("common.service"))+"》 ",1)])),_:1})])),_:1})])),_:1}),r(o,{class:"follow-bottom-btn",onClick:e[3]||(e[3]=l=>f(g)(ml))},{default:n((()=>[c(_(l.$t("follow.name")),1)])),_:1})])),_:1}),r(f(G),{modelValue:ul.value,"onUpdate:modelValue":e[4]||(e[4]=l=>ul.value=l),title:1===ll.value.type?l.$t("follow.dailyFollow"):l.$t("follow.manyDaysFollow"),onPaySuccess:dl},null,8,["modelValue","title"]),r(X)])),_:1})}}},[["__scopeId","data-v-15c78ba7"]]);export{K as default};
