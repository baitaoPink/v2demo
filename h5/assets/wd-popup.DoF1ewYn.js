import{aI as e,r as a,c as t,aO as l,w as o,o as s,p as n,h as r,T as u,L as i,Q as d,s as v,n as c,b$ as m,at as p,a0 as f,bF as w,f as $}from"./index-B2xpwpwA.js";import{_ as y}from"./wd-icon.av9Pe6hJ.js";import{b,d as h,m as C,A as k,s as _,t as z,l as A,p as I}from"./props.3mmIwxF7.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const g=x(e({name:"wd-transition",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...b,show:h(!1),duration:{type:[Object,Number,Boolean],default:300},lazyRender:h(!1),name:[String,Array],destroy:h(!0),enterClass:C(""),enterActiveClass:C(""),enterToClass:C(""),leaveClass:C(""),leaveActiveClass:C(""),leaveToClass:C("")},emits:["click","before-enter","enter","before-leave","leave","after-leave","after-enter"],setup(e,{emit:m}){const p=e=>{let a=`${f.enterClass} ${f.enterActiveClass}`,t=`${f.enterToClass} ${f.enterActiveClass}`,l=`${f.leaveClass} ${f.leaveActiveClass}`,o=`${f.leaveToClass} ${f.leaveActiveClass}`;if(Array.isArray(e))for(let s=0;s<e.length;s++)a=`wd-${e[s]}-enter wd-${e[s]}-enter-active ${a}`,t=`wd-${e[s]}-enter-to wd-${e[s]}-enter-active ${t}`,l=`wd-${e[s]}-leave wd-${e[s]}-leave-active ${l}`,o=`wd-${e[s]}-leave-to wd-${e[s]}-leave-active ${o}`;else e&&(a=`wd-${e}-enter wd-${e}-enter-active ${a}`,t=`wd-${e}-enter-to wd-${e}-enter-active ${t}`,l=`wd-${e}-leave wd-${e}-leave-active ${l}`,o=`wd-${e}-leave-to wd-${e}-leave-active ${o}`);return{enter:a,"enter-to":t,leave:l,"leave-to":o}},f=e,w=m,$=a(!1),y=a(!1),b=a(""),h=a(!1),C=a(300),I=a(""),x=a(null),g=a(null),S=a(null),T=t((()=>`-webkit-transition-duration:${C.value}ms;transition-duration:${C.value}ms;${y.value||!f.destroy?"":"display: none;"}${f.customStyle}`)),B=t((()=>`wd-transition ${f.customClass}  ${I.value}`));function j(){w("click")}function E(){x.value=new k((async e=>{try{const a=p(f.name),t=_(f.duration)?f.duration.enter:f.duration;b.value="enter",w("before-enter"),g.value=z(),await g.value,w("enter"),I.value=a.enter,C.value=t,g.value=z(),await g.value,$.value=!0,y.value=!0,g.value=z(),await g.value,g.value=null,h.value=!1,I.value=a["enter-to"],e()}catch(a){}}))}function N(){h.value||(h.value=!0,"leave"===b.value?w("after-leave"):"enter"===b.value&&w("after-enter"),!f.show&&y.value&&(y.value=!1))}return l((()=>{f.show&&E()})),o((()=>f.show),(e=>{e?(A(x.value)&&x.value.abort(),A(g.value)&&g.value.abort(),A(S.value)&&S.value.abort(),x.value=null,g.value=null,S.value=null,E()):async function(){if(!x.value)return h.value=!1,N();try{if(await x.value,!y.value)return;const e=p(f.name),a=_(f.duration)?f.duration.leave:f.duration;b.value="leave",w("before-leave"),C.value=a,S.value=z(),await S.value,w("leave"),I.value=e.leave,S.value=z(),await S.value,h.value=!1,I.value=e["leave-to"],S.value=function(e){return new k((a=>{const t=setTimeout((()=>{clearTimeout(t),a()}),e)}))}(C.value),await S.value,S.value=null,N(),x.value=null}catch(e){}}()}),{deep:!0}),(e,a)=>{const t=c;return!e.lazyRender||$.value?(s(),n(t,{key:0,class:i(B.value),style:d(T.value),onTransitionend:N,onClick:j},{default:r((()=>[u(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])):v("",!0)}}}),[["__scopeId","data-v-4c93989b"]]);const S=x(e({name:"wd-overlay",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...b,show:h(!1),duration:{type:[Object,Number,Boolean],default:300},lockScroll:h(!0),zIndex:I(10)},emits:["click"],setup(e,{emit:t}){const l=e,i=t;function d(){i("click")}function v(){}return function(e){const t=a(0),l=()=>{0===t.value&&(document.getElementsByTagName("body")[0].style.overflow="hidden"),t.value++},s=()=>{t.value>0&&(t.value--,0===t.value&&(document.getElementsByTagName("body")[0].style.overflow=""))},n=()=>{e()&&s()};o(e,(e=>{e?l():s()})),m(n),p(n)}((()=>l.show&&l.lockScroll)),(e,a)=>(s(),n(g,{show:e.show,name:"fade","custom-class":"wd-overlay",duration:e.duration,"custom-style":`z-index: ${e.zIndex}; ${e.customStyle}`,onClick:d,onTouchmove:a[0]||(a[0]=f((a=>e.lockScroll?v:""),["stop","prevent"]))},{default:r((()=>[u(e.$slots,"default",{},void 0,!0)])),_:3},8,["show","duration","custom-style"]))}}),[["__scopeId","data-v-586ee7f5"]]),T=x(e({name:"wd-popup",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...b,transition:String,closable:h(!1),position:C("center"),closeOnClickModal:h(!0),duration:{type:[Number,Boolean],default:300},modal:h(!0),zIndex:I(10),hideWhenClose:h(!0),modalStyle:C(""),safeAreaInsetBottom:h(!1),modelValue:h(!1),lazyRender:h(!0),lockScroll:h(!0)},emits:["update:modelValue","before-enter","enter","before-leave","leave","after-leave","after-enter","click-modal","close"],setup(e,{emit:o}){const i=e,d=o,m=t((()=>i.transition?i.transition:"center"===i.position?["zoom-in","fade"]:"left"===i.position?"slide-left":"right"===i.position?"slide-right":"bottom"===i.position?"slide-up":"top"===i.position?"slide-down":"slide-up")),p=a(0),f=t((()=>`z-index:${i.zIndex}; padding-bottom: ${p.value}px;${i.customStyle}`)),b=t((()=>`wd-popup wd-popup--${i.position} ${i.transition||"center"!==i.position?"":"is-deep"} ${i.customClass||""}`));function h(){d("click-modal"),i.closeOnClickModal&&C()}function C(){d("close"),d("update:modelValue",!1)}function k(){}return l((()=>{if(i.safeAreaInsetBottom){const{safeArea:e,screenHeight:a,safeAreaInsets:t}=w();p.value=e&&t?t.bottom:0}})),(e,a)=>{const t=c;return s(),n(t,{class:"wd-popup-wrapper"},{default:r((()=>[e.modal?(s(),n(S,{key:0,show:e.modelValue,"z-index":e.zIndex,"lock-scroll":e.lockScroll,duration:e.duration,"custom-style":e.modalStyle,onClick:h,onTouchmove:k},null,8,["show","z-index","lock-scroll","duration","custom-style"])):v("",!0),$(g,{"lazy-render":e.lazyRender,"custom-class":b.value,"custom-style":f.value,duration:e.duration,show:e.modelValue,name:m.value,destroy:e.hideWhenClose,onBeforeEnter:a[0]||(a[0]=e=>d("before-enter")),onEnter:a[1]||(a[1]=e=>d("enter")),onAfterEnter:a[2]||(a[2]=e=>d("after-enter")),onBeforeLeave:a[3]||(a[3]=e=>d("before-leave")),onLeave:a[4]||(a[4]=e=>d("leave")),onAfterLeave:a[5]||(a[5]=e=>d("after-leave"))},{default:r((()=>[u(e.$slots,"default",{},void 0,!0),e.closable?(s(),n(y,{key:0,"custom-class":"wd-popup__close",name:"add",onClick:C})):v("",!0)])),_:3},8,["lazy-render","custom-class","custom-style","duration","show","name","destroy"])])),_:3})}}}),[["__scopeId","data-v-2d9bba8c"]]);export{T as _,g as a,S as w};
