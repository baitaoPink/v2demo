import{aI as e,r as t,c as a,w as s,o,p as l,h as n,f as c,L as r,Q as u,t as i,v as p,s as d,n as m,u as g,aP as f,d as w,g as A,i as v,J as h,aR as _,ci as y,e as C,F as b,ac as V,cj as k,b1 as j,ae as Q,ck as x,cl as J,D as S,E as N}from"./index-B2xpwpwA.js";import{_ as U}from"./wd-icon.av9Pe6hJ.js";import{b as B,p as E,d as D,h as F,E as I,D as L}from"./props.3mmIwxF7.js";import{_ as q}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{o as $,r as O}from"./uni-app.es.DSnRb9Bl.js";import{_ as W}from"./wd-gap.BTJcE1Vl.js";import{_ as X}from"./wd-switch.DnO7Fpj-.js";import{_ as M}from"./wd-popup.DoF1ewYn.js";import{_ as Y}from"./wd-input.DWD3v5sG.js";import{_ as P}from"./wd-count-down.BRJIj759.js";import{_ as Z}from"./wd-button.C5ofvjh5.js";import{_ as G}from"./close.DRSZaJDX.js";import{_ as R}from"./phone.Bhvab_M0.js";import{a as T,_ as H}from"./eye-close.svmFXsMK.js";import{_ as z}from"./password.CEHs-Dkx.js";import{_ as K}from"./captcha.BMwRqaq8.js";import"./useParent.qK3nwHc2.js";import"./useTranslate.CisUcI6B.js";import"./base64.3RFQOR3W.js";const ee=q(e({name:"wd-progress",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...B,percentage:E(0),hideText:D(!1),color:{type:[String,Array,Object],default:"linear-gradient(315deg, rgba(81,124,240,1) 0%,rgba(118,158,245,1) 100%)"},duration:E(30),status:String},setup(e){const g=e,f=t(""),w=t(0),A=t(0),v=t("");let h=null;const _=a((()=>{const e={background:f.value,width:w.value+"%","transition-duration":A.value*g.duration*.001+"s"};return F(e)}));function y(e,t){if(h)return;const{duration:a}=g;A.value=Math.abs(e-w.value),setTimeout((()=>{w.value=e,f.value=t,h=setTimeout((()=>{clearTimeout(h),h=null,C()}),A.value*a)}),50)}function C(){const{percentage:e,color:t}=g;if(w.value===e||!e)return;let a=L(t)?t:[t];if(0===a.length)throw Error("The colorArray is empty");const s=a.every((e=>"string"==typeof e)),o=a.every((e=>e.hasOwnProperty("color")&&e.hasOwnProperty("percentage")));if(!s&&!o)throw Error("Color must be String or Object with color and percentage");if(o&&a.some((({percentage:e})=>Number.isNaN(parseInt(e)))))throw Error("All the percentage must can be formatted to Number");const l=parseInt(""+100/a.length),n=o?a.sort(((e,t)=>e.percentage-t.percentage)):a.map(((e,t)=>({color:e,percentage:(t+1)*l})));w.value>e?n.some((t=>{if(e<=t.percentage)return y(e,t.color),!0})):n.some(((t,a)=>{if(w.value<t.percentage&&t.percentage<=e)return y(t.percentage,t.color),!0;a===n.length-1&&y(e,t.color)}))}return s((()=>g.percentage),(e=>{(Number.isNaN(e)||e<0||e>100)&&console.error("The value of percentage must be between 0 and 100"),C()})),s((()=>g.color),(()=>{C()}),{deep:!0,immediate:!0}),s((()=>g.status),(()=>{!function(){const{status:e}=g;let t=[];e&&t.push(`is-${e}`),v.value=t.join(" ")}()}),{deep:!0,immediate:!0}),s((()=>g.duration),(e=>{I(e)}),{deep:!0,immediate:!0}),(e,t)=>{const a=m;return o(),l(a,{class:r(`wd-progress ${e.customClass}`),style:u(e.customStyle)},{default:n((()=>[c(a,{class:"wd-progress__outer"},{default:n((()=>[c(a,{class:r(`wd-progress__inner ${v.value}`),style:u(_.value)},null,8,["class","style"])])),_:1}),e.hideText?e.status?(o(),l(U,{key:1,"custom-class":`wd-progress__label wd-progress__icon ${v.value}`,name:"danger"==e.status?"close-outline":"check-outline",color:"string"==typeof e.color?e.color:""},null,8,["custom-class","name","color"])):d("",!0):(o(),l(a,{key:0,class:"wd-progress__label"},{default:n((()=>[i(p(e.percentage)+"%",1)])),_:1}))])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-072314a2"]]),te=q({__name:"me-settings-security",setup(e){const a=t(!1),s=t(!1),r=t(!1),u=t(!1),B=t(!1),E=t(!0),{t:D}=g(),F=t({}),I=f({phone:"",email:"",password:"",captcha:"",area_code:"86",passwordFlag:!1}),L=t(!1),q=t(6e4),te=t(" ss "),ae=t(""),se=t(null),oe=t(D("setting.level"));function le(){E.value=!1,u.value=!1,B.value=!1}function ne(e){k({type:e}),s.value=!1,r.value=!1}function ce(){j({success:function(e){I.captcha=e.data}})}function re(){j({success:function(e){I.captcha=e.data}})}function ue(){I.captcha?x({open_status:1,step:1,captcha:I.captcha}).then((e=>{I.captcha="",u.value=!1,J({secret:e.data.secret,password:I.captcha})})):Q({title:D("common.enter")+D("common.captcha"),icon:"none"})}function ie(){I.password?I.captcha?x({open_status:0,step:0,password:I.password,google_secret_code:I.captcha}).then((()=>{I.password="",I.captcha="",B.value=!1,ge()})):Q({title:D("common.enter")+D("common.googleCaptcha"),icon:"none"}):Q({title:D("common.enter")+D("common.password"),icon:"none"})}function pe({value:e}){e?e&&(u.value=!0,L.value=!0,x({open_status:1,step:0}).then((e=>{ae.value=e.data.account}))):B.value=!0}function de(){L.value=!1}function me(){L.value=!0,q.value=6e4,se.value.reset(),x({open_status:1,step:0}).then((e=>{ae.value=e.data.account}))}function ge(){A({}).then((e=>{F.value=e.data,1===e.data.google_secret_open?(a.value=!0,oe.value=D("setting.level_high")):(a.value=!1,oe.value=D("setting.level"))}))}return $((()=>{ge()})),(e,t)=>{const g=m,f=S,A=N,k=O(w("wd-progress"),ee),j=O(w("wd-gap"),W),Q=O(w("wd-icon"),U),x=O(w("wd-switch"),X),J=O(w("wd-popup"),M),E=O(w("wd-input"),Y),D=O(w("wd-count-down"),P),$=O(w("wd-button"),Z);return o(),l(g,{class:"setting-page"},{default:n((()=>[c(g,{class:"setting-security"},{default:n((()=>[c(g,{class:"setting-security-title"},{default:n((()=>[i(p(e.$t("setting.activity")),1)])),_:1}),c(g,{class:"setting-security-tip"},{default:n((()=>[i(p(e.$t("setting.last_time"))+": "+p(v(h)(F.value.last_time)),1)])),_:1}),c(g,{class:"setting-security-tip"},{default:n((()=>[i(p(e.$t("setting.last_device"))+": ",1),c(f,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAg9JREFUaEPtWr9rU1EU/g4kVaJVSUbnVgRBJ6u7TjrpVOgfUIc+xzgE7nchoBmNg/4BgpNObrrXbrYIxXbuGJC2JlQCx141i/qSvtzchsC58/3xfed897zz3vcEMz5kxvFjJAGScwBWASwDuAbgfGLShwC+AHgD4BXJH8POG0qg2Wxe7vf77wHcSAw6b/vPpVLpfqPR2MubkEvgT+Q3AnhV3QXwBMBH7/1+SjLOuQsA7gB4JiILqrpZq9WWsiw7+t+5uQS892uq2gawA2CJ5LeUwP/em+QlAJ+OpXRFRDLn3ItCBEiuA7ilqg+99+9OE/zgLOfcAxF5G4iQvF2UQEjZnKpeTC2bvOC0Wq35Xq8XJHtE8mxRAhoWkBxZqVJmh+RQHMMusRGYRGYsA3YHInVkEjIJmYTsQWatRNQtsDJqZTRKQL/aeWun7YUmRkUmIatCMfr5/VHBqpBVoRgVmYSsCsXo5zSq0ECj4+IcleHkd2DmCYwb+ZOuS56BkwIZd14MgakbHCSDI3oA4JDkfFGDY+YtpgzA82N/+GvwyqZp8gF4TDIYjv+M3D6n3W6f6XQ6GyJyfWCzViqVD/V6PaQ02Qi+WLfbvSsiTwEsAtiqVqs3C9usAeG0je7gEZfL5XtjGd2DEAfDW0QeqeqKql4VkXPJwg9AVb+LyLaIvFbVl1G/GqQEOqm9p9rrT4LETy/lskDl4NLdAAAAAElFTkSuQmCC"}),i(" "+p(F.value.last_device),1)])),_:1}),c(g,{class:"setting-security-title"},{default:n((()=>[i(p(e.$t("setting.securityLevel"))+" ",1),c(A,null,{default:n((()=>[i(p(oe.value),1)])),_:1})])),_:1}),c(k,{percentage:a.value?100:60,"hide-text":"",color:"#F39F2F"},null,8,["percentage"]),a.value?d("",!0):(o(),l(g,{key:0,class:"setting-verify"},{default:n((()=>[c(g,{class:"setting-verify-title"},{default:n((()=>[i(p(e.$t("setting.security_tip1"))+p(oe.value)+"ï¼Œ"+p(e.$t("setting.security_tip2")),1),c(A,null,{default:n((()=>[i("1")])),_:1}),i(p(e.$t("setting.security_tip3")),1)])),_:1}),c(g,{class:"setting-verify-tip"},{default:n((()=>[c(f,{src:"data:image/png;base64,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"}),c(A,null,{default:n((()=>[i(p(e.$t("setting.google_authentication")),1)])),_:1})])),_:1}),c(f,{src:"/assets/verify-B0b223Bv.png",class:"verify-img"})])),_:1}))])),_:1}),c(j,{"bg-color":"#000",height:"16rpx"}),c(g,{class:"setting-main"},{default:n((()=>[c(g,{class:"setting-row",onClick:v(_)},{default:n((()=>[c(g,{class:"setting-row-left"},{default:n((()=>[i(p(e.$t("setting.resetPassword")),1)])),_:1}),c(g,{class:"setting-row-right"},{default:n((()=>[c(Q,{name:"arrow-right"})])),_:1})])),_:1},8,["onClick"]),c(g,{class:"setting-row",onClick:t[0]||(t[0]=e=>r.value=!0)},{default:n((()=>[c(g,{class:"setting-row-left"},{default:n((()=>[i(p(e.$t("common.email")),1)])),_:1}),c(g,{class:"setting-row-right"},{default:n((()=>[i(p(F.value.email)+" ",1),c(Q,{name:"arrow-right"})])),_:1})])),_:1}),c(g,{class:"setting-row",onClick:t[1]||(t[1]=e=>s.value=!0)},{default:n((()=>[c(g,{class:"setting-row-left"},{default:n((()=>[i(p(e.$t("common.phone")),1)])),_:1}),c(g,{class:"setting-row-right"},{default:n((()=>[i(p(F.value.phone)+" ",1),c(Q,{name:"arrow-right"})])),_:1})])),_:1}),c(g,{class:"setting-row",onClick:v(y)},{default:n((()=>[c(g,{class:"setting-row-left"},{default:n((()=>[i(p(e.$t("common.fundPassword")),1)])),_:1}),c(g,{class:"setting-row-right"},{default:n((()=>[c(Q,{name:"arrow-right"})])),_:1})])),_:1},8,["onClick"])])),_:1}),c(j,{"bg-color":"#000",height:"16rpx"}),c(g,{class:"setting-main"},{default:n((()=>[c(g,{class:"setting-row"},{default:n((()=>[c(g,{class:"setting-row-left"},{default:n((()=>[i(p(e.$t("setting.google_authentication")),1)])),_:1}),c(g,{class:"setting-row-right"},{default:n((()=>[c(x,{modelValue:a.value,"onUpdate:modelValue":t[2]||(t[2]=e=>a.value=e),"active-color":"#F39F2F","before-change":pe,"inactive-color":"#2f2f2f",size:"24rpx"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),c(J,{modelValue:s.value,"onUpdate:modelValue":t[6]||(t[6]=e=>s.value=e),position:"bottom"},{default:n((()=>[F.value.phone?(o(),C(b,{key:1},[c(g,{class:"popup-item",onClick:t[4]||(t[4]=e=>ne("unbind-phone"))},{default:n((()=>[i(p(e.$t("setting.unbind"))+p(e.$t("common.phone")),1)])),_:1}),c(g,{class:"popup-item",onClick:t[5]||(t[5]=e=>ne("again-bind-phone"))},{default:n((()=>[i(p(e.$t("setting.again-bind"))+p(e.$t("common.phone")),1)])),_:1})],64)):(o(),l(g,{key:0,class:"popup-item",onClick:t[3]||(t[3]=e=>ne("bind-phone"))},{default:n((()=>[i(p(e.$t("setting.bind"))+p(e.$t("common.phone")),1)])),_:1}))])),_:1},8,["modelValue"]),c(J,{modelValue:r.value,"onUpdate:modelValue":t[10]||(t[10]=e=>r.value=e),position:"bottom"},{default:n((()=>[F.value.email?(o(),C(b,{key:1},[c(g,{class:"popup-item",onClick:t[8]||(t[8]=e=>ne("unbind-email"))},{default:n((()=>[i(p(e.$t("setting.unbind"))+p(e.$t("common.email")),1)])),_:1}),c(g,{class:"popup-item",onClick:t[9]||(t[9]=e=>ne("again-bind-email"))},{default:n((()=>[i(p(e.$t("setting.again-bind"))+p(e.$t("common.email")),1)])),_:1})],64)):(o(),l(g,{key:0,class:"popup-item",onClick:t[7]||(t[7]=e=>ne("bind-email"))},{default:n((()=>[i(p(e.$t("setting.bind"))+p(e.$t("common.email")),1)])),_:1}))])),_:1},8,["modelValue"]),c(J,{modelValue:u.value,"onUpdate:modelValue":t[13]||(t[13]=e=>u.value=e),position:"bottom"},{default:n((()=>[c(g,{class:"custom-popup"},{default:n((()=>[c(g,{class:"popup-header"},{default:n((()=>[c(g,{class:"popup-header-title"},{default:n((()=>[i(p(e.$t("common.security")),1)])),_:1}),c(f,{src:G,onClick:le})])),_:1}),c(g,{class:"popup-main"},{default:n((()=>[c(g,{class:"popup-tip"},{default:n((()=>[c(f,{src:R}),c(g,null,{default:n((()=>[i(p(e.$t("common.sendCode"))+p(ae.value),1)])),_:1})])),_:1}),c(g,{class:"pay-input"},{default:n((()=>[c(E,{modelValue:I.captcha,"onUpdate:modelValue":t[11]||(t[11]=e=>I.captcha=e),placeholder:e.$t("common.enter")+e.$t("common.captcha"),type:"number",maxlength:"6"},null,8,["modelValue","placeholder"])])),_:1}),c(g,{class:"code-tip"},{default:n((()=>[c(g,{class:"code-tip-text"},{default:n((()=>[i(p(e.$t("common.noCode"))+"? ",1),L.value?(o(),C("span",{key:1,class:"code-tip-text-tip"},[c(D,{ref_key:"count",ref:se,time:q.value,millisecond:"",format:te.value,onFinish:de},null,8,["time","format"]),i(p(e.$t("common.sendCodeTime")),1)])):(o(),C("span",{key:0,onClick:me},p(e.$t("common.newSendCode")),1))])),_:1}),c(g,{class:"code-tip-btn",onClick:ce},{default:n((()=>[i(p(e.$t("common.paste")),1)])),_:1})])),_:1}),c($,{onClick:t[12]||(t[12]=e=>v(V)(ue))},{default:n((()=>[i(p(e.$t("common.confirm")),1)])),_:1}),c(g,{class:"code-tip"},{default:n((()=>[c(g,{class:"code-tip-text"},{default:n((()=>[i(p(e.$t("common.security_tip")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),c(J,{modelValue:B.value,"onUpdate:modelValue":t[18]||(t[18]=e=>B.value=e),position:"bottom"},{default:n((()=>[c(g,{class:"custom-popup"},{default:n((()=>[c(g,{class:"popup-header"},{default:n((()=>[c(g,{class:"popup-header-title"},{default:n((()=>[i(p(e.$t("setting.unbind"))+p(e.$t("setting.google_auth")),1)])),_:1}),c(f,{src:G,onClick:le})])),_:1}),c(g,{class:"popup-main"},{default:n((()=>[c(g,{class:"popup-row"},{default:n((()=>[c(g,{class:"popup-input"},{default:n((()=>[c(E,{placeholder:e.$t("common.enter")+e.$t("common.loginPassword"),modelValue:I.password,"onUpdate:modelValue":t[16]||(t[16]=e=>I.password=e),prop:"password",placeholderClass:"placeholder-class","use-suffix-slot":"","use-prefix-slot":"",type:I.passwordFlag?"password":""},{suffix:n((()=>[I.passwordFlag?(o(),l(f,{key:0,onClick:t[14]||(t[14]=e=>I.passwordFlag=!I.passwordFlag),class:"popup-icon",src:T})):(o(),l(f,{key:1,onClick:t[15]||(t[15]=e=>I.passwordFlag=!I.passwordFlag),class:"popup-icon",src:H}))])),prefix:n((()=>[c(f,{class:"popup-icon",src:z})])),_:1},8,["placeholder","modelValue","type"])])),_:1})])),_:1}),c(g,{class:"popup-row"},{default:n((()=>[c(g,{class:"popup-input"},{default:n((()=>[c(E,{placeholder:e.$t("common.enter")+e.$t("common.googleCaptcha"),modelValue:I.captcha,"onUpdate:modelValue":t[17]||(t[17]=e=>I.captcha=e),placeholderClass:"placeholder-class","use-prefix-slot":"","use-suffix-slot":""},{prefix:n((()=>[c(f,{class:"popup-icon",src:K})])),suffix:n((()=>[c(g,{class:"popup-paste",onClick:re},{default:n((()=>[i(p(e.$t("common.paste")),1)])),_:1})])),_:1},8,["placeholder","modelValue"])])),_:1})])),_:1}),c($,{onClick:ie},{default:n((()=>[i(p(e.$t("common.confirm")),1)])),_:1}),c(g,{class:"code-tip"},{default:n((()=>[c(g,{class:"code-tip-text"},{default:n((()=>[i(p(e.$t("common.security_tip")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}},[["__scopeId","data-v-96f49cea"]]);export{te as default};
