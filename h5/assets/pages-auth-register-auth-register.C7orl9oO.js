import{u as e,r as a,ah as o,b as l,a as s,c as t,aP as n,as as r,aq as i,d as c,p as d,h as u,n as m,o as p,f,i as g,aE as h,aW as _,t as w,v,s as A,an as k,ac as x,x as C,aX as b,aY as j,aZ as V,a_ as y,ae as P,aS as B,aU as G,a$ as E,aV as T,E as F,D,b0 as R}from"./index-B2xpwpwA.js";import{_ as U}from"./wd-icon.av9Pe6hJ.js";import{a as X,r as H}from"./uni-app.es.DSnRb9Bl.js";import{_ as q}from"./wd-navbar.Cm5X2aH8.js";import{_ as z}from"./wd-input.DWD3v5sG.js";import{_ as J}from"./wd-count-down.BRJIj759.js";import{_ as Z}from"./wd-checkbox.5Lxw8Lvp.js";import{_ as L}from"./wd-button.C5ofvjh5.js";import{_ as N}from"./wd-gap.BTJcE1Vl.js";import{u as O,_ as S}from"./wd-message-box.CEsBvNb5.js";import{_ as M}from"./phone.Bhvab_M0.js";import{_ as Y}from"./down.DdbpIfGY.js";import{_ as I}from"./email.BTFPQqYm.js";import{a as K,_ as Q}from"./eye-close.svmFXsMK.js";import{_ as W}from"./password.CEHs-Dkx.js";import{_ as $}from"./captcha.BMwRqaq8.js";import{_ as ee}from"./service.DcndlpUY.js";import{Q as ae}from"./qt-login-tab.DMlntvqi.js";import"./useTranslate.CisUcI6B.js";import{_ as oe}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./props.3mmIwxF7.js";import"./useParent.qK3nwHc2.js";import"./base64.3RFQOR3W.js";import"./wd-popup.DoF1ewYn.js";const le=oe({__name:"auth-register",setup(oe){const{t:le}=e(),se=a(!0),te=a(!0),ne=a("phone"),re=[{value:"phone",label:le("common.phone")},{value:"email",label:le("common.email")}],ie=a(!1),ce=a(6e4),de=a(" ss "),ue=a(le("common.sendCodeText")),me=a(!1),pe=a(!1),{setToken:fe,refreshUserInfo:ge}=o(),{setTokens:he}=l(),_e=O(),we=s(),ve=t((()=>we.systemConfig)),Ae=n({phone:"",email:"",password:"",passwordConfirm:"",spread_code:"",captcha:"",area_code:ve.value.default_area_code});function ke(){b("chooseArea",(e=>{Ae.area_code=e.area_code})),j()}function xe(){if("phone"===ne.value){if(!Ae.phone)return P({title:le("common.enter")+le("common.phone"),icon:"none"}),!1}else{if(!Ae.email)return P({title:le("common.enter")+le("common.email"),icon:"none"}),!1;if(!R.test(Ae.email))return P({title:le("common.enter")+le("common.emailText"),icon:"none"}),!1}return!0}function Ce(){xe()&&("phone"===ne.value?V({phone:Ae.phone,area_code:Ae.area_code,type:"register"}).then((()=>{ie.value=!0})):y({email:Ae.email,type:"register"}).then((()=>{ie.value=!0})))}function be(){ie.value=!1}function je(){if(!xe())return;if(!Ae.password)return void P({title:le("common.enter")+le("common.password"),icon:"none"});if(!Ae.passwordConfirm)return void P({title:le("common.enter")+le("common.passwordConfirm"),icon:"none"});if(Ae.password!==Ae.passwordConfirm)return void P({title:le("common.passwordNotEqual"),icon:"none"});if("1"===ve.value.need_invite_code&&!Ae.spread_code)return void P({title:le("register.spread_code"),icon:"none"});let e="1"==ve.value.open_phone_register;("phone"!==ne.value||!e||Ae.captcha)&&("email"!==ne.value||!e||Ae.captcha)?me.value?Ve():_e.confirm({title:le("common.systemTip"),msg:le("common.privacy")+"ï¼Ÿ",confirmButtonText:le("common.sure"),cancelButtonText:le("common.cancel")}).then((()=>{me.value=!0,Ve()})):P({title:le("common.enter")+le("common.captcha"),icon:"none"})}function Ve(){if(!pe.value){pe.value=!0,setTimeout((()=>{pe.value=!1}),2e3);const e=B();let a={captcha:Ae.captcha,password:Ae.password,spread_code:Ae.spread_code,register_domain:e.availableBaseURL,device_info:G()};"phone"===ne.value?(a.account=Ae.phone,a.is_email=0,a.area_code=Ae.area_code):(a.account=Ae.email,a.is_email=1),E(a).then((e=>{P({title:e.msg,icon:"none",complete:async function(){await fe(e.data.token),await he(e.data.dc_api_token),await ge(),T()}})}))}}return X((e=>{e.invite_code?(Ae.spread_code=e.invite_code,r("invite_code",e.invite_code)):Ae.spread_code=i("invite_code")})),(e,a)=>{const o=H(c("wd-icon"),U),l=F,s=H(c("wd-navbar"),q),t=D,n=m,r=H(c("wd-input"),z),i=H(c("wd-count-down"),J),b=H(c("wd-checkbox"),Z),j=H(c("wd-button"),L),V=H(c("wd-gap"),N),y=H(c("wd-message-box"),S);return p(),d(n,{class:"root"},{default:u((()=>[f(s,{safeAreaInsetTop:"",title:e.$t("register.create"),"custom-style":"background-color: transparent !important;",bordered:!1},{left:u((()=>[f(o,{name:"thin-arrow-left",size:"28rpx",color:"#fff",onClick:g(h)},null,8,["onClick"])])),right:u((()=>[f(l,{class:"text-golden-14",onClick:g(_)},{default:u((()=>[w(v(e.$t("login.name")),1)])),_:1},8,["onClick"])])),_:1},8,["title"]),f(n,{class:"login-logo"},{default:u((()=>[f(t,{src:ve.value.logo},null,8,["src"])])),_:1}),f(n,{class:"login-title"},{default:u((()=>[w(v(ve.value.site_name),1)])),_:1}),f(n,{class:"login-main"},{default:u((()=>[f(ae,{tabs:re,modelValue:ne.value,"onUpdate:modelValue":a[0]||(a[0]=e=>ne.value=e)},null,8,["modelValue"]),"phone"===ne.value?(p(),d(n,{key:0,class:"login-row"},{default:u((()=>[f(n,{class:"login-area",onClick:ke},{default:u((()=>[f(t,{class:"login-area-phone",src:M}),f(n,{class:"login-area-text"},{default:u((()=>[w("+"+v(Ae.area_code),1)])),_:1}),f(t,{class:"login-area-down",src:Y})])),_:1}),f(n,{class:"login-input"},{default:u((()=>[f(r,{type:"digit",modelValue:Ae.phone,"onUpdate:modelValue":a[1]||(a[1]=e=>Ae.phone=e),placeholder:e.$t("common.phone"),placeholderClass:"placeholder-class"},null,8,["modelValue","placeholder"])])),_:1})])),_:1})):"email"===ne.value?(p(),d(n,{key:1,class:"login-row"},{default:u((()=>[f(n,{class:"login-input"},{default:u((()=>[f(r,{placeholder:e.$t("common.email"),modelValue:Ae.email,"onUpdate:modelValue":a[2]||(a[2]=e=>Ae.email=e),placeholderClass:"placeholder-class","use-prefix-slot":""},{prefix:u((()=>[f(t,{class:"login-icon",src:I})])),_:1},8,["placeholder","modelValue"])])),_:1})])),_:1})):A("",!0),f(n,{class:"login-row"},{default:u((()=>[f(n,{class:"login-input"},{default:u((()=>[f(r,{placeholder:e.$t("register.password"),modelValue:Ae.password,"onUpdate:modelValue":a[5]||(a[5]=e=>Ae.password=e),placeholderClass:"placeholder-class","use-suffix-slot":"","use-prefix-slot":"",type:se.value?"password":""},{suffix:u((()=>[se.value?(p(),d(t,{key:0,onClick:a[3]||(a[3]=e=>se.value=!se.value),class:"login-icon",src:K})):(p(),d(t,{key:1,onClick:a[4]||(a[4]=e=>se.value=!se.value),class:"login-icon",src:Q}))])),prefix:u((()=>[f(t,{class:"login-icon",src:W})])),_:1},8,["placeholder","modelValue","type"])])),_:1})])),_:1}),f(n,{class:"login-row"},{default:u((()=>[f(n,{class:"login-input"},{default:u((()=>[f(r,{placeholder:e.$t("common.passwordConfirm"),modelValue:Ae.passwordConfirm,"onUpdate:modelValue":a[8]||(a[8]=e=>Ae.passwordConfirm=e),placeholderClass:"placeholder-class","use-suffix-slot":"","use-prefix-slot":"",type:te.value?"password":""},{suffix:u((()=>[te.value?(p(),d(t,{key:0,onClick:a[6]||(a[6]=e=>te.value=!te.value),class:"login-icon",src:K})):(p(),d(t,{key:1,onClick:a[7]||(a[7]=e=>te.value=!te.value),class:"login-icon",src:Q}))])),prefix:u((()=>[f(t,{class:"login-icon",src:W})])),_:1},8,["placeholder","modelValue","type"])])),_:1})])),_:1}),"phone"===ne.value&&"1"==ve.value.open_phone_register||"email"===ne.value&&"1"==ve.value.open_email_register?(p(),d(n,{key:2,class:"login-row"},{default:u((()=>[f(n,{class:"login-input"},{default:u((()=>[f(r,{placeholder:e.$t("common.captcha"),modelValue:Ae.captcha,"onUpdate:modelValue":a[9]||(a[9]=e=>Ae.captcha=e),placeholderClass:"placeholder-class","use-prefix-slot":"","use-suffix-slot":""},{prefix:u((()=>[f(t,{class:"login-icon",src:$})])),suffix:u((()=>[ie.value?(p(),d(n,{key:0,class:"register-captcha register-captcha-disable"},{default:u((()=>[w(v(e.$t("common.newSend"))+"(",1),f(i,{time:ce.value,format:de.value,onFinish:be},null,8,["time","format"]),w(") ")])),_:1})):(p(),d(n,{key:1,class:"register-captcha",onClick:Ce},{default:u((()=>[w(v(ue.value),1)])),_:1}))])),_:1},8,["placeholder","modelValue"])])),_:1})])),_:1})):A("",!0),f(n,{class:"login-row"},{default:u((()=>[f(n,{class:"login-input"},{default:u((()=>[f(r,{placeholder:`${"1"===ve.value.need_invite_code?e.$t("register.spread_code"):e.$t("register.no_spread_code")}`,modelValue:Ae.spread_code,"onUpdate:modelValue":a[10]||(a[10]=e=>Ae.spread_code=e),placeholderClass:"placeholder-class","use-prefix-slot":""},{prefix:u((()=>[f(t,{class:"login-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAAXNSR0IArs4c6QAABIBJREFUaEPtmkmoHkUQx39/RRNwiWAuwZxEVFAxt+hFg7gFl4OeFEEExTUuGIOHYEwQRDRK3Ai4gRdPioiCG6J4MF4kRkVFBA8KHhRcIpq4lFOhP+nMezPds3ybbxoevG+mu6r+/a+q7qluscSalhheBsD/d8YHhgeGM2fAzA4BLgEuBc4CVgPLM4eXu/0BfAu8D7zif5L+aSnroGG9uLSZXQg8Apzch1GLyPgCuEPS613ldwZsZncCD8LYM74Bd0na3gV0J8Bmdg3wzATAjjA66GslPdsWdGvAZrYK+Lxw5RWRco+z54Dngd2SfmljmJkdDZwOXA34pHp+GLWfPXQkfd9GdhfAWwqF90ZKf/OEJemdNoZUjTGzc0LiOiLqs0XStjZ6ugDeA5wWKd0g6fE2RqTGmNktwGNRvz2S3AMaty6Afy8tOysl/djYgowBZnYs8EPUdZ+kVkteF8CeQP5rklrLysCMmfWir7WRfRmQA9b79KVv7IDN7FDgPuB64O+wjN0T/t8KXBWysMf/dkneZ0GbJ8CbgAdKCHYCfwIbSs83SfJNzFwD/go4oYTA12uPSWc/bl9LKvc98H6eGN4HHJ4Zq/slLZt3hj8BTs0EXLm+zhPD64GXM1j2dX29pPfmmuEQf2vD/vrECqY/8n2zpE+rPGFuGB4BMDOP443Fb99/Hxae+xK0GXhI0l91bj9xwMHgG4ArQkweGRuYu9MyM6+GeBXDv4CulPRqTnyXAReTtxdwj3gB2Clpf46crI2HmR0HuGFrqoTmAg4ufhGwTNJLOUYutiyVxu0GLpb0XUpeEnBg9sM6sEHJu+6uVUknZUhN7J4dwmBdQsbHwFpJvgxWthzAvht6tIHBvQA3s1ygsWm3Soo/IxeYnQP4A+CMaORrwI6QgM6vmYhWwDOBvumJDrgN8PAYtV2SzuzKcHmntHoUK2bmwj3rdgbeAKiHjZPg203PLV7OHbXkd3IOw8nv0ADcSz4XNGW8DdBYR9PlqhfAIwOaAA9j3DvqktEbRUV064jRxSZzqoAbAq8LtSTQSFfSA2NFvTJcRpDJeDwsG+hMAm7AuB+hbKtz3Sp3mAmXrjHOs3qc3FoDnWmGK1ydNowuImt2YrguK/X1bqZdui+QM7MOjwNQSubAcOIEZKzrcIqdPt4PDA8MH+xHOS5d/jxc0fZkvw8XLmVor6v9Gj3bW9wBOapOTw5gv9YQ3865vEktqm+QJcCXFYfyL0bPPpNUW/TPAezXkW6PhH7pFRBJP40TTEq2mR0D7CqqlidFfXcUdsW2LhCTA9hnzKuC8cGXH5DdDbwlKXaplJ2d35uZu+x5RdXzfiAu7HuNe01dMd+VJwF7JzN7Arips7XjFfCkpJtTKnIB+6mBF+/OTQmc0nu/OeTnUslifBbgwLKDfhi4sXRvakoYD6j1c+anwrVEP4xLtmzAI0lmdgpwXZEw/H7l8dE5UVJZTx38Ptg3wNvFBdanUzFb1tkYcE9GT03MAHhqUz8hxQPDE5roqakZGJ7a1E9I8ZJj+F8CgQ5bg5tYsgAAAABJRU5ErkJggg=="})])),_:1},8,["placeholder","modelValue"])])),_:1})])),_:1}),f(n,{class:"login-agreement mt-75"},{default:u((()=>[f(b,{modelValue:me.value,"onUpdate:modelValue":a[11]||(a[11]=e=>me.value=e),shape:"square","checked-color":"#F39F2F"},null,8,["modelValue"]),f(n,{class:"login-agreement-text"},{default:u((()=>[w(v(e.$t("login.tip1"))+" ",1),f(l,{onClick:a[12]||(a[12]=e=>g(k)({code:"user_agreement"}))},{default:u((()=>[w(v(e.$t("login.tip2")),1)])),_:1}),w(" "+v(e.$t("login.tip3"))+" ",1),f(l,{onClick:a[13]||(a[13]=e=>g(k)({code:"privacy_agreement"}))},{default:u((()=>[w(v(e.$t("login.tip4")),1)])),_:1})])),_:1})])),_:1}),f(j,{onClick:a[14]||(a[14]=e=>g(x)(je))},{default:u((()=>[w(v(e.$t("register.name")),1)])),_:1}),f(n,{class:"kefu-wrapper"},{default:u((()=>[f(t,{src:ee,alt:"",onClick:g(C)},null,8,["onClick"])])),_:1})])),_:1}),f(V,{"bg-color":"#121317",height:"30rpx"}),f(y)])),_:1})}}},[["__scopeId","data-v-bdda1aa8"]]);export{le as default};
