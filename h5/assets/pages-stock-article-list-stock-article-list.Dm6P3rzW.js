import{_ as a}from"./qt-article-list-item.Cmuhx9V2.js";import{aI as s,o as e,p as t,h as o,f as l,Q as r,T as i,L as d,n,c as u,r as c,t as m,v as _,i as p,s as f,e as v,F as g,aJ as y,aK as w,E as h,d as k,A as j,M as x}from"./index-B2xpwpwA.js";import{d as C,r as T}from"./uni-app.es.DSnRb9Bl.js";import{_ as b}from"./qt-empty.BsLSxMD7.js";import{_ as S}from"./wd-skeleton.s23_fdDR.js";import{b as q,m as I,i as M,o as P,a as $}from"./props.3mmIwxF7.js";import{_ as A}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{w as G}from"./wd-loading.COtG1mNE.js";import{_ as H}from"./wd-icon.av9Pe6hJ.js";import{u as E}from"./useTranslate.CisUcI6B.js";import{_ as F}from"./wd-config-provider.vue_vue_type_script_setup_true_lang.Y-Vfny-m.js";import{g as J}from"./stock.u3bnR5-q.js";import"./base64.3RFQOR3W.js";const K=A(s({name:"wd-divider",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...q,color:I("")},setup:a=>(a,s)=>{const u=n;return e(),t(u,{class:d(`wd-divider ${a.customClass}`),style:r(a.customStyle)},{default:o((()=>[l(u,{class:"wd-divider__line",style:r(a.color?"background: "+a.color:"")},null,8,["style"]),l(u,{class:"wd-divider__content",style:r(a.color?"color: "+a.color:"")},{default:o((()=>[i(a.$slots,"default",{},void 0,!0)])),_:3},8,["style"]),l(u,{class:"wd-divider__line",style:r(a.color?"background: "+a.color:"")},null,8,["style"])])),_:3},8,["class","style"])}}),[["__scopeId","data-v-b5e8ecfa"]]),L=A(s({name:"wd-loadmore",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...q,state:String,loadingText:String,finishedText:String,errorText:String,loadingProps:Object},emits:["reload"],setup(a,{emit:s}){const i=u((()=>{const a=M(k.loadingProps)?P(k.loadingProps,$):{};return a.customClass=`wd-loadmore__loading ${a.customClass||""}`,a})),k=a,j=s,{translate:x}=E("loadmore"),C=c(null);function T(){"error"===k.state&&(C.value="loading",j("reload"))}return(a,s)=>{const u=h,c=n;return e(),t(c,{class:d(["wd-loadmore",a.customClass]),style:r(a.customStyle),onClick:T},{default:o((()=>["finished"===a.state?(e(),t(K,{key:0},{default:o((()=>[m(_(a.finishedText||p(x)("finished")),1)])),_:1})):f("",!0),"loadMore"===a.state?(e(),t(K,{key:1},{default:o((()=>[m("加载更多")])),_:1})):f("",!0),"error"===a.state?(e(),v(g,{key:2},[l(u,{class:"wd-loadmore__text"},{default:o((()=>[m(_(a.errorText||p(x)("error")),1)])),_:1}),l(u,{class:"wd-loadmore__text is-light"},{default:o((()=>[m(_(p(x)("retry")),1)])),_:1}),l(H,{name:"refresh","custom-class":"wd-loadmore__refresh"})],64)):f("",!0),"loading"===a.state?(e(),v(g,{key:3},[l(G,y(w(i.value)),null,16),l(u,{class:"wd-loadmore__text"},{default:o((()=>[m(_(a.loadingText||p(x)("loading")),1)])),_:1})],64)):f("",!0)])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-0d323c74"]]),O={__name:"stock-article-list",setup(s){const r=c([]),i=c(!0),d=c(!1),n="loadMore",m="loading",_="finished",y=c(n),w=c(1),h=u((()=>r.value.slice(0,20*w.value)));async function q(){y.value=m,await new Promise((a=>setTimeout(a,300))),20*w.value<r.value.length?(w.value++,y.value=n):y.value=_}C(q),async function(){y.value=m,r.value=await J(),i.value=!1,d.value=!r.value}();const I=Array.from({length:10},(()=>({width:"100%",height:"170rpx"})));return(s,r)=>{const n=T(k("qt-article-list-item"),a),u=T(k("qt-empty"),b),c=T(k("wd-skeleton"),S),m=T(k("wd-loadmore"),L),_=T(k("wd-config-provider"),F);return e(),t(_,{theme:"dark"},{default:o((()=>[l(c,{animation:"gradient",loading:i.value,"row-col":p(I)},{default:o((()=>[(e(!0),v(g,null,j(h.value,(a=>(e(),t(n,{key:a.id,data:a,onClick:s=>p(x)({id:a.id,title:a.title})},null,8,["data","onClick"])))),128)),d.value?(e(),t(u,{key:0})):f("",!0)])),_:1},8,["loading","row-col"]),l(m,{state:y.value,onClick:q},null,8,["state"])])),_:1})}}};export{O as default};
