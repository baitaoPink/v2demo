import{u as e,aP as a,r as l,bb as o,d as n,p as c,h as s,n as i,o as t,e as d,F as r,f as p,t as m,v as u,s as h,i as f,ac as b,aE as _,a_ as v,aZ as x,b0 as w,ae as g,bA as V,aX as k,aY as C,D as y}from"./index-B2xpwpwA.js";import{_ as $}from"./wd-input.DWD3v5sG.js";import{a as U,r as j}from"./uni-app.es.DSnRb9Bl.js";import{_ as E}from"./wd-count-down.BRJIj759.js";import{_ as F}from"./wd-button.C5ofvjh5.js";import{_ as P}from"./email.BTFPQqYm.js";import{_ as S}from"./captcha.BMwRqaq8.js";import{_ as T}from"./phone.Bhvab_M0.js";import{_ as N}from"./down.DdbpIfGY.js";import{_ as O}from"./success.CkSUQgxZ.js";import{_ as A}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./wd-icon.av9Pe6hJ.js";import"./props.3mmIwxF7.js";import"./useParent.qK3nwHc2.js";import"./useTranslate.CisUcI6B.js";import"./base64.3RFQOR3W.js";const B=A({__name:"bind-operate",setup(A){const{t:B}=e(),z=a({phone:"",newPhone:"",email:"",newEmail:"",password:"",passwordConfirm:"",spread_code:"",captcha:"",newCaptcha:"",area_code:"86"}),D=l(!1),I=l(6e4),M=l(" ss "),X=l(B("common.sendCodeText")),Y=l(""),Z=l({"bind-phone":B("setting.bind")+B("common.phone"),"unbind-phone":B("setting.unbind")+B("common.phone"),"again-bind-phone":B("setting.again-bind")+B("common.phone"),"bind-email":B("setting.bind")+B("common.email"),"unbind-email":B("setting.unbind")+B("common.email"),"again-bind-email":B("setting.again-bind")+B("common.email")}),q=l(!1);function G(){(function(){if("unbind-email"===Y.value||"bind-phone"===Y.value||"again-bind-email"===Y.value){if(!z.email)return g({title:B("common.enter")+B("common.email"),icon:"none"}),!1;if(!w.test(z.email))return g({title:B("common.enter")+B("common.emailText"),icon:"none"}),!1}else if("bind-email"===Y.value&&!z.phone)return g({title:B("common.enter")+B("common.phone"),icon:"none"}),!1;return!0})()&&("unbind-email"===Y.value||"bind-phone"===Y.value||"again-bind-email"===Y.value?v({email:z.email,type:"user_update"}).then((()=>{D.value=!0})):x({phone:z.phone,area_code:z.area_code,type:"user_update"}).then((()=>{D.value=!0})))}function H(){if("bind-email"===Y.value){if(!w.test(z.email))return g({title:B("common.enter")+B("common.emailText"),icon:"none"}),!1;if(!z.captcha)return void g({title:B("common.enter")+B("common.captcha"),icon:"none"});V({email:z.email,captcha:z.captcha}).then((()=>{q.value=!0}))}else if("bind-phone"===Y.value){if(!z.phone)return void g({title:B("common.enter")+B("common.phone"),icon:"none"});if(!z.captcha)return void g({title:B("common.enter")+B("common.captcha"),icon:"none"});V({phone:z.phone,phone_area_code:z.area_code,captcha:z.captcha}).then((()=>{q.value=!0}))}else if("again-bind-email"===Y.value){if(!z.email)return void g({title:B("common.enter")+B("common.email"),icon:"none"});if(!z.newEmail)return void g({title:B("common.enter")+B("common.newEmail"),icon:"none"});if(!w(z.newEmail))return void g({title:B("common.enter")+B("common.emailText"),icon:"none"});if(!z.captcha)return void g({title:B("common.enter")+B("common.captcha"),icon:"none"});V({email:z.newEmail,captcha:z.captcha}).then((()=>{q.value=!0}))}else if("unbind-email"===Y.value){if(!z.email)return void g({title:B("common.enter")+B("common.email"),icon:"none"});if(!w(z.email))return void g({title:B("common.enter")+B("common.emailText"),icon:"none"});if(!z.captcha)return void g({title:B("common.enter")+B("common.captcha"),icon:"none"});V({untie_email:z.email,captcha:z.captcha}).then((()=>{q.value=!0}))}else if("unbind-phone"===Y.value){if(!z.phone)return void g({title:B("common.enter")+B("common.phone"),icon:"none"});if(!z.captcha)return void g({title:B("common.enter")+B("common.captcha"),icon:"none"});V({untie_phone:z.phone,phone_area_code:z.area_code,captcha:z.captcha}).then((()=>{q.value=!0}))}else if("again-bind-phone"===Y.value){if(!z.phone)return void g({title:B("common.enter")+B("common.phone"),icon:"none"});if(!z.newPhone)return void g({title:B("common.enter")+B("common.newPhone"),icon:"none"});if(!z.captcha)return void g({title:B("common.enter")+B("common.captcha"),icon:"none"});V({phone:z.phone,phone_area_code:z.area_code,captcha:z.captcha}).then((()=>{q.value=!0}))}}function J(){D.value=!1}function K(){k("chooseArea",(e=>{z.area_code=e.area_code})),C()}return U((e=>{e.type&&(Y.value=e.type,o({title:Z.value[e.type]}))})),(e,a)=>{const l=y,o=j(n("wd-input"),$),v=i,x=j(n("wd-count-down"),E),w=j(n("wd-button"),F);return t(),c(v,{class:"bind-main"},{default:s((()=>[q.value?h("",!0):(t(),d(r,{key:0},["bind-phone"===Y.value?(t(),d(r,{key:0},[p(v,{class:"bind-row"},{default:s((()=>[p(v,{class:"bind-input"},{default:s((()=>[p(o,{modelValue:z.email,"onUpdate:modelValue":a[0]||(a[0]=e=>z.email=e),prop:"email",placeholder:e.$t("common.email"),placeholderClass:"placeholder-class","use-prefix-slot":""},{prefix:s((()=>[p(l,{class:"bind-icon",src:P})])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1}),p(v,{class:"bind-row"},{default:s((()=>[p(v,{class:"bind-input"},{default:s((()=>[p(o,{placeholder:e.$t("common.captcha"),modelValue:z.captcha,"onUpdate:modelValue":a[1]||(a[1]=e=>z.captcha=e),placeholderClass:"placeholder-class","use-prefix-slot":"","use-suffix-slot":""},{prefix:s((()=>[p(l,{class:"bind-icon",src:S})])),suffix:s((()=>[D.value?(t(),c(v,{key:0,class:"register-captcha register-captcha-disable"},{default:s((()=>[m(u(e.$t("common.newSend"))+"(",1),p(x,{time:I.value,format:M.value,onFinish:J},null,8,["time","format"]),m(") ")])),_:1})):(t(),c(v,{key:1,class:"register-captcha",onClick:G},{default:s((()=>[m(u(X.value),1)])),_:1}))])),_:1},8,["placeholder","modelValue"])])),_:1})])),_:1}),p(v,{class:"bind-row"},{default:s((()=>[p(v,{class:"bind-area",onClick:K},{default:s((()=>[p(l,{class:"bind-area-phone",src:T}),p(v,{class:"bind-area-text"},{default:s((()=>[m("+"+u(z.area_code),1)])),_:1}),p(l,{class:"bind-area-down",src:N})])),_:1}),p(v,{class:"bind-input"},{default:s((()=>[p(o,{modelValue:z.phone,"onUpdate:modelValue":a[2]||(a[2]=e=>z.phone=e),prop:"phoneNumber",placeholder:e.$t("common.phone"),placeholderClass:"placeholder-class",type:"digit"},null,8,["modelValue","placeholder"])])),_:1})])),_:1})],64)):h("",!0),"unbind-phone"===Y.value?(t(),d(r,{key:1},[p(v,{class:"bind-row"},{default:s((()=>[p(v,{class:"bind-area",onClick:K},{default:s((()=>[p(l,{class:"bind-area-phone",src:T}),p(v,{class:"bind-area-text"},{default:s((()=>[m("+"+u(z.area_code),1)])),_:1}),p(l,{class:"bind-area-down",src:N})])),_:1}),p(v,{class:"bind-input"},{default:s((()=>[p(o,{modelValue:z.phone,"onUpdate:modelValue":a[3]||(a[3]=e=>z.phone=e),prop:"phoneNumber",placeholder:e.$t("common.phone"),placeholderClass:"placeholder-class",type:"digit","use-prefix-slot":""},{prefix:s((()=>[])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1}),p(v,{class:"bind-row"},{default:s((()=>[p(v,{class:"bind-input"},{default:s((()=>[p(o,{placeholder:e.$t("common.captcha"),modelValue:z.captcha,"onUpdate:modelValue":a[4]||(a[4]=e=>z.captcha=e),placeholderClass:"placeholder-class","use-prefix-slot":"","use-suffix-slot":""},{prefix:s((()=>[p(l,{class:"bind-icon",src:S})])),suffix:s((()=>[D.value?(t(),c(v,{key:0,class:"register-captcha register-captcha-disable"},{default:s((()=>[m(u(e.$t("common.newSend"))+"(",1),p(x,{time:I.value,format:M.value,onFinish:J},null,8,["time","format"]),m(") ")])),_:1})):(t(),c(v,{key:1,class:"register-captcha",onClick:G},{default:s((()=>[m(u(X.value),1)])),_:1}))])),_:1},8,["placeholder","modelValue"])])),_:1})])),_:1})],64)):h("",!0),"again-bind-phone"===Y.value?(t(),d(r,{key:2},[p(v,{class:"bind-row"},{default:s((()=>[p(v,{class:"bind-area",onClick:K},{default:s((()=>[p(l,{class:"bind-area-phone",src:T}),p(v,{class:"bind-area-text"},{default:s((()=>[m("+"+u(z.area_code),1)])),_:1}),p(l,{class:"bind-area-down",src:N})])),_:1}),p(v,{class:"bind-input"},{default:s((()=>[p(o,{modelValue:z.phone,"onUpdate:modelValue":a[5]||(a[5]=e=>z.phone=e),prop:"phoneNumber",placeholder:e.$t("common.phone"),placeholderClass:"placeholder-class",type:"digit","use-prefix-slot":""},{prefix:s((()=>[])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1}),p(v,{class:"bind-row"},{default:s((()=>[p(v,{class:"bind-input"},{default:s((()=>[p(o,{placeholder:e.$t("common.captcha"),modelValue:z.captcha,"onUpdate:modelValue":a[6]||(a[6]=e=>z.captcha=e),placeholderClass:"placeholder-class","use-prefix-slot":"","use-suffix-slot":""},{prefix:s((()=>[p(l,{class:"bind-icon",src:S})])),suffix:s((()=>[D.value?(t(),c(v,{key:0,class:"register-captcha register-captcha-disable"},{default:s((()=>[m(u(e.$t("common.newSend"))+"(",1),p(x,{time:I.value,format:M.value,onFinish:J},null,8,["time","format"]),m(") ")])),_:1})):(t(),c(v,{key:1,class:"register-captcha",onClick:G},{default:s((()=>[m(u(X.value),1)])),_:1}))])),_:1},8,["placeholder","modelValue"])])),_:1})])),_:1}),p(v,{class:"bind-row"},{default:s((()=>[p(v,{class:"bind-area",onClick:K},{default:s((()=>[p(l,{class:"bind-area-phone",src:T}),p(v,{class:"bind-area-text"},{default:s((()=>[m("+"+u(z.area_code),1)])),_:1}),p(l,{class:"bind-area-down",src:N})])),_:1}),p(v,{class:"bind-input"},{default:s((()=>[p(o,{modelValue:z.newPhone,"onUpdate:modelValue":a[7]||(a[7]=e=>z.newPhone=e),prop:"phoneNumber",placeholder:e.$t("common.nephron"),placeholderClass:"placeholder-class","use-prefix-slot":""},{prefix:s((()=>[])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1})],64)):h("",!0),"bind-email"===Y.value?(t(),d(r,{key:3},[p(v,{class:"bind-row"},{default:s((()=>[p(v,{class:"bind-area",onClick:K},{default:s((()=>[p(l,{class:"bind-area-phone",src:T}),p(v,{class:"bind-area-text"},{default:s((()=>[m("+"+u(z.area_code),1)])),_:1}),p(l,{class:"bind-area-down",src:N})])),_:1}),p(v,{class:"bind-input"},{default:s((()=>[p(o,{modelValue:z.phone,"onUpdate:modelValue":a[8]||(a[8]=e=>z.phone=e),prop:"phoneNumber",placeholder:e.$t("common.phone"),placeholderClass:"placeholder-class",type:"digit"},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),p(v,{class:"bind-row"},{default:s((()=>[p(v,{class:"bind-input"},{default:s((()=>[p(o,{placeholder:e.$t("common.captcha"),modelValue:z.captcha,"onUpdate:modelValue":a[9]||(a[9]=e=>z.captcha=e),placeholderClass:"placeholder-class","use-prefix-slot":"","use-suffix-slot":""},{prefix:s((()=>[p(l,{class:"bind-icon",src:S})])),suffix:s((()=>[D.value?(t(),c(v,{key:0,class:"register-captcha register-captcha-disable"},{default:s((()=>[m(u(e.$t("common.newSend"))+"(",1),p(x,{time:I.value,format:M.value,onFinish:J},null,8,["time","format"]),m(") ")])),_:1})):(t(),c(v,{key:1,class:"register-captcha",onClick:G},{default:s((()=>[m(u(X.value),1)])),_:1}))])),_:1},8,["placeholder","modelValue"])])),_:1})])),_:1}),p(v,{class:"bind-row"},{default:s((()=>[p(v,{class:"bind-input"},{default:s((()=>[p(o,{modelValue:z.email,"onUpdate:modelValue":a[10]||(a[10]=e=>z.email=e),prop:"email",placeholder:e.$t("common.email"),placeholderClass:"placeholder-class","use-prefix-slot":""},{prefix:s((()=>[p(l,{class:"bind-icon",src:P})])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1})],64)):h("",!0),"unbind-email"===Y.value?(t(),d(r,{key:4},[p(v,{class:"bind-row"},{default:s((()=>[p(v,{class:"bind-input"},{default:s((()=>[p(o,{modelValue:z.email,"onUpdate:modelValue":a[11]||(a[11]=e=>z.email=e),prop:"email",placeholder:e.$t("common.email"),placeholderClass:"placeholder-class","use-prefix-slot":""},{prefix:s((()=>[p(l,{class:"bind-icon",src:P})])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1}),p(v,{class:"bind-row"},{default:s((()=>[p(v,{class:"bind-input"},{default:s((()=>[p(o,{placeholder:e.$t("common.captcha"),modelValue:z.captcha,"onUpdate:modelValue":a[12]||(a[12]=e=>z.captcha=e),placeholderClass:"placeholder-class","use-prefix-slot":"","use-suffix-slot":""},{prefix:s((()=>[p(l,{class:"bind-icon",src:S})])),suffix:s((()=>[D.value?(t(),c(v,{key:0,class:"register-captcha register-captcha-disable"},{default:s((()=>[m(u(e.$t("common.newSend"))+"(",1),p(x,{time:I.value,format:M.value,onFinish:J},null,8,["time","format"]),m(") ")])),_:1})):(t(),c(v,{key:1,class:"register-captcha",onClick:G},{default:s((()=>[m(u(X.value),1)])),_:1}))])),_:1},8,["placeholder","modelValue"])])),_:1})])),_:1})],64)):h("",!0),"again-bind-email"===Y.value?(t(),d(r,{key:5},[p(v,{class:"bind-row"},{default:s((()=>[p(v,{class:"bind-input"},{default:s((()=>[p(o,{modelValue:z.email,"onUpdate:modelValue":a[13]||(a[13]=e=>z.email=e),prop:"email",placeholder:e.$t("common.email"),placeholderClass:"placeholder-class","use-prefix-slot":""},{prefix:s((()=>[p(l,{class:"bind-icon",src:P})])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1}),p(v,{class:"bind-row"},{default:s((()=>[p(v,{class:"bind-input"},{default:s((()=>[p(o,{placeholder:e.$t("common.captcha"),modelValue:z.captcha,"onUpdate:modelValue":a[14]||(a[14]=e=>z.captcha=e),placeholderClass:"placeholder-class","use-prefix-slot":"","use-suffix-slot":""},{prefix:s((()=>[p(l,{class:"bind-icon",src:S})])),suffix:s((()=>[D.value?(t(),c(v,{key:0,class:"register-captcha register-captcha-disable"},{default:s((()=>[m(u(e.$t("common.newSend"))+"(",1),p(x,{time:I.value,format:M.value,onFinish:J},null,8,["time","format"]),m(") ")])),_:1})):(t(),c(v,{key:1,class:"register-captcha",onClick:G},{default:s((()=>[m(u(X.value),1)])),_:1}))])),_:1},8,["placeholder","modelValue"])])),_:1})])),_:1}),p(v,{class:"bind-row"},{default:s((()=>[p(v,{class:"bind-input"},{default:s((()=>[p(o,{modelValue:z.newEmail,"onUpdate:modelValue":a[15]||(a[15]=e=>z.newEmail=e),prop:"email",placeholder:e.$t("common.newEmail"),placeholderClass:"placeholder-class","use-prefix-slot":""},{prefix:s((()=>[p(l,{class:"bind-icon",src:P})])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1})],64)):h("",!0),-1!==Y.value.indexOf("unbind")?(t(),c(w,{key:6,onClick:a[16]||(a[16]=e=>f(b)(H))},{default:s((()=>[m(u(e.$t("setting.sureUnBind")),1)])),_:1})):(t(),c(w,{key:7,onClick:a[17]||(a[17]=e=>f(b)(H))},{default:s((()=>[m(u(e.$t("setting.sureBind")),1)])),_:1}))],64)),q.value?(t(),c(v,{key:1,class:"bind-success"},{default:s((()=>[p(l,{src:O}),p(v,{class:"bind-success-text"},{default:s((()=>[m(u(-1!==Y.value.indexOf("unbind")?e.$t("setting.unbind_success"):e.$t("setting.bind_success")),1)])),_:1}),p(v,{class:"bind-success-tip"},{default:s((()=>[m(u(e.$t("setting.your"))+u(-1===Y.value.indexOf("phone")?e.$t("common.email"):e.$t("common.phone"))+" "+u(e.$t("setting.stop"))+" "+u(-1!==Y.value.indexOf("unbind")?e.$t("setting.unbind_success"):e.$t("setting.bind_success")),1)])),_:1}),p(v,{class:"bind-success-btn",onClick:f(_)},{default:s((()=>[m(u(e.$t("setting.backSettings")),1)])),_:1},8,["onClick"])])),_:1})):h("",!0)])),_:1})}}},[["__scopeId","data-v-04bab960"]]);export{B as default};
