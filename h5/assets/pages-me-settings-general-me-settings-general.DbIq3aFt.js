import{u as a,r as e,ah as t,ax as l,aA as s,d as n,p as o,h as u,bu as i,bv as r,bw as c,a7 as d,aq as g,as as m,ai as f,l as p,bx as _,g as v,n as w,o as h,f as k,t as b,v as y,i as C,by as j,ak as $,L as x,bz as z,e as S,A as B,F as V,bA as A,bB as T,bC as U,ae as q,D as I,s as D,bD as E,bE as F,E as M}from"./index-B2xpwpwA.js";import{_ as N}from"./wd-icon.av9Pe6hJ.js";import{o as L,r as P}from"./uni-app.es.DSnRb9Bl.js";import{_ as R}from"./wd-gap.BTJcE1Vl.js";import{u as G,_ as H}from"./wd-message-box.CEsBvNb5.js";import{_ as J}from"./wd-popup.DoF1ewYn.js";import{_ as K}from"./qt-upload.CTXXccCG.js";import{_ as O}from"./default-user.1v4nheUv.js";import{_ as Q}from"./tick.DzZJUBoq.js";import"./useTranslate.CisUcI6B.js";import{_ as W}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./props.3mmIwxF7.js";import"./wd-button.C5ofvjh5.js";import"./base64.3RFQOR3W.js";import"./wd-input.DWD3v5sG.js";import"./useParent.qK3nwHc2.js";import"./wd-loading.COtG1mNE.js";const X=W({__name:"me-settings-general",setup(W){const{t:X}=a(),Y=e({}),Z=e(""),aa=e(X("setting.zh")),ea=e(""),ta=e(!1),la=e(!1),sa=e(!1),na=e([]),oa=e([]),ua=e([{name:"setting.red-up-green-down",value:1,icons:"red-up-green-down"},{name:"setting.green-up-red-down",value:3,icons:"green-up-red-down"},{name:"setting.red-up-blue-down",value:2,icons:"red-up-blue-down"}]),ia=e({}),ra=G(),ca=e(""),{logout:da}=t(),{setUserSetting:ga}=l(),ma=e(!1),fa=e({keys:[],currentSize:0,limitSize:0}),pa=e(null);function _a(){pa.value.uploading()}function va(a){A({avatar:a.name}).then((()=>{ba()}))}function wa(){i({success:a=>{fa.value.keys=a.keys,fa.value.currentSize=a.currentSize,fa.value.limitSize=a.limitSize}})}function ha(){ra.confirm({title:X("common.systemTip"),msg:X("common.logout")+"？",confirmButtonText:X("common.sure"),cancelButtonText:X("common.cancel")}).then((()=>{da()}))}function ka(){ra.confirm({title:X("common.storage"),msg:X("common.clearStorage")+"？",confirmButtonText:X("common.sure"),cancelButtonText:X("common.cancel")}).then((()=>{T(),U().then((a=>{q({title:a.msg,duration:2e3})})),wa()}))}function ba(){_({}).then((a=>{ga(a.data),ia.value=a.data})),v({}).then((a=>{Y.value=a.data,Z.value=a.data.nickname}))}return s((()=>{wa()})),L((()=>{r({}).then((a=>{na.value=a.data;for(let e=0;e<a.data.length;e++)c()==a.data[e].file_name&&(aa.value=a.data[e].language_name)})),d({}).then((a=>{if(oa.value=a.data,g("default"))ea.value=g("default");else for(let e=0;e<a.data.length;e++)1===a.data[e].is_default&&(ea.value=oa.value[e].name,m("default",oa.value[e].name))})),ba(),f({}).then((a=>{a.data.user_svip&&(ca.value=a.data.user_svip.rate+"%")})),ma.value=!1,p({}).then((a=>{a.data.id_card&&1===a.data.id_card.status&&(ma.value=!0),a.data.passport&&1===a.data.passport.status&&(ma.value=!0)}))})),(a,e)=>{const t=w,l=I,s=P(n("wd-icon"),N),i=P(n("wd-gap"),R),r=P(n("wd-message-box"),H),c=M,d=P(n("wd-popup"),J),g=P(n("qt-upload"),K);return h(),o(t,{class:"setting-page"},{default:u((()=>[k(t,{class:"setting-main"},{default:u((()=>[k(t,{class:"setting-row"},{default:u((()=>[k(t,{class:"setting-row-left bold"},{default:u((()=>[b(y(a.$t("setting.accountInfo")),1)])),_:1})])),_:1}),k(t,{class:"setting-row",onClick:_a},{default:u((()=>[k(t,{class:"setting-row-left"},{default:u((()=>[b(y(a.$t("setting.avatar")),1)])),_:1}),k(t,{class:"setting-row-right"},{default:u((()=>[Y.value.avatar?(h(),o(l,{key:0,class:"avatar-img",src:Y.value.avatar},null,8,["src"])):(h(),o(l,{key:1,class:"avatar-img",src:O})),k(s,{name:"arrow-right"})])),_:1})])),_:1}),k(t,{class:"setting-row"},{default:u((()=>[k(t,{class:"setting-row-left"},{default:u((()=>[b(y(a.$t("setting.nickname")),1)])),_:1}),k(t,{class:"setting-row-right",onClick:e[0]||(e[0]=a=>C(j)({name:Y.value.nickname}))},{default:u((()=>[b(y(Y.value.nickname)+" ",1),k(s,{name:"arrow-right"})])),_:1})])),_:1}),k(t,{class:"setting-row",onClick:C($)},{default:u((()=>[k(t,{class:"setting-row-left"},{default:u((()=>[b(y(a.$t("setting.authentication")),1)])),_:1}),k(t,{class:x(["setting-row-right",{active:!ma.value}])},{default:u((()=>[b(y(ma.value?a.$t("setting.certified"):a.$t("setting.not_certified"))+" ",1),k(s,{name:"arrow-right"})])),_:1},8,["class"])])),_:1},8,["onClick"])])),_:1}),k(i,{"bg-color":"#000",height:"16rpx"}),k(t,{class:"setting-main"},{default:u((()=>[k(t,{class:"setting-row"},{default:u((()=>[k(t,{class:"setting-row-left bold"},{default:u((()=>[b(y(a.$t("setting.generalSetup")),1)])),_:1})])),_:1}),k(t,{class:"setting-row",onClick:e[1]||(e[1]=a=>ta.value=!0)},{default:u((()=>[k(t,{class:"setting-row-left"},{default:u((()=>[b(y(a.$t("setting.language")),1)])),_:1}),k(t,{class:"setting-row-right"},{default:u((()=>[b(y(aa.value)+" ",1),k(s,{name:"arrow-right"})])),_:1})])),_:1}),k(t,{class:"setting-row",onClick:e[2]||(e[2]=a=>la.value=!0)},{default:u((()=>[k(t,{class:"setting-row-left"},{default:u((()=>[b(y(a.$t("setting.currencyName")),1)])),_:1}),k(t,{class:"setting-row-right"},{default:u((()=>[b(y(ea.value)+" ",1),k(s,{name:"arrow-right"})])),_:1})])),_:1}),k(t,{class:"setting-row",onClick:e[3]||(e[3]=a=>sa.value=!0)},{default:u((()=>[k(t,{class:"setting-row-left"},{default:u((()=>[b(y(a.$t("setting.color")),1)])),_:1}),k(t,{class:"setting-row-right"},{default:u((()=>[b(y(2===ia.value.ud_color?a.$t("setting.red-up-blue-down"):3===ia.value.ud_color?a.$t("setting.green-up-red-down"):a.$t("setting.red-up-green-down"))+" ",1),k(s,{name:"arrow-right"})])),_:1})])),_:1}),k(t,{class:"setting-row",onClick:C(z)},{default:u((()=>[k(t,{class:"setting-row-left"},{default:u((()=>[b(y(a.$t("setting.notifications")),1)])),_:1}),k(t,{class:"setting-row-right"},{default:u((()=>[k(s,{name:"arrow-right"})])),_:1})])),_:1},8,["onClick"])])),_:1}),k(i,{"bg-color":"#000",height:"16rpx"}),k(t,{class:"setting-main"},{default:u((()=>[k(t,{class:"setting-row"},{default:u((()=>[k(t,{class:"setting-row-left bold"},{default:u((()=>[b(y(a.$t("setting.other")),1)])),_:1})])),_:1}),k(t,{class:"setting-row",onClick:ka},{default:u((()=>[k(t,{class:"setting-row-left"},{default:u((()=>[b(y(a.$t("common.storage")),1)])),_:1}),k(t,{class:"setting-row-right"},{default:u((()=>[b(y((fa.value.currentSize/1024).toFixed(2))+" MB ",1),k(s,{name:"arrow-right"})])),_:1})])),_:1})])),_:1}),k(t,{class:"setting-button",onClick:ha},{default:u((()=>[b(y(a.$t("setting.logout")),1)])),_:1}),k(i,{"bg-color":"#000",height:"30rpx"}),k(r),k(d,{modelValue:ta.value,"onUpdate:modelValue":e[4]||(e[4]=a=>ta.value=a),position:"bottom",light:"#36373B","custom-style":"background-color: #181A1C;"},{default:u((()=>[k(t,{class:"popup"},{default:u((()=>[(h(!0),S(V,null,B(na.value,((a,e)=>(h(),o(t,{class:"popup-list",key:e,onClick:e=>{return t=a,aa.value=t.language_name,m("language",t.file_name),"vi"===t.file_name?E("vie"):E(t.file_name),void location.reload();var t}},{default:u((()=>[k(c,null,{default:u((()=>[b(y(a.language_name),1)])),_:2},1024),aa.value===a.language_name?(h(),o(l,{key:0,src:Q,alt:""})):D("",!0)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["modelValue"]),k(d,{modelValue:la.value,"onUpdate:modelValue":e[5]||(e[5]=a=>la.value=a),position:"bottom",light:"#36373B","custom-style":"background-color: #181A1C;"},{default:u((()=>[k(t,{class:"popup"},{default:u((()=>[(h(!0),S(V,null,B(oa.value,((a,e)=>(h(),o(t,{class:"popup-list",key:e,onClick:e=>{return t=a,ea.value=t.name,la.value=!1,void m("default",t.name);var t}},{default:u((()=>[k(t,{class:"currency"},{default:u((()=>[k(l,{src:a.icon_url,class:"currency-img",alt:""},null,8,["src"]),k(c,null,{default:u((()=>[b(y(a.name)+"("+y(a.name_zh)+")",1)])),_:2},1024)])),_:2},1024),ea.value===a.name?(h(),o(l,{key:0,src:Q,alt:""})):D("",!0)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["modelValue"]),k(d,{modelValue:sa.value,"onUpdate:modelValue":e[6]||(e[6]=a=>sa.value=a),position:"bottom",light:"#36373B","custom-style":"background-color: #181A1C;"},{default:u((()=>[k(t,{class:"popup"},{default:u((()=>[(h(!0),S(V,null,B(ua.value,((e,s)=>(h(),o(t,{class:"popup-list",key:s,onClick:a=>{return t="ud_color",l=e.value,ta.value=!1,la.value=!1,sa.value=!1,void F({[t]:l}).then((a=>{q({title:a.msg,icon:"none",complete:function(){ba()}})}));var t,l}},{default:u((()=>[k(t,{class:"currency"},{default:u((()=>[k(l,{src:"/static/icons/"+e.icons+".png",class:"currency-img",alt:""},null,8,["src"]),k(c,null,{default:u((()=>[b(y(a.$t(e.name)),1)])),_:2},1024)])),_:2},1024),ia.value.ud_color===e.value?(h(),o(l,{key:0,src:Q,alt:""})):D("",!0)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["modelValue"]),k(g,{ref_key:"uploadRef",ref:pa,onUploadImg:va},null,512)])),_:1})}}},[["__scopeId","data-v-953e9591"]]);export{X as default};
