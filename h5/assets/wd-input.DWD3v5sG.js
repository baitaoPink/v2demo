import{c as e,aI as l,r as a,w as s,aO as o,o as r,p as t,h as n,L as i,Q as u,T as c,s as d,f as p,e as f,t as m,v as h,F as y,n as g,bh as v,E as _}from"./index-B2xpwpwA.js";import{_ as b}from"./wd-icon.av9Pe6hJ.js";import{b as w,u as x,d as S,m as k,p as C,r as I,c as $,i as j,h as P,t as E,y as V}from"./props.3mmIwxF7.js";import{u as W}from"./useParent.qK3nwHc2.js";import{u as L}from"./useTranslate.CisUcI6B.js";import{_ as T}from"./_plugin-vue_export-helper.BCo6x5W8.js";const O=Symbol("wd-cell-group");const q=Symbol("wd-form"),B={...w,model:x(Object),rules:{type:Object,default:()=>({})},resetOnChange:S(!0),errorType:{type:String,default:"message"}},z=T(l({name:"wd-input",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...w,customInputClass:k(""),customLabelClass:k(""),placeholder:String,placeholderStyle:String,placeholderClass:k(""),cursorSpacing:C(0),cursor:C(-1),selectionStart:C(-1),selectionEnd:C(-1),adjustPosition:S(!0),holdKeyboard:S(!1),confirmType:k("done"),confirmHold:S(!1),focus:S(!1),type:k("text"),maxlength:{type:Number,default:-1},disabled:S(!1),alwaysEmbed:S(!1),alignRight:S(!1),modelValue:I(""),showPassword:S(!1),clearable:S(!1),readonly:S(!1),useSuffixSlot:S(!1),usePrefixSlot:S(!1),prefixIcon:String,suffixIcon:String,showWordLimit:S(!1),label:String,labelWidth:k(""),useLabelSlot:S(!1),size:String,error:S(!1),center:S(!1),noBorder:S(!1),required:S(!1),prop:String,rules:$(),clearTrigger:k("always"),focusWhenClear:S(!0),ignoreCompositionEvent:S(!0)},emits:["update:modelValue","clear","change","blur","focus","input","keyboardheightchange","confirm","clicksuffixicon","clickprefixicon","click"],setup(l,{emit:w}){const x=l,S=w,{translate:k}=L("input"),C=a(!1),I=a(!1),$=a(!1),T=a(!1),B=a(""),z=function(){const{parent:l,index:a}=W(O);return{border:e((()=>l&&l.props.border&&a.value))}}();s((()=>x.focus),(e=>{$.value=e}),{immediate:!0,deep:!0}),s((()=>x.modelValue),(e=>{B.value=j(e)?String(e):""}),{immediate:!0,deep:!0});const{parent:F}=W(q),H=e((()=>j(x.placeholder)?x.placeholder:k("placeholder"))),K=e((()=>{const{disabled:e,readonly:l,clearable:a,clearTrigger:s}=x;return!(!a||l||e||!B.value||!("always"===s||"focus"===x.clearTrigger&&T.value))})),M=e((()=>{const{disabled:e,readonly:l,maxlength:a,showWordLimit:s}=x;return Boolean(!e&&!l&&j(a)&&a>-1&&s)})),A=e((()=>F&&x.prop&&F.errorMessages&&F.errorMessages[x.prop]?F.errorMessages[x.prop]:"")),R=e((()=>{let e=!1;if(F&&F.props.rules){const l=F.props.rules;for(const a in l)Object.prototype.hasOwnProperty.call(l,a)&&a===x.prop&&Array.isArray(l[a])&&(e=l[a].some((e=>e.required)))}return x.required||x.rules.some((e=>e.required))||e})),G=e((()=>`wd-input  ${x.label||x.useLabelSlot?"is-cell":""} ${x.center?"is-center":""} ${z.border.value?"is-border":""} ${x.size?"is-"+x.size:""} ${x.error?"is-error":""} ${x.disabled?"is-disabled":""}  ${B.value&&String(B.value).length>0?"is-not-empty":""}  ${x.noBorder?"is-no-border":""} ${x.customClass}`)),N=e((()=>`wd-input__label ${x.customLabelClass} ${R.value?"is-required":""}`)),Q=e((()=>`wd-input__placeholder  ${x.placeholderClass}`)),U=e((()=>x.labelWidth?P({"min-width":x.labelWidth,"max-width":x.labelWidth}):""));function D(){C.value=!C.value}function J(){I.value=!0,T.value=!1,B.value="",x.focusWhenClear&&($.value=!1),E((()=>{x.focusWhenClear&&($.value=!0,T.value=!0),S("change",{value:""}),S("update:modelValue",B.value),S("clear")}))}async function X(){await V(150),I.value?I.value=!1:(T.value=!1,S("blur",{value:B.value}))}function Y({detail:e}){T.value=!0,S("focus",e)}function Z({detail:e}){S("update:modelValue",B.value),S("input",e)}function ee({detail:e}){S("keyboardheightchange",e)}function le({detail:e}){S("confirm",e)}function ae(){S("clicksuffixicon")}function se(){S("clickprefixicon")}function oe(e){S("click",e)}return o((()=>{B.value=function(e){const{maxlength:l}=x;return j(l)&&-1!==l&&String(e).length>l?e.toString().slice(0,l):e}(B.value),S("update:modelValue",B.value)})),(e,l)=>{const a=g,s=v,o=_;return r(),t(a,{class:i(G.value),style:u(e.customStyle),onClick:oe},{default:n((()=>[e.label||e.useLabelSlot?(r(),t(a,{key:0,class:i(N.value),style:u(U.value)},{default:n((()=>[e.prefixIcon||e.usePrefixSlot?(r(),t(a,{key:0,class:"wd-input__prefix"},{default:n((()=>[e.prefixIcon&&!e.usePrefixSlot?(r(),t(b,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:se},null,8,["name"])):c(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})):d("",!0),p(a,{class:"wd-input__label-inner"},{default:n((()=>[e.label?(r(),f(y,{key:0},[m(h(e.label),1)],64)):c(e.$slots,"label",{key:1},void 0,!0)])),_:3})])),_:3},8,["class","style"])):d("",!0),p(a,{class:"wd-input__body"},{default:n((()=>[p(a,{class:"wd-input__value"},{default:n((()=>[!e.prefixIcon&&!e.usePrefixSlot||e.label?d("",!0):(r(),t(a,{key:0,class:"wd-input__prefix"},{default:n((()=>[e.prefixIcon?(r(),t(b,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:se},null,8,["name"])):d("",!0),c(e.$slots,"prefix",{},void 0,!0)])),_:3})),p(s,{class:i(["wd-input__inner",e.prefixIcon?"wd-input__inner--prefix":"",M.value?"wd-input__inner--count":"",e.alignRight?"is-align-right":"",e.customInputClass]),type:e.type,password:e.showPassword&&!C.value,modelValue:B.value,"onUpdate:modelValue":l[0]||(l[0]=e=>B.value=e),placeholder:H.value,disabled:e.disabled||e.readonly,maxlength:e.maxlength,focus:$.value,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,cursor:e.cursor,"cursor-spacing":e.cursorSpacing,"placeholder-style":e.placeholderStyle,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"always-embed":e.alwaysEmbed,"placeholder-class":Q.value,ignoreCompositionEvent:e.ignoreCompositionEvent,onInput:Z,onFocus:Y,onBlur:X,onConfirm:le,onKeyboardheightchange:ee},null,8,["class","type","password","modelValue","placeholder","disabled","maxlength","focus","confirm-type","confirm-hold","cursor","cursor-spacing","placeholder-style","selection-start","selection-end","adjust-position","hold-keyboard","always-embed","placeholder-class","ignoreCompositionEvent"]),e.readonly?(r(),t(a,{key:1,class:"wd-input__readonly-mask"})):d("",!0),K.value||e.showPassword||e.suffixIcon||M.value||e.$slots.suffix?(r(),t(a,{key:2,class:"wd-input__suffix"},{default:n((()=>[K.value?(r(),t(b,{key:0,"custom-class":"wd-input__clear",name:"error-fill",onClick:J})):d("",!0),e.showPassword?(r(),t(b,{key:1,"custom-class":"wd-input__icon",name:C.value?"view":"eye-close",onClick:D},null,8,["name"])):d("",!0),M.value?(r(),t(a,{key:2,class:"wd-input__count"},{default:n((()=>[p(o,{class:i([B.value&&String(B.value).length>0?"wd-input__count-current":"",String(B.value).length>e.maxlength?"is-error":""])},{default:n((()=>[m(h(String(B.value).length),1)])),_:1},8,["class"]),m(" /"+h(e.maxlength),1)])),_:1})):d("",!0),e.suffixIcon?(r(),t(b,{key:3,"custom-class":"wd-input__icon",name:e.suffixIcon,onClick:ae},null,8,["name"])):d("",!0),c(e.$slots,"suffix",{},void 0,!0)])),_:3})):d("",!0)])),_:3}),A.value?(r(),t(a,{key:0,class:"wd-input__error-message"},{default:n((()=>[m(h(A.value),1)])),_:1})):d("",!0)])),_:3})])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-cc100209"]]);export{q as F,z as _,B as f};
