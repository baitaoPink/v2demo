import{r as e,w as t,d as a,o as s,p as o,h as n,f as i,e as l,F as r,A as u,t as p,v as c,s as d,E as m,n as v,Y as k,Z as f,_,$ as b}from"./index-B2xpwpwA.js";import{_ as g}from"./qt-stock-item.B3abyoHJ.js";import{r as h}from"./uni-app.es.DSnRb9Bl.js";import{_ as w}from"./wd-gap.BTJcE1Vl.js";import{_ as y}from"./wd-popup.DoF1ewYn.js";import{_ as R}from"./wd-config-provider.vue_vue_type_script_setup_true_lang.Y-Vfny-m.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{b as x}from"./stock.u3bnR5-q.js";import{s as q}from"./websocket.DmqA3gwv.js";const I=j({__name:"qt-stock-rank-options",props:{theme:{type:String,default:"dark"},position:{type:String,default:"bottom"},visible:{type:Boolean,required:!0},options:{type:Array,required:!0},currentIndex:{type:Number,required:!0}},emits:["update:visible","update:currentIndex"],setup(k,{emit:f}){const _=k,b=f,j=e(_.visible);return t((()=>_.visible),(e=>{j.value=e})),t(j,(e=>{b("update:visible",e)})),(e,t)=>{const f=m,_=v,x=h(a("qt-icon-tick"),g),q=h(a("wd-gap"),w),I=h(a("wd-popup"),y),L=h(a("wd-config-provider"),R);return s(),o(L,{theme:k.theme},{default:n((()=>[i(I,{position:k.position,modelValue:j.value,"onUpdate:modelValue":t[0]||(t[0]=e=>j.value=e)},{default:n((()=>[(s(!0),l(r,null,u(k.options,((t,a)=>(s(),l(r,{key:t.label},[i(_,{class:"options-item",onClick:e=>function(e){b("update:currentIndex",e)}(a)},{default:n((()=>[i(_,{class:"text-white-14"},{default:n((()=>[p(c(t.label||t.name)+" ",1),k.currentIndex===a?(s(),o(f,{key:0},{default:n((()=>[p("("+c(e.$t("transfer.default"))+")",1)])),_:1})):d("",!0)])),_:2},1024),k.currentIndex===a?(s(),o(x,{key:0,class:"ml-auto"})):d("",!0)])),_:2},1032,["onClick"]),i(q,{"bg-color":"#262627",height:"1rpx"})],64)))),128))])),_:1},8,["position","modelValue"])])),_:1},8,["theme"])}}},[["__scopeId","data-v-88b6709b"]]);function L(){const a=e([]),s=e(!1),o=e(0),n=[{label:"热门榜",name:k("stock.hot.title"),value:0},{label:"涨幅榜",name:k("stock.rise.title"),value:1},{label:"跌幅榜",name:k("stock.fall.title"),value:2},{label:"换手榜",name:k("stock.turnover.title"),value:3},{label:"成交额",name:k("stock.turnoverValue.title"),value:4}],i=e(0),l=e(!0),r=e([]);async function u(e=!1){e&&await f({title:"Loading..."});const t=await _();var s;a.value=t.data,r.value=await x({Type:n[i.value].label,region:a.value[o.value].market_type}),s=r.value.map((e=>e.code)).join(","),q.sendMessage(s,(e=>{const t=JSON.parse(e.data);for(let a=0;a<r.value.length;a++)r.value[a].code===t.code&&(t.latest&&(r.value[a].latest=t.latest),t.changeRatio&&(r.value[a].changeRatio=t.changeRatio))})),l.value=!1,e&&b()}return t(i,(async()=>{await u(!0)})),t(o,(async()=>{await u(!0),s.value=!1})),{stockRankOptionsShow:s,stockRankOptions:a,stockRankOptionsCurrent:o,stockRankList:r,stockRankTabs:n,stockRankTabsTabCurrent:i,stockRankListLoading:l,refreshStockRankList:u}}export{I as _,L as u};
