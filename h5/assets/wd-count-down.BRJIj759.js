import{r as e,aB as s,c as a,at as t,aI as o,w as n,aA as l,o as r,p as i,h as u,T as c,i as m,e as d,t as p,v as h,F as f,L as v,Q as S,n as y}from"./index-B2xpwpwA.js";import{C as M,e as w,i as H,b as _,u as g,d as C,m as D}from"./props.3mmIwxF7.js";import{_ as F}from"./_plugin-vue_export-helper.BCo6x5W8.js";function x(o){let n,l;const{start:r,cancel:i}=function(a){const t=e(null),o=()=>{w(t.value)?cancelAnimationFrame(t.value):H(t.value)&&clearTimeout(t.value)};return s((()=>{o()})),{start:()=>{const e=e=>{a(e)};t.value=requestAnimationFrame(e)},cancel:o}}((function(){o.millisecond?l&&(p(d()),u.value>0&&r()):(()=>{if(l){const a=d();e=a,s=u.value,(Math.floor(e/1e3)!==Math.floor(s/1e3)||0===a)&&p(a),u.value>0&&r()}var e,s})()})),u=e(o.time),c=a((()=>{return{total:e=u.value,days:Math.floor(e/864e5),hours:Math.floor(e%864e5/36e5),minutes:Math.floor(e%36e5/6e4),seconds:Math.floor(e%6e4/1e3),milliseconds:Math.floor(e%1e3)};var e})),m=()=>{l=!1,i()},d=()=>Math.max(n-Date.now(),0),p=e=>{u.value=e,H(o.onChange)&&o.onChange(c.value),0===e&&(m(),H(o.onFinish)&&o.onFinish())};return t(m),{start:()=>{l||(n=Date.now()+u.value,l=!0,r())},pause:m,reset:(e=o.time)=>{m(),u.value=e},current:c}}const b=F(o({name:"wd-count-down",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{..._,time:g(Number),millisecond:C(!1),format:D("HH:mm:ss"),autoStart:C(!0)},emits:["change","finish"],setup(e,{expose:s,emit:t}){const o=e,w=t,{start:H,pause:_,reset:g,current:C}=x({time:o.time,millisecond:o.millisecond,onChange:e=>w("change",e),onFinish:()=>w("finish")}),D=a((()=>function(e,s){const{days:a}=s;let{hours:t,minutes:o,seconds:n,milliseconds:l}=s;if(e.includes("DD")?e=e.replace("DD",M(a)):t+=24*a,e.includes("HH")?e=e.replace("HH",M(t)):o+=60*t,e.includes("mm")?e=e.replace("mm",M(o)):n+=60*o,e.includes("ss")?e=e.replace("ss",M(n)):l+=1e3*n,e.includes("S")){const s=M(l,3);e=e.includes("SSS")?e.replace("SSS",s):e.includes("SS")?e.replace("SS",s.slice(0,2)):e.replace("S",s.charAt(0))}return e}(o.format,C.value))),F=()=>{g(o.time),o.autoStart&&H()};return n((()=>o.time),F,{immediate:!1}),l((()=>{F()})),s({start:H,pause:_,reset:F}),(e,s)=>{const a=y;return r(),i(a,{class:v(`wd-count-down ${e.customClass}`),style:S(e.customStyle)},{default:u((()=>[e.$slots.default?c(e.$slots,"default",{key:0,current:m(C)},void 0,!0):(r(),d(f,{key:1},[p(h(D.value),1)],64))])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-55b50695"]]);export{b as _};
