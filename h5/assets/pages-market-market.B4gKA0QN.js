import{o as t,p as e,h as o,t as s,v as a,i as l,O as r,P as i,L as d,Q as n,R as c,n as u,T as p,e as g,F as f,A as h,s as m,f as k,E as b,u as _,a as y,c as w,r as x,U as A,d as C,j as v,V as S,W as R,z as j,D as I,S as B,X as F,K as U,N as q}from"./index-B2xpwpwA.js";import{_ as L}from"./wd-icon.av9Pe6hJ.js";import{a as N,o as O,b as E,r as K}from"./uni-app.es.DSnRb9Bl.js";import{_ as Q}from"./wd-navbar.Cm5X2aH8.js";import{_ as V}from"./qt-stock-search-bar.CL6EF3yH.js";import{_ as W}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as D}from"./wd-gap.BTJcE1Vl.js";import{_ as G}from"./v-tabs.BGLC4bPo.js";import{Q as T}from"./qt-stock-item.B3abyoHJ.js";import{_ as Y}from"./wd-skeleton.s23_fdDR.js";import{_ as Z}from"./wd-config-provider.vue_vue_type_script_setup_true_lang.Y-Vfny-m.js";import{u as P,_ as X}from"./use-stock-rank-list.DXYwQwBj.js";import{s as H}from"./websocket.DmqA3gwv.js";import{a as M}from"./stock.u3bnR5-q.js";import"./props.3mmIwxF7.js";import"./wd-search.4Oc0qSW8.js";import"./useTranslate.CisUcI6B.js";import"./search.Dmwp9ldp.js";import"./tick.DzZJUBoq.js";import"./wd-popup.DoF1ewYn.js";const z=W({__name:"qt-stock-number",props:{data:{type:[String,Number],default:()=>""},changeRatio:{type:[String,Number],default:()=>""},isColor:{type:Boolean,default:()=>!1},isSymbol:{type:Boolean,default:()=>!1},isPercentage:{type:Boolean,default:()=>!1},isMargin:{type:Boolean,default:()=>!1}},setup:p=>(g,f)=>{const h=u;return t(),e(h,{class:d({"qt-number":p.isMargin}),style:n({color:p.isColor?l(c)(p.changeRatio<0?"down":"up"):""})},{default:o((()=>[s(a(p.isSymbol?l(r)(p.changeRatio):"")+a(l(i)(p.data,2))+a(p.isPercentage?"%":""),1)])),_:1},8,["class","style"])}},[["__scopeId","data-v-980e99ea"]]);const J=W({name:"UniSwiperDot",emits:["clickItem"],props:{info:{type:Array,default:()=>[]},current:{type:Number,default:0},dotsStyles:{type:Object,default:()=>({})},mode:{type:String,default:"default"},field:{type:String,default:""}},data:()=>({dots:{width:6,height:6,bottom:10,color:"#fff",backgroundColor:"rgba(0, 0, 0, .3)",border:"1px rgba(0, 0, 0, .3) solid",selectedBackgroundColor:"#333",selectedBorder:"1px rgba(0, 0, 0, .9) solid"}}),watch:{dotsStyles(t){this.dots=Object.assign(this.dots,this.dotsStyles)},mode(t){"indexes"===t?(this.dots.width=14,this.dots.height=14):(this.dots.width=6,this.dots.height=6)}},created(){"indexes"===this.mode&&(this.dots.width=12,this.dots.height=12),this.dots=Object.assign(this.dots,this.dotsStyles)},methods:{clickItem(t){this.$emit("clickItem",t)}}},[["render",function(l,r,i,c,_,y){const w=u,x=b;return t(),e(w,{class:"uni-swiper__warp"},{default:o((()=>[p(l.$slots,"default",{},void 0,!0),"default"===i.mode?(t(),e(w,{style:n({bottom:_.dots.bottom+"px"}),class:"uni-swiper__dots-box",key:"default"},{default:o((()=>[(t(!0),g(f,null,h(i.info,((o,s)=>(t(),e(w,{onClick:t=>y.clickItem(s),style:n({width:(s===i.current?2*_.dots.width:_.dots.width)+"px",height:_.dots.width/2+"px","background-color":s!==i.current?_.dots.backgroundColor:_.dots.selectedBackgroundColor,"border-radius":"0px"}),key:s,class:"uni-swiper__dots-item uni-swiper__dots-bar"},null,8,["onClick","style"])))),128))])),_:1},8,["style"])):m("",!0),"dot"===i.mode?(t(),e(w,{style:n({bottom:_.dots.bottom+"px"}),class:"uni-swiper__dots-box",key:"dot"},{default:o((()=>[(t(!0),g(f,null,h(i.info,((o,s)=>(t(),e(w,{onClick:t=>y.clickItem(s),style:n({width:_.dots.width+"px",height:_.dots.height+"px","background-color":s!==i.current?_.dots.backgroundColor:_.dots.selectedBackgroundColor,border:s!==i.current?_.dots.border:_.dots.selectedBorder}),key:s,class:"uni-swiper__dots-item"},null,8,["onClick","style"])))),128))])),_:1},8,["style"])):m("",!0),"round"===i.mode?(t(),e(w,{style:n({bottom:_.dots.bottom+"px"}),class:"uni-swiper__dots-box",key:"round"},{default:o((()=>[(t(!0),g(f,null,h(i.info,((o,s)=>(t(),e(w,{onClick:t=>y.clickItem(s),class:d([[s===i.current&&"uni-swiper__dots-long"],"uni-swiper__dots-item"]),style:n({width:(s===i.current?3*_.dots.width:_.dots.width)+"px",height:_.dots.height+"px","background-color":s!==i.current?_.dots.backgroundColor:_.dots.selectedBackgroundColor,border:s!==i.current?_.dots.border:_.dots.selectedBorder}),key:s},null,8,["onClick","class","style"])))),128))])),_:1},8,["style"])):m("",!0),"nav"===i.mode?(t(),e(w,{key:"nav",style:n({"background-color":i.dotsStyles.backgroundColor,bottom:"0"}),class:"uni-swiper__dots-box uni-swiper__dots-nav"},{default:o((()=>[k(x,{style:n({color:i.dotsStyles.color}),class:"uni-swiper__dots-nav-item"},{default:o((()=>[s(a(i.current+1+"/"+i.info.length+" "+i.info[i.current][i.field]),1)])),_:1},8,["style"])])),_:1},8,["style"])):m("",!0),"indexes"===i.mode?(t(),e(w,{key:"indexes",style:n({bottom:_.dots.bottom+"px"}),class:"uni-swiper__dots-box"},{default:o((()=>[(t(!0),g(f,null,h(i.info,((l,r)=>(t(),e(w,{onClick:t=>y.clickItem(r),style:n({width:_.dots.width+"px",height:_.dots.height+"px",color:r===i.current?_.dots.selectedColor:_.dots.color,"background-color":r!==i.current?_.dots.backgroundColor:_.dots.selectedBackgroundColor,border:r!==i.current?_.dots.border:_.dots.selectedBorder}),key:r,class:"uni-swiper__dots-item uni-swiper__dots-indexes"},{default:o((()=>[k(x,{class:"uni-swiper__dots-indexes-text"},{default:o((()=>[s(a(r+1),1)])),_:2},1024)])),_:2},1032,["onClick","style"])))),128))])),_:1},8,["style"])):m("",!0)])),_:3})}],["__scopeId","data-v-60e24dc5"]]),$=W({__name:"market",setup(r){const{t:i}=_(),n=y(),c=w((()=>n.systemConfig)),p=x(0),W=x([]),$=x(!0),tt=x([new Array(6)]);let et;const{stockRankOptions:ot,stockRankOptionsCurrent:st,stockRankOptionsShow:at,stockRankTabs:lt,stockRankTabsTabCurrent:rt,stockRankList:it,stockRankListLoading:dt,refreshStockRankList:nt}=P();async function ct(){const t=await M();et=t.map((t=>t.code)),tt.value=S(t,6),$.value=!1,function(){const t=encodeURIComponent(et);H.sendMessage(t,(t=>{const e=JSON.parse(t.data),o=Object.fromEntries(Object.entries(e).filter((([,t])=>null!==t)));tt.value=tt.value.map((t=>t.map((t=>t.code===e.code?{...t,...o}:t))))}))}()}return N((()=>{ct(),nt(),A({type:4}).then((t=>{W.value=t.data}))})),O((()=>{})),E((()=>{})),(r,n)=>{const _=I,y=u,w=K(C("wd-icon"),L),x=K(C("wd-navbar"),Q),A=K(C("qt-stock-search-bar"),V),S=b,N=q,O=B,E=K(C("qt-stock-number"),z),P=K(C("wd-gap"),D),H=K(C("v-tabs"),G),M=K(C("qt-stock-item"),T),et=K(C("wd-skeleton"),Y),nt=K(C("wd-config-provider"),Z),ct=K(C("qt-stock-rank-options"),X);return t(),g(f,null,[k(x,{safeAreaInsetTop:"",title:l(i)("page.market"),bordered:!1,"custom-style":"background-color: #121317;"},{left:o((()=>[c.value.logo?(t(),e(_,{key:0,src:c.value.logo,class:"logo"},null,8,["src"])):m("",!0)])),title:o((()=>[k(y,{class:"text-eee-17"},{default:o((()=>[s(a(l(i)("page.market")),1)])),_:1})])),right:o((()=>[k(w,{name:"setting1",size:"22px",onClick:l(R)},null,8,["onClick"])])),_:1},8,["title"]),k(y,{class:"block plr-32"},{default:o((()=>[k(y,{class:"flex items-center"},{default:o((()=>[k(A,{class:"flex-grow",onClick:l(j),disabled:!0,"show-right":!1},null,8,["onClick"]),k(y,{class:"around-row",onClick:n[0]||(n[0]=t=>at.value=!0)},{default:o((()=>[k(S,null,{default:o((()=>[s(a(l(ot)[l(st)]?l(ot)[l(st)].name:""),1)])),_:1}),k(_,{class:"logo",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAeRJREFUWEftlr9rFFEUhb+DEIyNWKQxkMrGFNpZCSJiLGIjgo2RFEq6kEqFNEawUVKFdAbBQtTGyghJoQaxURDi/2AVCNgYCMjJvDCKbnZyZ3Z2li32NVO8++N7990574o+W+ozHgZA0Y0MKjSoUFSBaF+2V4ErwJHIuAf7XxKQe5CodIq+BNoEzpQ+QrOGP1KFRoAN4HSzucLoW8CFfWG0PQp8BE6Fbs0YbGdFuSjp+1+ltj0GfALSt5frJ3BZ0teU9L+nw3aqULq+kz0i+gVMSPr8J9+Bt8z2eH59qbeaXDvAVUnv/03S9nG1fTZrsA/AiYaIdoFrkt61xi987W2fA9aB412G+g3ckPSmXdxDxw/b54E14FiXoBLMLUkvi+KF85DtS8Bb4GhNqPRE3ZH07LA4IVCuU5OZmqcSD9WAmpW0HPmXAsqhrmdq/rrDqeCupMUI5oAORQ62bwLPK0ItSHoYxS7UocjR9m3gaauoFvg9kXQ/ihnqUBTA9iywFNgtSZqLYpXWoSiQ7XvA4wK7FWBGUuXhr3RTt0ucDZsL2bDwoGXvBTAtKWlO5VULKP/7HgHzeU+9AqY6han8lxUd13Ya7oYlfatckhaH2hWqC9C1pu42SMc61BTIAKhsZfuuqfcA0Vh16nt7/gkAAAAASUVORK5CYII="})])),_:1})])),_:1}),W.value.length?(t(),e(O,{key:0,circular:"","indicator-dots":!0,autoplay:!0,class:"swiper h-269","indicator-active-color":"#fff",interval:2e3,duration:500},{default:o((()=>[(t(!0),g(f,null,h(W.value,(s=>(t(),e(N,{key:s.id},{default:o((()=>[k(_,{src:s.image,alt:"",style:{width:"100%",height:"100%","border-radius":"10rpx"}},null,8,["src"])])),_:2},1024)))),128))])),_:1})):m("",!0),k(y,{class:"hot-index-list"},{default:o((()=>[k(S,{class:"hot-index-list-left"},{default:o((()=>[s(a(r.$t("stock.popularIndex")),1)])),_:1})])),_:1}),k(J,{info:tt.value,current:p.value,field:"content","dots-styles":{backgroundColor:"#404249",selectedBackgroundColor:"#ffffff"}},{default:o((()=>[k(O,{class:"hot-index-wrapper","indicator-color":"#ffffff","next-margin":"-13rpx",onChange:n[1]||(n[1]=t=>p.value=t.detail.current)},{default:o((()=>[(t(!0),g(f,null,h(tt.value,((r,i)=>(t(),e(N,{key:i},{default:o((()=>[k(y,{class:"grid-container",style:{"margin-right":"13rpx"}},{default:o((()=>[(t(!0),g(f,null,h(r,((e,r)=>(t(),g("div",{class:d(["grid-item",{loading:$.value}]),key:r},[e?(t(),g(f,{key:0},[k(y,{class:"text-white-14 ellipsis-1"},{default:o((()=>[s(a(e.name),1)])),_:2},1024),k(E,{data:e.latest,changeRatio:e.changeRatio,"is-color":!0,class:"latest"},null,8,["data","changeRatio"]),k(y,{class:"around-center mt-20"},{default:o((()=>[k(y,{class:"text-22"},{default:o((()=>[k(E,{data:e.change,changeRatio:e.changeRatio,"is-color":!0},null,8,["data","changeRatio"])])),_:2},1024),k(y,{class:"text-22"},{default:o((()=>[k(E,{data:l(F)(e.changeRatio),changeRatio:e.changeRatio,"is-color":!0},null,8,["data","changeRatio"])])),_:2},1024)])),_:2},1024)],64)):m("",!0)],2)))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["info","current"])])),_:1}),k(P,{"bg-color":"#121317",height:"30rpx"}),k(P,{"bg-color":"#000",height:"16rpx"}),k(y,{class:"block"},{default:o((()=>[k(H,{modelValue:l(rt),"onUpdate:modelValue":n[2]||(n[2]=t=>v(rt)?rt.value=t:null),bgColor:"linear-gradient(to right, rgba(32,29,26, 0.1), rgba(32,29,26, 0.1))",color:"#808080",fontSize:"28rpx",activeColor:"#FFFFFF",lineColor:"#fff",lineHeight:"4rpx",lineScale:.3,height:"100rpx",field:"name",paddingItem:"0 20rpx",tabs:l(lt)},null,8,["modelValue","tabs"]),k(P,{"bg-color":"#262627",height:"1rpx"}),k(y,{class:"plr-32 flex text-gray-12 mt-20 mb-50"},{default:o((()=>[k(y,{class:"flex-grow"},{default:o((()=>[s(a(r.$t("stock.name")),1)])),_:1}),k(y,null,{default:o((()=>[s(a(r.$t("stock.latestPrice")),1)])),_:1}),k(y,{style:{width:"140rpx","margin-left":"50rpx","text-align":"right"}},{default:o((()=>[s(a(r.$t("stock.priceChange")),1)])),_:1})])),_:1}),k(nt,{theme:"dark"},{default:o((()=>[k(et,{loading:l(dt),"custom-style":{width:"100%",padding:"0 32rpx 32rpx"},"row-col":Array.from({length:5},(()=>({width:"100%",height:"70rpx"}))),animation:"gradient"},{default:o((()=>[(t(!0),g(f,null,h(l(it),((o,s)=>(t(),e(M,{class:d({"mb-50":s!==l(it).length-1}),key:o.code,data:o,onClick:t=>l(U)({code:o.code,name:o.name,region:o.region})},null,8,["class","data","onClick"])))),128))])),_:1},8,["loading","row-col"])])),_:1})])),_:1}),k(ct,{theme:"dark",position:"bottom",visible:l(at),"onUpdate:visible":n[3]||(n[3]=t=>v(at)?at.value=t:null),options:l(ot),currentIndex:l(st),"onUpdate:currentIndex":n[4]||(n[4]=t=>v(st)?st.value=t:null)},null,8,["visible","options","currentIndex"])],64)}}},[["__scopeId","data-v-0da98b04"]]);export{$ as default};
