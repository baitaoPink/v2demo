import{u as l,r as a,bb as e,d as t,p as u,h as o,n as s,o as d,f as n,t as i,v as p,s as c,i as r,ac as m,e as v,A as f,F as _,ae as w,bg as k,E as y,D as j,bh as h,bi as b}from"./index-B2xpwpwA.js";import{_ as g}from"./wd-popup.DoF1ewYn.js";import{a as C,r as V}from"./uni-app.es.DSnRb9Bl.js";import{_ as $}from"./qt-upload.CTXXccCG.js";import{_ as x}from"./arrow-right.CUcqDX27.js";import{_ as U}from"./upload-pictures.D6TFzxAS.js";import{_ as q}from"./tick.DzZJUBoq.js";import{a as I,b as A,p as T}from"./wallet.B0psIO5E.js";import{_ as D}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./wd-icon.av9Pe6hJ.js";import"./props.3mmIwxF7.js";import"./wd-loading.COtG1mNE.js";import"./base64.3RFQOR3W.js";const E=D({__name:"me-wallet-add",setup(D){const{t:E}=l(),F=a([]),H=a(!1),J=a("-1"),M=a(""),R=a(""),W=a(""),z=a(""),B=a(""),G=a(""),K=a(""),L=a(!1);function N(){M.value?z.value?B.value?R.value?L.value||(L.value=!0,setTimeout((()=>{L.value=!1}),2e3),T({id:G.value,payment_id:K.value,payment_as_name:z.value,address:B.value,collection_code:W.value}).then((l=>{w({title:l.msg,icon:"none"}),setTimeout((()=>{k()}),1e3)}))):w({title:E("wallet.upload-code"),icon:"none"}):w({title:E("wallet.address"),icon:"none"}):w({title:E("wallet.input-alias"),icon:"none"}):w({title:E("wallet.select-wallet"),icon:"none"})}C((l=>{l.id&&(e({title:E("wallet.edit-wallet")}),G.value=l.id,I("/"+l.id).then((l=>{M.value=l.data.payment.name,K.value=l.data.payment.id,G.value=l.data.id,B.value=l.data.address,R.value=l.data.collection_code,z.value=l.data.payment_as_name})))}));const O=a(null);function P(){O.value.uploading()}function Q(l){R.value=l.url,W.value=l.name}return A({}).then((l=>{F.value=l.data})),(l,a)=>{const e=y,w=s,k=j,C=h,I=b,A=V(t("wd-popup"),g),T=V(t("qt-upload"),$);return d(),u(w,null,{default:o((()=>[n(w,{class:"title"},{default:o((()=>[n(e,null,{default:o((()=>[i(p(l.$t("wallet.Wallet-currency")),1)])),_:1})])),_:1}),n(w,{class:"input",onClick:a[0]||(a[0]=l=>H.value=!0)},{default:o((()=>[""==M.value?(d(),u(e,{key:0},{default:o((()=>[i(p(l.$t("wallet.select-wallet")),1)])),_:1})):(d(),u(e,{key:1,style:{color:"#fff"}},{default:o((()=>[i(p(M.value),1)])),_:1})),n(k,{src:x,mode:""})])),_:1}),n(w,{class:"title"},{default:o((()=>[n(e,null,{default:o((()=>[i(p(l.$t("wallet.alias")),1)])),_:1})])),_:1}),n(w,{class:"input"},{default:o((()=>[n(C,{type:"text",modelValue:z.value,"onUpdate:modelValue":a[1]||(a[1]=l=>z.value=l),placeholder:l.$t("wallet.input-alias")},null,8,["modelValue","placeholder"])])),_:1}),n(w,{class:"title"},{default:o((()=>[n(e,null,{default:o((()=>[i(p(l.$t("wallet.address")),1)])),_:1})])),_:1}),n(w,{class:"input"},{default:o((()=>[n(C,{type:"text",modelValue:B.value,"onUpdate:modelValue":a[2]||(a[2]=l=>B.value=l),placeholder:l.$t("wallet.input-address")},null,8,["modelValue","placeholder"])])),_:1}),n(w,{class:"title"},{default:o((()=>[n(e,null,{default:o((()=>[i(p(l.$t("wallet.upload-code-tip")),1)])),_:1})])),_:1}),n(w,{class:"upload"},{default:o((()=>[R.value?c("",!0):(d(),u(w,{key:0,class:"upload-content",onClick:P},{default:o((()=>[n(k,{src:U,mode:""})])),_:1})),R.value?(d(),u(w,{key:1,class:"img"},{default:o((()=>[n(k,{src:R.value,mode:"",onClick:P},null,8,["src"])])),_:1})):c("",!0)])),_:1}),n(I,{onClick:a[3]||(a[3]=l=>r(m)(N)),class:"wd-button"},{default:o((()=>[i(p(l.$t("wallet.submit")),1)])),_:1}),n(A,{modelValue:H.value,"onUpdate:modelValue":a[4]||(a[4]=l=>H.value=l),position:"bottom","custom-style":" background-color: #181A1C;"},{default:o((()=>[(d(!0),v(_,null,f(F.value,((l,a)=>(d(),u(w,{class:"popup-content",key:a,onClick:l=>{return e=a,console.log(e),J.value=e,M.value=F.value[e].name,K.value=F.value[e].id,void(H.value=!1);var e}},{default:o((()=>[n(w,{class:"popup-title"},{default:o((()=>[n(k,{src:l.logo,mode:"",onClick:P},null,8,["src"]),n(e,null,{default:o((()=>[i(p(l.name),1)])),_:2},1024)])),_:2},1024),n(w,{class:"popup-runs"},{default:o((()=>[n(e,null,{default:o((()=>[i(p(l.chain_name),1)])),_:2},1024),a==J.value?(d(),u(k,{key:0,src:q,mode:"",onClick:P})):c("",!0),a!=J.value?(d(),u(k,{key:1,mode:"",onClick:P})):c("",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["modelValue"]),n(T,{ref_key:"uploadRef",ref:O,onUploadImg:Q},null,512)])),_:1})}}},[["__scopeId","data-v-7fe61f00"]]);export{E as default};
