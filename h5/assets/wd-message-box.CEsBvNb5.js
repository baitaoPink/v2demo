import{aM as e,r as a,aN as l,aI as t,c as o,w as s,o as u,p as n,h as r,f as i,L as c,t as v,v as p,s as d,e as m,i as _,F as f,T as w,n as y}from"./index-B2xpwpwA.js";import{_ as x}from"./wd-popup.DoF1ewYn.js";import{_ as b}from"./wd-button.C5ofvjh5.js";import{_ as g}from"./wd-input.DWD3v5sG.js";import{b as h,m as C,g as k,j as E,i as V}from"./props.3mmIwxF7.js";import{u as z}from"./useTranslate.CisUcI6B.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";const O={...h,selector:C("")},S=Symbol("None"),T={title:"",showCancelButton:!1,show:!1,closeOnClickModal:!0,msg:"",type:"alert",inputType:"text",inputValue:"",inputValidate:null,showErr:!1,zIndex:99,lazyRender:!0,inputError:""};function j(t=""){const o=t?"__MESSAGE_OPTION__"+t:"__MESSAGE_OPTION__",s=e(o,a(S));s.value===S&&(s.value=T,l(o,s));const u=e=>a=>{const l=k({type:e},"string"==typeof a?{title:a}:a);return"confirm"===l.type||"prompt"===l.type?l.showCancelButton=!0:l.showCancelButton=!1,n(l)},n=e=>new Promise(((a,l)=>{const t=k(T,"string"==typeof e?{title:e}:e);s.value=k(t,{show:!0,onConfirm:e=>{a(e)},onCancel:e=>{l(e)}})})),r=u("alert"),i=u("confirm"),c=u("prompt");return{show:n,alert:r,confirm:i,prompt:c,close:()=>{s.value!==S&&(s.value.show=!1)}}}const M=I(t({name:"wd-message-box",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:O,setup(l){const t=l,{translate:h}=z("message-box"),C=o((()=>`wd-message-box__container ${t.customClass}`)),k=o((()=>`wd-message-box__body ${G.value?"":"is-no-title"} ${"prompt"===F.value?"is-prompt":""}`)),I=(O=t.selector)?`__MESSAGE_OPTION__${O}`:"__MESSAGE_OPTION__";var O;const S=e(I,a(T)),j=a("");let M=null,B=null,N=null;const P=a(!1),G=a(""),$=a(!1),A=a(!0),R=a(""),U=a(""),F=a("alert"),H=a("text"),L=a(""),q=a(""),D=a();let J=null;const K=a(""),Q=a(!1),W=a(99),X=a(!0);function Y(e){if(("modal"!==e||A.value)&&("prompt"!==F.value||"confirm"!==e||function(){if(D.value&&!D.value.test(String(L.value)))return Q.value=!0,!1;if("function"==typeof J){if(!J(L.value))return Q.value=!0,!1}return Q.value=!1,!0}()))switch(e){case"confirm":N?N({resolve:a=>{a&&Z({action:e,value:L.value})}}):Z({action:e,value:L.value});break;case"cancel":ee({action:e});break;default:ee({action:"modal"})}}function Z(e){P.value=!1,E(M)&&M(e)}function ee(e){P.value=!1,E(B)&&B(e)}function ae({value:e}){""!==e?L.value=e:Q.value=!1}return s((()=>S.value),(e=>{var a;(a=e)&&(G.value=V(a.title)?a.title:"",$.value=!!V(a.showCancelButton)&&a.showCancelButton,P.value=a.show,A.value=a.closeOnClickModal,R.value=a.confirmButtonText,U.value=a.cancelButtonText,j.value=a.msg,F.value=a.type,H.value=a.inputType,L.value=a.inputValue,q.value=a.inputPlaceholder,D.value=a.inputPattern,J=a.inputValidate,M=a.onConfirm,B=a.onCancel,N=a.beforeConfirm,K.value=a.inputError,Q.value=a.showErr,W.value=a.zIndex,X.value=a.lazyRender)}),{deep:!0,immediate:!0}),s((()=>P.value),(e=>{!1===e&&(Q.value=!1)}),{deep:!0,immediate:!0}),(e,a)=>{const l=y;return u(),n(l,null,{default:r((()=>[i(x,{transition:"zoom-in",modelValue:P.value,"onUpdate:modelValue":a[3]||(a[3]=e=>P.value=e),"close-on-click-modal":A.value,"lazy-render":X.value,"custom-class":"wd-message-box",onClickModal:a[4]||(a[4]=e=>Y("modal")),"z-index":W.value,duration:200},{default:r((()=>[i(l,{class:c(C.value)},{default:r((()=>[i(l,{class:c(k.value)},{default:r((()=>[G.value?(u(),n(l,{key:0,class:"wd-message-box__title"},{default:r((()=>[v(p(G.value),1)])),_:1})):d("",!0),i(l,{class:"wd-message-box__content"},{default:r((()=>["prompt"===F.value?(u(),m(f,{key:0},[i(g,{modelValue:L.value,"onUpdate:modelValue":a[0]||(a[0]=e=>L.value=e),type:H.value,size:"large",placeholder:q.value||"请输入",onInput:ae},null,8,["modelValue","type","placeholder"]),Q.value?(u(),n(l,{key:0,class:"wd-message-box__input-error"},{default:r((()=>[v(p(K.value||_(h)("inputNoValidate")),1)])),_:1})):d("",!0)],64)):d("",!0),w(e.$slots,"default",{},(()=>[v(p(j.value),1)]),!0)])),_:3})])),_:3},8,["class"]),i(l,{class:c("wd-message-box__actions "+($.value?"wd-message-box__flex":"wd-message-box__block"))},{default:r((()=>[$.value?(u(),n(b,{key:0,type:"info",block:"","custom-style":"margin-right: 16px;",onClick:a[1]||(a[1]=e=>Y("cancel"))},{default:r((()=>[v(p(U.value||_(h)("cancel")),1)])),_:1})):d("",!0),i(b,{block:"",onClick:a[2]||(a[2]=e=>Y("confirm"))},{default:r((()=>[v(p(R.value||_(h)("confirm")),1)])),_:1})])),_:1},8,["class"])])),_:3},8,["class"])])),_:3},8,["modelValue","close-on-click-modal","lazy-render","z-index"])])),_:3})}}}),[["__scopeId","data-v-ee7d1fe9"]]);export{M as _,j as u};
