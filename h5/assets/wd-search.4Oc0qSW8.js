import{aI as e,r as a,w as l,aA as s,c,o as u,p as t,h as o,f as n,T as r,Q as d,t as h,v as i,i as v,s as f,L as p,E as m,n as _,bh as w}from"./index-B2xpwpwA.js";import{_ as x}from"./wd-icon.av9Pe6hJ.js";import{b,m as g,d as y,p as C,t as k,h as V}from"./props.3mmIwxF7.js";import{u as j}from"./useTranslate.CisUcI6B.js";import{_ as L}from"./_plugin-vue_export-helper.BCo6x5W8.js";const S=L(e({name:"wd-search",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...b,modelValue:g(""),useSuffixSlot:y(!1),placeholder:String,cancelTxt:String,light:y(!1),hideCancel:y(!1),disabled:y(!1),maxlength:C(-1),placeholderLeft:y(!1),focus:y(!1),focusWhenClear:y(!1)},emits:["update:modelValue","change","clear","search","focus","blur","cancel"],setup(e,{emit:b}){const g=e,y=b,{translate:C}=j("search"),L=a(!1),S=a(!1),$=a(""),I=a(!0),T=a(!1);l((()=>g.modelValue),(e=>{$.value=e,e&&(S.value=!0)}),{immediate:!0}),l((()=>g.focus),(e=>{if(e){if(g.disabled)return;E()}})),s((()=>{g.focus&&E()}));const W=c((()=>`wd-search  ${g.light?"is-light":""}  ${g.hideCancel?"is-without-cancel":""} ${g.customClass}`)),A=c((()=>{const e={display:""===$.value&&I.value?"flex":"none"};return V(e)}));function B(e){S.value=e,k((()=>{L.value=e}))}function E(){g.disabled||k().then((()=>k())).then((()=>k())).then((()=>{I.value=!1,B(!0)}))}function F(e){$.value=e.detail.value,y("update:modelValue",e.detail.value),y("change",{value:e.detail.value})}function G(){$.value="",T.value=!0,g.focusWhenClear&&(L.value=!1),k().then((()=>k())).then((()=>k())).then((()=>{g.focusWhenClear?(I.value=!1,B(!0)):(I.value=!0,B(!1)),y("change",{value:""}),y("update:modelValue",""),y("clear")}))}function H({detail:{value:e}}){y("search",{value:e})}function Q(){T.value?T.value=!1:(I.value=!1,y("focus",{value:$.value}))}function U(){T.value||(I.value=!$.value,S.value=!I.value,L.value=!1,y("blur",{value:$.value}))}function q(){y("cancel",{value:$.value})}return(e,a)=>{const l=m,s=_,c=w;return u(),t(s,{class:p(W.value),style:d(e.customStyle)},{default:o((()=>[n(s,{class:"wd-search__block"},{default:o((()=>[r(e.$slots,"prefix",{},void 0,!0),n(s,{class:"wd-search__field"},{default:o((()=>[e.placeholderLeft?f("",!0):(u(),t(s,{key:0,style:d(A.value),class:"wd-search__cover",onClick:E},{default:o((()=>[n(x,{name:"search","custom-class":"wd-search__search-icon"}),n(l,{class:"wd-search__placeholder-txt"},{default:o((()=>[h(i(e.placeholder||v(C)("search")),1)])),_:1})])),_:1},8,["style"])),S.value||$.value||e.placeholderLeft?(u(),t(x,{key:1,name:"search","custom-class":"wd-search__search-left-icon"})):f("",!0),S.value||$.value||e.placeholderLeft?(u(),t(c,{key:2,placeholder:e.placeholder||v(C)("search"),"placeholder-class":"wd-search__placeholder-txt","confirm-type":"search",modelValue:$.value,"onUpdate:modelValue":a[0]||(a[0]=e=>$.value=e),class:"wd-search__input",onFocus:Q,onInput:F,onBlur:U,onConfirm:H,disabled:e.disabled,maxlength:e.maxlength,focus:L.value},null,8,["placeholder","modelValue","disabled","maxlength","focus"])):f("",!0),$.value?(u(),t(x,{key:3,"custom-class":"wd-search__clear wd-search__clear-icon",name:"error-fill",onClick:G})):f("",!0)])),_:1})])),_:3}),e.hideCancel?f("",!0):r(e.$slots,"suffix",{key:0},(()=>[n(s,{class:"wd-search__cancel",onClick:q},{default:o((()=>[h(i(e.cancelTxt||v(C)("cancel")),1)])),_:1})]),!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-6e2b07d0"]]);export{S as _};
