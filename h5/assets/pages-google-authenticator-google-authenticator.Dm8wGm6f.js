import{aI as e,o as t,p as a,h as l,f as s,e as o,A as u,F as r,L as d,t as n,v as c,s as i,Q as p,n as m,i as y,E as f,r as _,c as v,w as g,T as k,u as w,d as x,aG as h,ae as b,ck as V,bg as I,D as S}from"./index-B2xpwpwA.js";import{_ as C}from"./wd-button.C5ofvjh5.js";import{a as T,r as $}from"./uni-app.es.DSnRb9Bl.js";import{_ as K}from"./wd-gap.BTJcE1Vl.js";import{b as j,m as A,d as M,r as z,p as G,f as L}from"./props.3mmIwxF7.js";import{_ as O}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as D}from"./wd-popup.DoF1ewYn.js";import{w as X}from"./wd-loading.COtG1mNE.js";import{_ as Y}from"./wd-icon.av9Pe6hJ.js";import"./base64.3RFQOR3W.js";const B=O(e({name:"wd-password-input",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...j,modelValue:A(""),mask:M(!0),info:A(""),errorInfo:A(""),gutter:z(0),length:G(6),focused:M(!0)},emits:["focus"],setup(e,{emit:_}){const v=_;function g(e){v("focus",e)}return(e,_)=>{const v=m,k=f;return t(),a(v,{class:d(`wd-password-input ${e.customClass}`),style:p(e.customStyle)},{default:l((()=>[s(v,{onTouchstart:g,class:"wd-password-input__security"},{default:l((()=>[(t(!0),o(r,null,u(e.length,((o,u)=>(t(),a(v,{key:u,class:d("wd-password-input__item "+(e.gutter?"":"is-border")),style:p({marginLeft:0!==u&&e.gutter?y(L)(e.gutter):0})},{default:l((()=>[e.focused&&u===e.modelValue.length?(t(),a(v,{key:0,class:"wd-password-input__cursor"})):(t(),a(v,{key:1,class:d("wd-password-input__value")},{default:l((()=>[s(v,{style:p({visibility:e.mask&&e.modelValue[u]?"visible":"hidden"}),class:"wd-password-input__mask"},null,8,["style"]),!e.mask&&e.modelValue[u]?(t(),a(k,{key:0},{default:l((()=>[n(c(e.modelValue[u]),1)])),_:2},1024)):i("",!0)])),_:2},1024))])),_:2},1032,["class","style"])))),128))])),_:1}),e.info||e.errorInfo?(t(),a(v,{key:0,class:d("wd-password-input__info "+(e.errorInfo?"is-error":""))},{default:l((()=>[n(c(e.errorInfo||e.info),1)])),_:1},8,["class"])):i("",!0)])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-5a290eac"]]);const F=O(e({name:"wd-key",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{type:A(""),text:z(""),wider:M(!1),large:M(!1),loading:M(!1)},emits:["press"],setup(e,{emit:u}){const p=e,y=u,f=function(){const e=_(""),t=_(0),a=_(0),l=_(0),s=_(0),o=_(0),u=_(0);return{touchStart:function(r){const d=r.touches[0];e.value="",t.value=0,a.value=0,l.value=0,s.value=0,o.value=d.clientX,u.value=d.clientY},touchMove:function(r){const d=r.touches[0];t.value=d.clientX-o.value,a.value=d.clientY-u.value,l.value=Math.abs(t.value),s.value=Math.abs(a.value),e.value=l.value>s.value?"horizontal":l.value<s.value?"vertical":""},direction:e,deltaX:t,deltaY:a,offsetX:l,offsetY:s,startX:o,startY:u}}(),g=_(!1),k=v((()=>`wd-key ${p.large?"wd-key--large":""} ${"delete"===p.type?"wd-key--delete":""} ${"close"===p.type?"wd-key--close":""}`));function w(e){f.touchStart(e),g.value=!0}function x(e){f.touchMove(e),f.direction.value&&(g.value=!1)}function h(){g.value&&(g.value=!1,y("press",p.text,p.type))}return(e,u)=>{const y=m;return t(),a(y,{class:d("wd-key-wrapper "+(e.wider?"wd-key-wrapper--wider":"")),onTouchstart:w,onTouchmove:x,onTouchend:h},{default:l((()=>[s(y,{class:d(k.value)},{default:l((()=>[p.loading?(t(),a(X,{key:0,"custom-class":"wd-key__loading-icon"})):i("",!0),"delete"===e.type?(t(),o(r,{key:1},[e.text?(t(),o(r,{key:0},[n(c(e.text),1)],64)):(t(),a(Y,{key:1,"custom-class":"wd-key__icon",name:"keyboard-delete",size:"22px"}))],64)):"extra"===e.type?(t(),o(r,{key:2},[e.text?(t(),o(r,{key:0},[n(c(e.text),1)],64)):(t(),a(Y,{key:1,"custom-class":"wd-key__icon",name:"keyboard-collapse",size:"22px"}))],64)):(t(),o(r,{key:3},[n(c(e.text),1)],64))])),_:1},8,["class"])])),_:1},8,["class"])}}}),[["__scopeId","data-v-7b0f5c3c"]]),U=O(e({name:"wd-number-keyboard",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...j,visible:M(!1),modelValue:A(""),title:String,mode:A("default"),zIndex:G(100),maxlength:G(1/0),showDeleteKey:M(!0),randomKeyOrder:M(!1),closeText:String,deleteText:String,closeButtonLoading:M(!1),modal:M(!1),hideOnClickOutside:M(!0),lockScroll:M(!0),safeAreaInsetBottom:M(!0),extraKey:[String,Array]},emits:["update:visible","input","close","delete","update:modelValue"],setup(e,{emit:y}){const w=e,x=y,h=_(w.visible);g((()=>w.visible),(e=>{h.value=e}));const b=v((()=>"custom"===w.mode?function(){const e=S(),t=Array.isArray(w.extraKey)?w.extraKey:[w.extraKey];1===t.length?e.push({text:0,wider:!0},{text:t[0],type:"extra"}):2===t.length&&e.push({text:t[0],type:"extra"},{text:0},{text:t[1],type:"extra"});return e}():[...S(),{text:w.extraKey,type:"extra"},{text:0},{text:w.showDeleteKey?w.deleteText:"",type:w.showDeleteKey?"delete":""}])),V=v((()=>w.closeText&&"default"===w.mode)),I=v((()=>w.title||V.value));function S(){const e=Array.from({length:9},((e,t)=>({text:t+1})));return w.randomKeyOrder?function(e){const t=[...e];for(let a=t.length-1;a>0;a--){const e=Math.floor(Math.random()*(a+1));[t[a],t[e]]=[t[e],t[a]]}return t}(e):e}const C=()=>{x("close"),x("update:visible",!1)},T=(e,t)=>{if(""===e&&"extra"===t)return C();const a=w.modelValue;"delete"===t?(x("delete"),x("update:modelValue",a.slice(0,a.length-1))):"close"===t?C():a.length<+w.maxlength&&(x("input",e),x("update:modelValue",a+e))};return(e,y)=>{const _=f,v=m;return t(),a(D,{modelValue:h.value,"onUpdate:modelValue":y[0]||(y[0]=e=>h.value=e),position:"bottom","z-index":e.zIndex,"safe-area-inset-bottom":e.safeAreaInsetBottom,"modal-style":e.modal?"":"opacity: 0;",modal:e.hideOnClickOutside,lockScroll:e.lockScroll,onClickModal:C},{default:l((()=>[s(v,{class:d(`wd-number-keyboard ${e.customClass}`),style:p(e.customStyle)},{default:l((()=>[I.value?(t(),a(v,{key:0,class:"wd-number-keyboard__header"},{default:l((()=>[k(e.$slots,"title",{},(()=>[s(_,{class:"wd-number-keyboard__title"},{default:l((()=>[n(c(e.title),1)])),_:1})]),!0),V.value?(t(),a(v,{key:0,class:"wd-number-keyboard__close","hover-class":"wd-number-keyboard__close--hover",onClick:C},{default:l((()=>[s(_,null,{default:l((()=>[n(c(e.closeText),1)])),_:1})])),_:1})):i("",!0)])),_:3})):i("",!0),s(v,{class:"wd-number-keyboard__body"},{default:l((()=>[s(v,{class:"wd-number-keyboard__keys"},{default:l((()=>[(t(!0),o(r,null,u(b.value,(e=>(t(),a(F,{key:e.text,text:e.text,type:e.type,wider:e.wider,onPress:T},null,8,["text","type","wider"])))),128))])),_:1}),"custom"===e.mode?(t(),a(v,{key:0,class:"wd-number-keyboard__sidebar"},{default:l((()=>[e.showDeleteKey?(t(),a(F,{key:0,large:"",text:e.deleteText,type:"delete",onPress:T},null,8,["text"])):i("",!0),s(F,{large:"",text:e.closeText,type:"close",loading:e.closeButtonLoading,onPress:T},null,8,["text","loading"])])),_:1})):i("",!0)])),_:1})])),_:3},8,["class","style"])])),_:3},8,["modelValue","z-index","safe-area-inset-bottom","modal-style","modal","lockScroll"])}}}),[["__scopeId","data-v-f3fbb57b"]]),H=O({__name:"google-authenticator",setup(e){const{t:u}=w(),d=_(!1),p=_(!0),y=_(!1),f=_(!0),v=_(""),g=_(""),k=_("");function j(){V({open_status:1,step:2,google_secret:k.value,google_secret_code:v.value}).then((e=>{b({title:e.msg}),setTimeout((()=>{I()}),1e3)}))}return T((e=>{k.value=e.secret,g.value=e.password})),(e,_)=>{const g=S,w=m,V=$(x("wd-button"),C),I=$(x("wd-gap"),K),T=$(x("wd-password-input"),B),A=$(x("wd-number-keyboard"),U);return t(),a(w,{class:"google-main"},{default:l((()=>[d.value?(t(),o(r,{key:0},[s(g,{src:"/assets/google-_u-FhgLS.png"}),s(w,null,{default:l((()=>[n(c(e.$t("install-google-authenticator")),1)])),_:1}),s(w,{class:"google-text"},{default:l((()=>[n("(Google Authenticator)")])),_:1}),s(V,{onClick:_[0]||(_[0]=e=>{d.value=!1,p.value=!0})},{default:l((()=>[n(c(e.$t("continue")),1)])),_:1})],64)):i("",!0),p.value?(t(),o(r,{key:1},[s(g,{src:"/assets/google-_u-FhgLS.png"}),s(w,null,{default:l((()=>[n(c(e.$("copy-key")),1)])),_:1}),s(w,{class:"google-text"},{default:l((()=>[n("(Google Authenticator)")])),_:1}),s(w,{class:"google-key"},{default:l((()=>[s(w,{class:"google-key-left"},{default:l((()=>[n(c(k.value),1)])),_:1}),s(w,{class:"google-key-right",onClick:_[1]||(_[1]=e=>{return t=k.value,void h({data:t,success:()=>{b({title:u("common.copySuccess")})}});var t})},{default:l((()=>[n(c(e.$t("copy-key-success")),1)])),_:1})])),_:1}),s(V,{onClick:_[2]||(_[2]=e=>{p.value=!1,y.value=!0})},{default:l((()=>[n(c(e.$t("common.nextStep")),1)])),_:1})],64)):i("",!0),y.value?(t(),o(r,{key:2},[s(I,{"bg-color":"#121317",height:"70rpx"}),s(T,{modelValue:v.value,"onUpdate:modelValue":_[3]||(_[3]=e=>v.value=e),mask:!1,focused:f.value,onFocus:_[4]||(_[4]=e=>f.value=!0)},null,8,["modelValue","focused"]),s(I,{"bg-color":"#121317",height:"380rpx"}),s(V,{onClick:j},{default:l((()=>[n(c(e.$t("recharge.submit")),1)])),_:1}),s(A,{modelValue:v.value,"onUpdate:modelValue":_[5]||(_[5]=e=>v.value=e),visible:f.value,"onUpdate:visible":_[6]||(_[6]=e=>f.value=e),maxlength:6,modal:!0,"hide-on-click-outside":!1},null,8,["modelValue","visible"])],64)):i("",!0)])),_:1})}}},[["__scopeId","data-v-8fc7c676"]]);export{H as default};
