import{_ as be}from"./modal-form.vue_vue_type_script_setup_true_lang-tU3-hIUf.js";import{_ as he}from"./search-header-BEaDoZth.js";import{_ as ke}from"./table-header-button-group.vue_vue_type_script_setup_true_lang-C-DfQuFh.js";import{d as Ne,O as Se,r as u,U as Me,V as Fe,o as Ie,b as Ce,f as l,w as d,W as De,h as y,g as i,$ as s,a8 as p,B as _,N as xe,Z as Ue}from"./index-ClXc60Q8.js";import{n as Z,o as we,p as Le}from"./user-manage-NDgjaMcm.js";import{u as Ve,N as J}from"./custom-table-DLqvKnHZ.js";import{_ as $e,u as Ae}from"./custom-upload-D71Q5maP.js";import{_ as Be}from"./Flex-CESa1CD9.js";import{_ as Ee}from"./DataTable-C2iu46cC.js";import"./multi-language-form.vue_vue_type_script_setup_true_lang-Ddf5h8QK.js";import"./Grid-xFIQOVry.js";import"./get-slot-Bk_rJcZu.js";import"./FormItem-DwRTykPn.js";import"./Spin-B3LvPL2m.js";import"./DatePicker-uVn2PEEJ.js";import"./TimePicker-Kfakx9-p.js";import"./Forward-BysZYGA1.js";import"./RadioGroup-C9SrcqWM.js";import"./Space-BoszUUx1.js";function U(b){return typeof b=="function"||Object.prototype.toString.call(b)==="[object Object]"&&!Ue(b)}const la=Ne({name:"fund-management_withdrawal-list",__name:"index",setup(b){const{pagination:r,renderCell:X}=Ve(),{handleUpload:A}=Ae(),v=Se(),f=u(!1),B=u([]),E=u({user_type:"1"}),ee=u([{type:"Input",valueName:"search_key_user",label:"账号/姓名",placeholder:"请输入账号/姓名"},{type:"Select",valueName:"user_type",label:"用户类型",defaultOption:[{value:"1",label:"正式用户"},{value:"2",label:"试玩用户"}]},{type:"Input",valueName:"order_no",label:"订单号",placeholder:"请输入订单号"},{type:"Select",valueName:"audit_status",label:"状态",defaultOption:[{value:"pending",label:"待审核"},{value:"approved",label:"审核通过"},{value:"rejected",label:"审核不通过"}]},{type:"Datetime",valueName:"create_time",label:"创建时间",datetimeType:"daterange"},{type:"Datetime",valueName:"audit_time",label:"审核时间",datetimeType:"daterange"}]),h=u(0),k=u({}),R=u([]),j=u([]),O=u([]),T=u([]),w=u(!1),z=u(!0),N=u(!1),S=u(!1),P=u(!1),M=u(!1),F=u(!1),q=u(!0),I=u(!1),L=u(!1),ae=u([{type:"Select",valueName:"uid",label:"用户"},{type:"Input",valueName:"name",label:"姓名"},{type:"Input",valueName:"remark",label:"备注"}]),G=u([]),V=u([{type:"Input",valueName:"name",label:"账号/姓名",disabled:!0},{type:"Radio",valueName:"auth_status",label:"审核状态",disabled:!0,radioGroupOption:[{value:"approved",label:"审核通过"}]},{type:"Input",valueName:"amount",label:"提现金额/数量",disabled:!0},{type:"Input",valueName:"fee",label:"手续费",disabled:!0},{type:"Input",valueName:"received_amount",label:"实际提现金额/数量"}]),H={received_amount:[{type:"any",required:!0,message:"请输入实际提现金额/数量",trigger:["blur"]}]},$=u([{type:"Input",valueName:"name",label:"账号/姓名",disabled:!0},{type:"Radio",valueName:"auth_status",label:"审核状态",disabled:!0,radioGroupOption:[{value:"rejected",label:"审核不通过"}]},{type:"Input",valueName:"amount",label:"提现金额/数量",disabled:!0},{type:"Input",valueName:"fee",label:"手续费",disabled:!0},{type:"Input",valueName:"received_amount",label:"实际提现金额/数量",disabled:!0},{type:"Input",valueName:"auth_status_rejected_remarks",label:"备注"}]),te={auth_status_rejected_remarks:[{type:"any",required:!0,message:"请输入备注",trigger:["blur"]}]},K=u([{type:"Input",valueName:"name",label:"账号/姓名",disabled:!0},{type:"Radio",valueName:"auth_status",label:"审核状态",disabled:!0,radioGroupOption:[{value:"approved",label:"审核通过"},{value:"rejected",label:"审核不通过"}]},{type:"Input",valueName:"amount",label:"提现金额/数量",disabled:!0},{type:"Input",valueName:"fee",label:"手续费",disabled:!0},{type:"Input",valueName:"received_amount",label:"实际提现金额/数量",disabled:!0},{type:"Input",valueName:"purse_address",label:"提现地址",disabled:!0},{type:"Input",valueName:"auth_status_rejected_remarks",label:"备注",disabled:!0}]);async function m(){f.value=!0;const{data:a}=await Z({page:r.page,limit:r.pageSize,...E.value});B.value=a.list,r.itemCount=a.count,f.value=!1}function le(a){r.page=a,m()}function ne(a){r.page=1,r.pageSize=a,m()}async function ue(a){V.value.forEach(e=>{e.defaultValue=null}),h.value=a.id,V.value.forEach(e=>{e.valueName==="name"?e.defaultValue=a.user.account||a.user.email||a.user.phone:e.valueName==="auth_status"?e.defaultValue="approved":e.defaultValue=a[e.valueName]}),S.value=!0}function oe(a,e){h.value=a,$.value.forEach(n=>{n.defaultValue=null}),$.value.forEach(n=>{n.valueName==="name"?n.defaultValue=e.user.account||e.user.email||e.user.phone:n.valueName==="auth_status"?n.defaultValue="rejected":n.defaultValue=e[n.valueName]}),F.value=!0}function se(a){K.value.forEach(e=>{e.valueName==="name"?e.defaultValue=a.user.account||a.user.email||a.user.phone:e.valueName==="auth_status"?e.defaultValue=a.auth_status:e.defaultValue=a[e.valueName]}),L.value=!0}async function Q(a){a.id=h.value,I.value=!0,M.value=!0;const{response:e}=await we({...a});e.data.status===200&&(m(),v.success(s("common.modifySuccess"))),S.value=!1,F.value=!1,I.value=!1,M.value=!1}const ie=[{title:"ID",key:"id",align:"center"},{title:"账号/姓名",key:"user",align:"center",render:a=>l("div",null,[l("p",null,[a.user.account]),l("p",null,[a.user.real_name])])},{title:"正式用户",key:"user_type",align:"center",render:a=>l(p,{type:a.user.user_type===1?"success":"error"},{default:()=>[a.user.user_type===1?"是":"否"]})},{title:"提现方式",key:"transaction_type",align:"center",render:a=>ge(a.transaction_type)},{title:"提现单号",key:"order_no",align:"center"},{title:"币种类型",key:"money_type",align:"center",render:a=>l("span",null,[a.chain_name!==null?`${a.money_type}(${a.chain_name})`:a.money_type])},{title:"提现地址",key:"purse_address",align:"center"},{title:"提现金额/数量",key:"amount",align:"center"},{title:"手续费",key:"fee",align:"center"},{title:"到账金额/数量",key:"received_amount",align:"center"},{title:"状态",key:"auth_status",align:"center",render:a=>ve(a.auth_status)},{title:"提交时间",key:"create_time",align:"center"},{title:"审核时间",key:"audit_time",align:"center"},{title:"操作",key:"action",align:"center",width:200,fixed:"right",render:a=>{let e,n;return l(Be,{justify:"center"},{default:()=>[Number(a.is_lock)===0&&a.auth_status==="pending"?l(J,{"onPositive-click":Y.bind(null,a.id,!1)},{default:()=>[s("common.confirmLock")],trigger:()=>{let o;return l(_,{type:"warning",size:"small"},U(o=s("common.locking"))?o:{default:()=>[o]})}}):"",Number(a.is_lock)===1&&a.is_lock_can_deal===1&&a.auth_status==="pending"?l(J,{"onPositive-click":Y.bind(null,a.id,!0)},{default:()=>[s("common.confirmUnlock")],trigger:()=>{let o;return l(_,{type:"warning",size:"small"},U(o=s("common.unlock"))?o:{default:()=>[o]})}}):"",l("div",null,[a.auth_status==="pending"&&a.is_lock_can_deal===1?l(_,{type:"success",size:"small",onClick:ue.bind(null,a)},U(e=s("common.approved"))?e:{default:()=>[e]}):""]),l("div",null,[a.auth_status==="pending"&&a.is_lock_can_deal===1?l(_,{type:"error",size:"small",onClick:oe.bind(null,a.id,a)},U(n=s("common.rejected"))?n:{default:()=>[n]}):""]),l("div",null,[a.auth_status!=="pending"?l(_,{size:"small",onClick:se.bind(null,a)},{default:()=>[i("查看详情")]}):""])]})}}],g=u([]),de=u([]);function C(a){const e=new Date(a);let n=e.getMonth()+1;n=n<10?`0${n}`:n;let o=e.getDate();return o=o<10?`0${o}`:o,`${e.getFullYear().toString()}/${n}/${o}`}function re(a){if(a.create_time){const e=C(a.create_time[0]),n=C(a.create_time[1]);a.create_time=`${e}-${n}`}if(a.audit_time){const e=C(a.audit_time[0]),n=C(a.audit_time[1]);a.audit_time=`${e}-${n}`}E.value=a,r.page=1,m()}function me(a,e){g.value=a,de.value=e}async function ce(a){N.value=!0;const{response:e}=await Z({...a});e.data.status===200&&(m(),v.success(s("common.addSuccess"))),w.value=!1,N.value=!1}async function pe({file:a,onFinish:e,onError:n,onProgress:o}){const c=await A({file:a,onFinish:e,onError:n,onProgress:o});c&&(k.value.front_id_img=c)}async function fe({file:a,onFinish:e,onError:n,onProgress:o}){const c=await A({file:a,onFinish:e,onError:n,onProgress:o});c&&(k.value.back_id_img=c)}function W(a){h.value,Reflect.deleteProperty(k.value,a)}function ve(a){switch(a){case"pending":return l(p,{type:"info"},{default:()=>[i("待审核")]});case"approved":return l(p,{type:"success"},{default:()=>[i("审核通过")]});case"rejected":return l(p,{type:"error"},{default:()=>[i("审核不通过")]});default:return""}}function ge(a){switch(a){case"digital_currency":return l(p,{type:"info"},{default:()=>[i("数字货币")]});case"purse":return l(p,{type:"info"},{default:()=>[i("钱包")]});case"legal_currency":return l(p,{type:"info"},{default:()=>[i("法币")]});default:return""}}async function Y(a,e){f.value=!0;const{response:n}=await Le(a,e);n.data.status===200&&(m(),e?v.success(s("common.unlockSuccess")):v.success(s("common.lockSuccess")),v.success(s("common.lockSuccess")))}return m(),G.value=Me(ae.value),(a,e)=>{const n=ke,o=he,c=Ee,ye=xe,D=$e,x=be,_e=Fe("resize");return Ie(),Ce("div",null,[l(ye,{title:"提现列表"},{"header-extra":d(()=>[l(n,{"refresh-button-loading":f.value,"onUpdate:refreshButtonLoading":e[0]||(e[0]=t=>f.value=t),"export-selected-disabled":g.value.length,"onUpdate:exportSelectedDisabled":e[1]||(e[1]=t=>g.value.length=t),"batch-delete-disabled":g.value.length,"onUpdate:batchDeleteDisabled":e[2]||(e[2]=t=>g.value.length=t),"is-export-all":!1,"is-export-filter":!1,"is-export-selected":!1,"is-batch-delete":!1,"is-add":!1,onRefresh:m},null,8,["refresh-button-loading","export-selected-disabled","batch-delete-disabled"])]),default:d(()=>[l(o,{"search-config":ee.value,onOnSearch:re},null,8,["search-config"]),De(l(c,{remote:"",columns:ie,data:B.value,pagination:y(r),loading:f.value,bordered:!1,style:{height:"560px"},"flex-height":"","scroll-x":2200,"row-key":t=>t.id,"render-cell":y(X),"onUpdate:checkedRowKeys":me,"onUpdate:page":le,"onUpdate:pageSize":ne},null,8,["data","pagination","loading","row-key","render-cell"]),[[_e]])]),_:1}),l(x,{"show-form-modal":w.value,"onUpdate:showFormModal":e[7]||(e[7]=t=>w.value=t),"is-async-shut-down":z.value,"onUpdate:isAsyncShutDown":e[8]||(e[8]=t=>z.value=t),"is-show-modal-loading":N.value,"onUpdate:isShowModalLoading":e[9]||(e[9]=t=>N.value=t),"modal-title":y(s)("common.add"),"modal-form-config":G.value,"form-rules":H,onOnSubmit:ce},{front_id_img:d(()=>[l(D,{"file-list":R.value,"onUpdate:fileList":e[3]||(e[3]=t=>R.value=t),"list-type":"image-card",max:1,"custom-request":pe,onRemove:e[4]||(e[4]=t=>W("front_id_img"))},{default:d(()=>e[19]||(e[19]=[i(" 点击上传 ")])),_:1},8,["file-list"])]),back_id_img:d(()=>[l(D,{"file-list":j.value,"onUpdate:fileList":e[5]||(e[5]=t=>j.value=t),"list-type":"image-card",max:1,"custom-request":fe,onRemove:e[6]||(e[6]=t=>W("back_id_img"))},{default:d(()=>e[20]||(e[20]=[i(" 点击上传 ")])),_:1},8,["file-list"])]),_:1},8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"]),l(x,{"show-form-modal":S.value,"onUpdate:showFormModal":e[12]||(e[12]=t=>S.value=t),"is-async-shut-down":P.value,"onUpdate:isAsyncShutDown":e[13]||(e[13]=t=>P.value=t),"is-show-modal-loading":M.value,"onUpdate:isShowModalLoading":e[14]||(e[14]=t=>M.value=t),"modal-title":y(s)("common.examine"),"modal-form-config":V.value,"form-rules":H,onOnSubmit:Q},{front_id_img:d(()=>[l(D,{"default-file-list":O.value,"onUpdate:defaultFileList":e[10]||(e[10]=t=>O.value=t),"list-type":"image-card",max:1,disabled:""},{default:d(()=>e[21]||(e[21]=[i(" 点击上传 ")])),_:1},8,["default-file-list"])]),back_id_img:d(()=>[l(D,{"default-file-list":T.value,"onUpdate:defaultFileList":e[11]||(e[11]=t=>T.value=t),"list-type":"image-card",max:1,disabled:""},{default:d(()=>e[22]||(e[22]=[i(" 点击上传 ")])),_:1},8,["default-file-list"])]),_:1},8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"]),l(x,{"show-form-modal":F.value,"onUpdate:showFormModal":e[15]||(e[15]=t=>F.value=t),"is-async-shut-down":q.value,"onUpdate:isAsyncShutDown":e[16]||(e[16]=t=>q.value=t),"is-show-modal-loading":I.value,"onUpdate:isShowModalLoading":e[17]||(e[17]=t=>I.value=t),"modal-title":y(s)("common.examine"),"modal-form-config":$.value,"form-rules":te,onOnSubmit:Q},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"]),l(x,{"show-form-modal":L.value,"onUpdate:showFormModal":e[18]||(e[18]=t=>L.value=t),"modal-title":"查看详情","modal-form-config":K.value},null,8,["show-form-modal","modal-form-config"])])}}});export{la as default};
