import{_ as Oe}from"./modal-form.vue_vue_type_script_setup_true_lang-Dy9QZ-_Q.js";import{_ as ze}from"./search-header-Bd_P8bYc.js";import{_ as Fe}from"./table-header-button-group.vue_vue_type_script_setup_true_lang-Dgu6301U.js";import{d as J,Q as z,r as E,R as he,i as Be,S as Ue,O as Te,U as ce,V as De,o as ke,b as Qe,f as R,w as O,W as ae,h as K,e as $,g as W,$ as T,t as X,X as He,B as Z,Y as fe,N as qe,Z as Ge}from"./index-BBCpP0n1.js";import{s as Ve,b as xe,c as Ye,d as $e,e as Ke,f as We,h as Xe}from"./administrator-bAuVL7zy.js";import{g as Ze}from"./system-manage-DUsqzjl5.js";import{u as Je,N as je}from"./custom-table-CJkQvjHs.js";import{_ as et,u as tt}from"./custom-upload-DNH0sEWs.js";import{_ as at}from"./DataTable-fKfSlOiD.js";import{_ as rt}from"./Flex-Bs4QGOKB.js";import"./multi-language-form.vue_vue_type_script_setup_true_lang-jF9EEona.js";import"./Grid-DHXffSDg.js";import"./get-slot-Bk_rJcZu.js";import"./FormItem-BK_iw_zi.js";import"./Spin-B2L8Uchv.js";import"./DatePicker-CCmjyMFz.js";import"./TimePicker-DO5RqnqW.js";import"./Forward-C99TIi_5.js";import"./RadioGroup-bApoAqR8.js";import"./Space-ClliFbbY.js";/*!
 * qrcode.vue v3.6.0
 * A Vue.js component to generate QRCode. Both support Vue 2 and Vue 3
 * © 2017-PRESENT @scopewu(https://github.com/scopewu)
 * MIT License.
 */var U=function(){return U=Object.assign||function(c){for(var v,u=1,f=arguments.length;u<f;u++){v=arguments[u];for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(c[m]=v[m])}return c},U.apply(this,arguments)};var H;(function(n){var c=function(){function r(e,t,a,o){if(this.version=e,this.errorCorrectionLevel=t,this.modules=[],this.isFunction=[],e<r.MIN_VERSION||e>r.MAX_VERSION)throw new RangeError("Version value out of range");if(o<-1||o>7)throw new RangeError("Mask value out of range");this.size=e*4+17;for(var i=[],s=0;s<this.size;s++)i.push(!1);for(var s=0;s<this.size;s++)this.modules.push(i.slice()),this.isFunction.push(i.slice());this.drawFunctionPatterns();var h=this.addEccAndInterleave(a);if(this.drawCodewords(h),o==-1)for(var C=1e9,s=0;s<8;s++){this.applyMask(s),this.drawFormatBits(s);var M=this.getPenaltyScore();M<C&&(o=s,C=M),this.applyMask(s)}f(0<=o&&o<=7),this.mask=o,this.applyMask(o),this.drawFormatBits(o),this.isFunction=[]}return r.encodeText=function(e,t){var a=n.QrSegment.makeSegments(e);return r.encodeSegments(a,t)},r.encodeBinary=function(e,t){var a=n.QrSegment.makeBytes(e);return r.encodeSegments([a],t)},r.encodeSegments=function(e,t,a,o,i,s){if(a===void 0&&(a=1),o===void 0&&(o=40),i===void 0&&(i=-1),s===void 0&&(s=!0),!(r.MIN_VERSION<=a&&a<=o&&o<=r.MAX_VERSION)||i<-1||i>7)throw new RangeError("Invalid value");var h,C;for(h=a;;h++){var M=r.getNumDataCodewords(h,t)*8,_=m.getTotalBits(e,h);if(_<=M){C=_;break}if(h>=o)throw new RangeError("Data too long")}for(var S=0,N=[r.Ecc.MEDIUM,r.Ecc.QUARTILE,r.Ecc.HIGH];S<N.length;S++){var p=N[S];s&&C<=r.getNumDataCodewords(h,p)*8&&(t=p)}for(var g=[],y=0,P=e;y<P.length;y++){var b=P[y];v(b.mode.modeBits,4,g),v(b.numChars,b.mode.numCharCountBits(h),g);for(var F=0,I=b.getData();F<I.length;F++){var q=I[F];g.push(q)}}f(g.length==C);var B=r.getNumDataCodewords(h,t)*8;f(g.length<=B),v(0,Math.min(4,B-g.length),g),v(0,(8-g.length%8)%8,g),f(g.length%8==0);for(var L=236;g.length<B;L^=253)v(L,8,g);for(var D=[];D.length*8<g.length;)D.push(0);return g.forEach(function(x,G){return D[G>>>3]|=x<<7-(G&7)}),new r(h,t,D,i)},r.prototype.getModule=function(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]},r.prototype.getModules=function(){return this.modules},r.prototype.drawFunctionPatterns=function(){for(var e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var t=this.getAlignmentPatternPositions(),a=t.length,e=0;e<a;e++)for(var o=0;o<a;o++)e==0&&o==0||e==0&&o==a-1||e==a-1&&o==0||this.drawAlignmentPattern(t[e],t[o]);this.drawFormatBits(0),this.drawVersion()},r.prototype.drawFormatBits=function(e){for(var t=this.errorCorrectionLevel.formatBits<<3|e,a=t,o=0;o<10;o++)a=a<<1^(a>>>9)*1335;var i=(t<<10|a)^21522;f(i>>>15==0);for(var o=0;o<=5;o++)this.setFunctionModule(8,o,u(i,o));this.setFunctionModule(8,7,u(i,6)),this.setFunctionModule(8,8,u(i,7)),this.setFunctionModule(7,8,u(i,8));for(var o=9;o<15;o++)this.setFunctionModule(14-o,8,u(i,o));for(var o=0;o<8;o++)this.setFunctionModule(this.size-1-o,8,u(i,o));for(var o=8;o<15;o++)this.setFunctionModule(8,this.size-15+o,u(i,o));this.setFunctionModule(8,this.size-8,!0)},r.prototype.drawVersion=function(){if(!(this.version<7)){for(var e=this.version,t=0;t<12;t++)e=e<<1^(e>>>11)*7973;var a=this.version<<12|e;f(a>>>18==0);for(var t=0;t<18;t++){var o=u(a,t),i=this.size-11+t%3,s=Math.floor(t/3);this.setFunctionModule(i,s,o),this.setFunctionModule(s,i,o)}}},r.prototype.drawFinderPattern=function(e,t){for(var a=-4;a<=4;a++)for(var o=-4;o<=4;o++){var i=Math.max(Math.abs(o),Math.abs(a)),s=e+o,h=t+a;0<=s&&s<this.size&&0<=h&&h<this.size&&this.setFunctionModule(s,h,i!=2&&i!=4)}},r.prototype.drawAlignmentPattern=function(e,t){for(var a=-2;a<=2;a++)for(var o=-2;o<=2;o++)this.setFunctionModule(e+o,t+a,Math.max(Math.abs(o),Math.abs(a))!=1)},r.prototype.setFunctionModule=function(e,t,a){this.modules[t][e]=a,this.isFunction[t][e]=!0},r.prototype.addEccAndInterleave=function(e){var t=this.version,a=this.errorCorrectionLevel;if(e.length!=r.getNumDataCodewords(t,a))throw new RangeError("Invalid argument");for(var o=r.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][t],i=r.ECC_CODEWORDS_PER_BLOCK[a.ordinal][t],s=Math.floor(r.getNumRawDataModules(t)/8),h=o-s%o,C=Math.floor(s/o),M=[],_=r.reedSolomonComputeDivisor(i),S=0,N=0;S<o;S++){var p=e.slice(N,N+C-i+(S<h?0:1));N+=p.length;var g=r.reedSolomonComputeRemainder(p,_);S<h&&p.push(0),M.push(p.concat(g))}for(var y=[],P=function(b){M.forEach(function(F,I){(b!=C-i||I>=h)&&y.push(F[b])})},S=0;S<M[0].length;S++)P(S);return f(y.length==s),y},r.prototype.drawCodewords=function(e){if(e.length!=Math.floor(r.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var t=0,a=this.size-1;a>=1;a-=2){a==6&&(a=5);for(var o=0;o<this.size;o++)for(var i=0;i<2;i++){var s=a-i,h=(a+1&2)==0,C=h?this.size-1-o:o;!this.isFunction[C][s]&&t<e.length*8&&(this.modules[C][s]=u(e[t>>>3],7-(t&7)),t++)}}f(t==e.length*8)},r.prototype.applyMask=function(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(var t=0;t<this.size;t++)for(var a=0;a<this.size;a++){var o=void 0;switch(e){case 0:o=(a+t)%2==0;break;case 1:o=t%2==0;break;case 2:o=a%3==0;break;case 3:o=(a+t)%3==0;break;case 4:o=(Math.floor(a/3)+Math.floor(t/2))%2==0;break;case 5:o=a*t%2+a*t%3==0;break;case 6:o=(a*t%2+a*t%3)%2==0;break;case 7:o=((a+t)%2+a*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][a]&&o&&(this.modules[t][a]=!this.modules[t][a])}},r.prototype.getPenaltyScore=function(){for(var e=0,t=0;t<this.size;t++){for(var a=!1,o=0,i=[0,0,0,0,0,0,0],s=0;s<this.size;s++)this.modules[t][s]==a?(o++,o==5?e+=r.PENALTY_N1:o>5&&e++):(this.finderPenaltyAddHistory(o,i),a||(e+=this.finderPenaltyCountPatterns(i)*r.PENALTY_N3),a=this.modules[t][s],o=1);e+=this.finderPenaltyTerminateAndCount(a,o,i)*r.PENALTY_N3}for(var s=0;s<this.size;s++){for(var a=!1,h=0,i=[0,0,0,0,0,0,0],t=0;t<this.size;t++)this.modules[t][s]==a?(h++,h==5?e+=r.PENALTY_N1:h>5&&e++):(this.finderPenaltyAddHistory(h,i),a||(e+=this.finderPenaltyCountPatterns(i)*r.PENALTY_N3),a=this.modules[t][s],h=1);e+=this.finderPenaltyTerminateAndCount(a,h,i)*r.PENALTY_N3}for(var t=0;t<this.size-1;t++)for(var s=0;s<this.size-1;s++){var C=this.modules[t][s];C==this.modules[t][s+1]&&C==this.modules[t+1][s]&&C==this.modules[t+1][s+1]&&(e+=r.PENALTY_N2)}for(var M=0,_=0,S=this.modules;_<S.length;_++){var N=S[_];M=N.reduce(function(y,P){return y+(P?1:0)},M)}var p=this.size*this.size,g=Math.ceil(Math.abs(M*20-p*10)/p)-1;return f(0<=g&&g<=9),e+=g*r.PENALTY_N4,f(0<=e&&e<=2568888),e},r.prototype.getAlignmentPatternPositions=function(){if(this.version==1)return[];for(var e=Math.floor(this.version/7)+2,t=Math.floor((this.version*8+e*3+5)/(e*4-4))*2,a=[6],o=this.size-7;a.length<e;o-=t)a.splice(1,0,o);return a},r.getNumRawDataModules=function(e){if(e<r.MIN_VERSION||e>r.MAX_VERSION)throw new RangeError("Version number out of range");var t=(16*e+128)*e+64;if(e>=2){var a=Math.floor(e/7)+2;t-=(25*a-10)*a-55,e>=7&&(t-=36)}return f(208<=t&&t<=29648),t},r.getNumDataCodewords=function(e,t){return Math.floor(r.getNumRawDataModules(e)/8)-r.ECC_CODEWORDS_PER_BLOCK[t.ordinal][e]*r.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][e]},r.reedSolomonComputeDivisor=function(e){if(e<1||e>255)throw new RangeError("Degree out of range");for(var t=[],a=0;a<e-1;a++)t.push(0);t.push(1);for(var o=1,a=0;a<e;a++){for(var i=0;i<t.length;i++)t[i]=r.reedSolomonMultiply(t[i],o),i+1<t.length&&(t[i]^=t[i+1]);o=r.reedSolomonMultiply(o,2)}return t},r.reedSolomonComputeRemainder=function(e,t){for(var a=t.map(function(C){return 0}),o=function(C){var M=C^a.shift();a.push(0),t.forEach(function(_,S){return a[S]^=r.reedSolomonMultiply(_,M)})},i=0,s=e;i<s.length;i++){var h=s[i];o(h)}return a},r.reedSolomonMultiply=function(e,t){if(e>>>8||t>>>8)throw new RangeError("Byte out of range");for(var a=0,o=7;o>=0;o--)a=a<<1^(a>>>7)*285,a^=(t>>>o&1)*e;return f(a>>>8==0),a},r.prototype.finderPenaltyCountPatterns=function(e){var t=e[1];f(t<=this.size*3);var a=t>0&&e[2]==t&&e[3]==t*3&&e[4]==t&&e[5]==t;return(a&&e[0]>=t*4&&e[6]>=t?1:0)+(a&&e[6]>=t*4&&e[0]>=t?1:0)},r.prototype.finderPenaltyTerminateAndCount=function(e,t,a){return e&&(this.finderPenaltyAddHistory(t,a),t=0),t+=this.size,this.finderPenaltyAddHistory(t,a),this.finderPenaltyCountPatterns(a)},r.prototype.finderPenaltyAddHistory=function(e,t){t[0]==0&&(e+=this.size),t.pop(),t.unshift(e)},r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r}();n.QrCode=c;function v(r,e,t){if(e<0||e>31||r>>>e)throw new RangeError("Value out of range");for(var a=e-1;a>=0;a--)t.push(r>>>a&1)}function u(r,e){return(r>>>e&1)!=0}function f(r){if(!r)throw new Error("Assertion error")}var m=function(){function r(e,t,a){if(this.mode=e,this.numChars=t,this.bitData=a,t<0)throw new RangeError("Invalid argument");this.bitData=a.slice()}return r.makeBytes=function(e){for(var t=[],a=0,o=e;a<o.length;a++){var i=o[a];v(i,8,t)}return new r(r.Mode.BYTE,e.length,t)},r.makeNumeric=function(e){if(!r.isNumeric(e))throw new RangeError("String contains non-numeric characters");for(var t=[],a=0;a<e.length;){var o=Math.min(e.length-a,3);v(parseInt(e.substring(a,a+o),10),o*3+1,t),a+=o}return new r(r.Mode.NUMERIC,e.length,t)},r.makeAlphanumeric=function(e){if(!r.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");var t=[],a;for(a=0;a+2<=e.length;a+=2){var o=r.ALPHANUMERIC_CHARSET.indexOf(e.charAt(a))*45;o+=r.ALPHANUMERIC_CHARSET.indexOf(e.charAt(a+1)),v(o,11,t)}return a<e.length&&v(r.ALPHANUMERIC_CHARSET.indexOf(e.charAt(a)),6,t),new r(r.Mode.ALPHANUMERIC,e.length,t)},r.makeSegments=function(e){return e==""?[]:r.isNumeric(e)?[r.makeNumeric(e)]:r.isAlphanumeric(e)?[r.makeAlphanumeric(e)]:[r.makeBytes(r.toUtf8ByteArray(e))]},r.makeEci=function(e){var t=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)v(e,8,t);else if(e<16384)v(2,2,t),v(e,14,t);else if(e<1e6)v(6,3,t),v(e,21,t);else throw new RangeError("ECI assignment value out of range");return new r(r.Mode.ECI,0,t)},r.isNumeric=function(e){return r.NUMERIC_REGEX.test(e)},r.isAlphanumeric=function(e){return r.ALPHANUMERIC_REGEX.test(e)},r.prototype.getData=function(){return this.bitData.slice()},r.getTotalBits=function(e,t){for(var a=0,o=0,i=e;o<i.length;o++){var s=i[o],h=s.mode.numCharCountBits(t);if(s.numChars>=1<<h)return 1/0;a+=4+h+s.bitData.length}return a},r.toUtf8ByteArray=function(e){e=encodeURI(e);for(var t=[],a=0;a<e.length;a++)e.charAt(a)!="%"?t.push(e.charCodeAt(a)):(t.push(parseInt(e.substring(a+1,a+3),16)),a+=2);return t},r.NUMERIC_REGEX=/^[0-9]*$/,r.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,r.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r}();n.QrSegment=m})(H||(H={}));(function(n){(function(c){var v=function(){function u(f,m){this.ordinal=f,this.formatBits=m}return u.LOW=new u(0,1),u.MEDIUM=new u(1,0),u.QUARTILE=new u(2,3),u.HIGH=new u(3,2),u}();c.Ecc=v})(n.QrCode||(n.QrCode={}))})(H||(H={}));(function(n){(function(c){var v=function(){function u(f,m){this.modeBits=f,this.numBitsCharCount=m}return u.prototype.numCharCountBits=function(f){return this.numBitsCharCount[Math.floor((f+7)/17)]},u.NUMERIC=new u(1,[10,12,14]),u.ALPHANUMERIC=new u(2,[9,11,13]),u.BYTE=new u(4,[8,16,16]),u.KANJI=new u(8,[8,10,12]),u.ECI=new u(7,[0,0,0]),u}();c.Mode=v})(n.QrSegment||(n.QrSegment={}))})(H||(H={}));var V=H,re="L",oe={L:V.QrCode.Ecc.LOW,M:V.QrCode.Ecc.MEDIUM,Q:V.QrCode.Ecc.QUARTILE,H:V.QrCode.Ecc.HIGH},ot=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function ne(n){return n in oe}function me(n,c){c===void 0&&(c=0);var v=[];return n.forEach(function(u,f){var m=null;u.forEach(function(r,e){if(!r&&m!==null){v.push("M".concat(m+c," ").concat(f+c,"h").concat(e-m,"v1H").concat(m+c,"z")),m=null;return}if(e===u.length-1){if(!r)return;m===null?v.push("M".concat(e+c,",").concat(f+c," h1v1H").concat(e+c,"z")):v.push("M".concat(m+c,",").concat(f+c," h").concat(e+1-m,"v1H").concat(m+c,"z"));return}r&&m===null&&(m=e)})}),v.join("")}function ge(n,c,v,u){var f=u.width,m=u.height,r=u.x,e=u.y,t=n.length+v*2,a=Math.floor(c*.1),o=t/c,i=(f||a)*o,s=(m||a)*o,h=r==null?n.length/2-i/2:r*o,C=e==null?n.length/2-s/2:e*o,M=null;if(u.excavate){var _=Math.floor(h),S=Math.floor(C),N=Math.ceil(i+h-_),p=Math.ceil(s+C-S);M={x:_,y:S,w:N,h:p}}return{x:h,y:C,h:s,w:i,excavation:M}}function pe(n,c){return n.slice().map(function(v,u){return u<c.y||u>=c.y+c.h?v:v.map(function(f,m){return m<c.x||m>=c.x+c.w?f:!1})})}var ie={value:{type:String,required:!0,default:""},size:{type:Number,default:100},level:{type:String,default:re,validator:function(n){return ne(n)}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"},margin:{type:Number,required:!1,default:0},imageSettings:{type:Object,required:!1,default:function(){return{}}},gradient:{type:Boolean,required:!1,default:!1},gradientType:{type:String,required:!1,default:"linear",validator:function(n){return["linear","radial"].indexOf(n)>-1}},gradientStartColor:{type:String,required:!1,default:"#000"},gradientEndColor:{type:String,required:!1,default:"#fff"}},nt=U(U({},ie),{renderAs:{type:String,required:!1,default:"canvas",validator:function(n){return["canvas","svg"].indexOf(n)>-1}}}),it=J({name:"QRCodeSvg",props:ie,setup:function(n){var c=E(0),v=E(""),u,f=function(){var r=n.value,e=n.level,t=n.margin,a=t>>>0,o=ne(e)?e:re,i=V.QrCode.encodeText(r,oe[o]).getModules();if(c.value=i.length+a*2,n.imageSettings.src){var s=ge(i,n.size,a,n.imageSettings);u={x:s.x+a,y:s.y+a,width:s.w,height:s.h},s.excavation&&(i=pe(i,s.excavation))}v.value=me(i,a)},m=function(){if(!n.gradient)return null;var r=n.gradientType==="linear"?{x1:"0%",y1:"0%",x2:"100%",y2:"100%"}:{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"};return z(n.gradientType==="linear"?"linearGradient":"radialGradient",U({id:"qr-gradient"},r),[z("stop",{offset:"0%",style:{stopColor:n.gradientStartColor}}),z("stop",{offset:"100%",style:{stopColor:n.gradientEndColor}})])};return f(),he(f),function(){return z("svg",{width:n.size,height:n.size,"shape-rendering":"crispEdges",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(c.value," ").concat(c.value)},[z("defs",{},[m()]),z("rect",{width:"100%",height:"100%",fill:n.background}),z("path",{fill:n.gradient?"url(#qr-gradient)":n.foreground,d:v.value}),n.imageSettings.src&&z("image",U({href:n.imageSettings.src},u))])}}}),lt=J({name:"QRCodeCanvas",props:ie,setup:function(n,c){var v=E(null),u=E(null),f=function(){var r=n.value,e=n.level,t=n.size,a=n.margin,o=n.background,i=n.foreground,s=n.gradient,h=n.gradientType,C=n.gradientStartColor,M=n.gradientEndColor,_=a>>>0,S=ne(e)?e:re,N=v.value;if(N){var p=N.getContext("2d");if(p){var g=V.QrCode.encodeText(r,oe[S]).getModules(),y=g.length+_*2,P=u.value,b={x:0,y:0,width:0,height:0},F=n.imageSettings.src&&P!=null&&P.naturalWidth!==0&&P.naturalHeight!==0;if(F){var I=ge(g,n.size,_,n.imageSettings);b={x:I.x+_,y:I.y+_,width:I.w,height:I.h},I.excavation&&(g=pe(g,I.excavation))}var q=window.devicePixelRatio||1,B=t/y*q;if(N.height=N.width=t*q,p.scale(B,B),p.fillStyle=o,p.fillRect(0,0,y,y),s){var L=void 0;h==="linear"?L=p.createLinearGradient(0,0,y,y):L=p.createRadialGradient(y/2,y/2,0,y/2,y/2,y/2),L.addColorStop(0,C),L.addColorStop(1,M),p.fillStyle=L}else p.fillStyle=i;ot?p.fill(new Path2D(me(g,_))):g.forEach(function(D,x){D.forEach(function(G,j){G&&p.fillRect(j+_,x+_,1,1)})}),F&&p.drawImage(P,b.x,b.y,b.width,b.height)}}};Be(f),he(f);var m=c.attrs.style;return function(){return z(Ue,[z("canvas",U(U({},c.attrs),{ref:v,style:U(U({},m),{width:"".concat(n.size,"px"),height:"".concat(n.size,"px")})})),n.imageSettings.src&&z("img",{ref:u,src:n.imageSettings.src,style:{display:"none"},onLoad:f})])}}}),st=J({name:"Qrcode",render:function(){var n=this.$props,c=n.renderAs,v=n.value,u=n.size,f=n.margin,m=n.level,r=n.background,e=n.foreground,t=n.imageSettings,a=n.gradient,o=n.gradientType,i=n.gradientStartColor,s=n.gradientEndColor;return z(c==="svg"?it:lt,{value:v,size:u,margin:f,level:m,background:r,foreground:e,imageSettings:t,gradient:a,gradientType:o,gradientStartColor:i,gradientEndColor:s})},props:nt});function ve(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Ge(n)}const Pt=J({name:"administrator_administrator-list",__name:"index",setup(n){const{pagination:c,renderCell:v}=Je(),{handleUpload:u}=tt(),f=Te(),m=E(0),r=E([]),e=E({}),t=E({}),a=E([]),o=E({}),i=E([]),s=E([{type:"Input",valueName:"name",label:"管理员名称/账号",placeholder:"请输入管理员名称/账号"},{type:"Select",valueName:"roles",label:"角色",placeholder:"请选择角色",selectLabelField:"role_name",selectValueField:"id"},{type:"Select",valueName:"is_del",label:"是否删除",defaultOption:[{value:1,label:"已删除"},{value:0,label:"未删除"}]},{type:"Select",valueName:"status",label:"状态",defaultOption:[{value:1,label:"启用"},{value:0,label:"禁用"}]}]),h=[{title:"账号",key:"account",align:"center"},{title:"真实姓名",key:"real_name",align:"center"},{title:"角色",key:"roles",align:"center"},{title:"状态",key:"status",align:"center",render:d=>R(He,{value:d.status,"onUpdate:value":l=>d.status=l,"checked-value":1,"unchecked-value":0,loading:d.statusLoading,"on-update:value":()=>Se(d)},null)},{title:"创建时间",key:"create_time",align:"center"},{title:"操作",key:"action",align:"center",width:300,fixed:"right",render:d=>{let l;return R(rt,{justify:"center"},{default:()=>[R(Z,{type:"success",size:"small",onClick:Ce.bind(null,d)},ve(l=T("common.modify"))?l:{default:()=>[l]}),R(je,{"onPositive-click":Ae.bind(null,d.id)},{default:()=>[T("common.confirmDelete")],trigger:()=>{let A;return R(Z,{type:"error",size:"small"},ve(A=T("common.delete"))?A:{default:()=>[A]})}}),ae(R(Z,{strong:!0,secondary:!0,type:"info",size:"small",onClick:le.bind(null,d)},{default:()=>[W("绑定谷歌验证")]}),[[fe,d.has_google===0]]),ae(R(Z,{type:"error",size:"small",onClick:le.bind(null,d)},{default:()=>[W("换绑定谷歌验证")]}),[[fe,d.has_google===1]])]})}}],C=E([]),M=E(!1),_=E(!1),S=E(!0),N=E(!1),p=E(!1),g=E(!0),y=E(!1),P=E(!1),b=E({}),F=E(""),I=E([{type:"Input",valueName:"account",label:"账号"},{type:"Input",valueName:"real_name",label:"真实姓名"},{type:"Slot",valueName:"head_pic",label:"头像",slotName:"head_pic"},{type:"Multiple Select",valueName:"roles",label:"角色",placeholder:"请选择角色",selectLabelField:"role_name",selectValueField:"id"},{type:"Input",valueName:"pwd",label:"密码",inputType:"password"},{type:"Input",valueName:"conf_pwd",label:"确认密码",inputType:"password"},{type:"Radio",valueName:"status",label:"状态",radioGroupOption:[{label:"开启",value:1},{value:0,label:"关闭"}]},{type:"Slot",valueName:"tips",slotName:"tips",label:"代理注意"}]),q=E([{type:"Slot",valueName:"account",slotName:"account",label:"账号"},{type:"Slot",valueName:"old_secret",slotName:"old_secret",label:"旧验证器密钥"},{type:"Slot",valueName:"secret",slotName:"secret",label:"新验证器密钥"},{type:"Slot",valueName:"secret_url",slotName:"secret_url",label:"新验证器二维码"},{type:"Input",valueName:"google_code",label:"旧验证器验证码",placeholder:"更换绑定：请填写旧的谷歌验证器码，或超管验证器码"}]),B=E([]),L=E([]),D={account:[{required:!0,message:"请输入账号",trigger:["blur"]}],real_name:[{required:!0,message:"请输入真实姓名",trigger:["blur"]}],roles:[{type:"array",required:!0,message:"请选择角色",trigger:["blur"]}],pwd:[{required:!0,message:"请输入密码",trigger:["blur"]}],conf_pwd:[{required:!0,message:"请再次输入密码",trigger:["blur"]}]},x={account:[{required:!0,message:"请输入账号",trigger:["blur"]}],real_name:[{required:!0,message:"请输入真实姓名",trigger:["blur"]}],roles:[{type:"array",required:!0,message:"请选择角色",trigger:["blur"]}]};async function G(d){N.value=!0;const l={};Object.keys(e.value).length===1&&(l.head_pic=e.value.head_pic);const{response:A}=await Ve({...d,...l});A.data.status===200&&(k(),f.success(T("common.addSuccess")),_.value=!1),N.value=!1}function j(){r.value=[],ee("add")}function Ce(d){m.value=d.id,L.value.forEach(l=>{l.valueName==="roles"?l.defaultValue=d.role_ids.split(",").map(A=>Number(A)):l.defaultValue=d[l.valueName]}),d.head_pic&&(a.value=[{id:"head_pic",name:"头像",url:d.head_pic.url,status:"finished"}]),p.value=!0}async function we(d){y.value=!0;const l={};Object.keys(t.value).length===1?l.head_pic=t.value.head_pic:l.head_pic=d.head_pic.name;const{response:A}=await xe(m.value,{...d,...l});A.data.status===200&&(k(),f.success(T("common.modifySuccess")),p.value=!1),y.value=!1}async function le(d){const{data:l}=await Ye({id:d.id});b.value={id:d.id,old_secret:l.old_secret||"暂未绑定",secret:l.secret,account:d.account,is_new:l.is_new,secret_url:l.secret_url},F.value=l.secret_url,P.value=!0}async function ye(d){const{response:l}=await $e({id:b.value.id,google_code:d.google_code,google_secret:b.value.secret});l.data.status===200&&(P.value=!1,f.success("绑定成功"))}function Ee(d){o.value=d,c.page=1,k()}async function k(){M.value=!0;const{data:d}=await Ke({page:c.page,limit:c.pageSize,...o.value});C.value=d.list,c.itemCount=d.count,M.value=!1}function Me(d){c.page=d,k()}function _e(d){c.page=1,c.pageSize=d,k()}async function Se(d){d.statusLoading=!0;let l=0;d.status===0?l=1:l=0;const{response:A}=await We(d.id,l);A.data.status===200&&(d.status=l,f.success(T("common.modifySuccess"))),d.statusLoading=!1}async function be({file:d,onFinish:l,onError:A,onProgress:Y}){const Q=await u({file:d,onFinish:l,onError:A,onProgress:Y});Q&&(e.value.head_pic=Q)}async function Ne({file:d,onFinish:l,onError:A,onProgress:Y}){const Q=await u({file:d,onFinish:l,onError:A,onProgress:Y});Q&&(t.value.head_pic=Q)}function ee(d){Reflect.deleteProperty(d==="add"?e.value:t.value,"head_pic")}async function Ae(d){M.value=!0;const{response:l}=await Xe(d);l.data.status===200&&(k(),f.success(T("common.deleteSuccess")))}function Re(){_.value=!0}async function Pe(){const{data:d}=await Ze();i.value=d.list,s.value[1].defaultOption=i.value,B.value[3].defaultOption=i.value,L.value[3].defaultOption=i.value}return k(),Pe(),B.value=ce(I.value),L.value=ce(I.value),(d,l)=>{var ue;const A=Fe,Y=ze,Q=at,Ie=qe,se=et,te=Oe,Le=De("resize");return ke(),Qe("div",null,[R(Ie,{title:"系统管理员列表"},{"header-extra":O(()=>[R(A,{"refresh-button-loading":M.value,"onUpdate:refreshButtonLoading":l[0]||(l[0]=w=>M.value=w),"is-export-all":!1,"is-export-filter":!1,"is-export-selected":!1,"is-batch-delete":!1,onAdd:Re,onRefresh:k},null,8,["refresh-button-loading"])]),default:O(()=>[R(Y,{"search-config":s.value,onOnSearch:Ee},null,8,["search-config"]),ae(R(Q,{remote:"",columns:h,data:C.value,loading:M.value,bordered:!1,style:{height:"620px"},"flex-height":"","scroll-x":1e3,pagination:K(c),"render-cell":K(v),"onUpdate:page":Me,"onUpdate:pageSize":_e},null,8,["data","loading","pagination","render-cell"]),[[Le]])]),_:1}),R(te,{"show-form-modal":_.value,"onUpdate:showFormModal":l[3]||(l[3]=w=>_.value=w),"is-async-shut-down":S.value,"onUpdate:isAsyncShutDown":l[4]||(l[4]=w=>S.value=w),"is-show-modal-loading":N.value,"onUpdate:isShowModalLoading":l[5]||(l[5]=w=>N.value=w),"modal-title":K(T)("common.add"),"modal-form-config":B.value,"form-rules":D,onOnSubmit:G,onOnClose:j},{tips:O(()=>l[14]||(l[14]=[$("div",{class:"color-red"},"新增代理角色-必须要在代理管理添加。",-1)])),head_pic:O(()=>[R(se,{"file-list":r.value,"onUpdate:fileList":l[1]||(l[1]=w=>r.value=w),"list-type":"image-card",max:1,accept:"image/*","custom-request":be,onRemove:l[2]||(l[2]=w=>ee("add"))},{default:O(()=>l[15]||(l[15]=[W(" 点击上传 ")])),_:1},8,["file-list"])]),_:1},8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"]),R(te,{"show-form-modal":p.value,"onUpdate:showFormModal":l[8]||(l[8]=w=>p.value=w),"is-async-shut-down":g.value,"onUpdate:isAsyncShutDown":l[9]||(l[9]=w=>g.value=w),"is-show-modal-loading":y.value,"onUpdate:isShowModalLoading":l[10]||(l[10]=w=>y.value=w),"modal-title":K(T)("common.modify"),"modal-form-config":L.value,"form-rules":x,onOnSubmit:we},{tips:O(()=>l[16]||(l[16]=[$("div",{class:"color-red"},"新增代理角色-必须要在代理管理添加。",-1)])),head_pic:O(()=>[R(se,{"file-list":a.value,"onUpdate:fileList":l[6]||(l[6]=w=>a.value=w),"list-type":"image-card",max:1,accept:"image/*","custom-request":Ne,onRemove:l[7]||(l[7]=w=>ee("modify"))},{default:O(()=>l[17]||(l[17]=[W(" 点击上传 ")])),_:1},8,["file-list"])]),_:1},8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"]),R(te,{"show-form-modal":P.value,"onUpdate:showFormModal":l[11]||(l[11]=w=>P.value=w),"is-async-shut-down":g.value,"onUpdate:isAsyncShutDown":l[12]||(l[12]=w=>g.value=w),"is-show-modal-loading":y.value,"onUpdate:isShowModalLoading":l[13]||(l[13]=w=>y.value=w),"modal-title":((ue=b.value)==null?void 0:ue.is_new)===1?"绑定谷歌验证码":"换绑谷歌验证码","modal-form-config":q.value,onOnSubmit:ye},{old_secret:O(()=>[$("div",null,X(b.value.old_secret),1)]),secret:O(()=>[$("div",null,X(b.value.secret),1)]),account:O(()=>{var w,de;return[$("div",null,X((w=b.value)==null?void 0:w.account)+X(((de=b.value)==null?void 0:de.is_new)===1?"":"（已绑定）"),1)]}),secret_url:O(()=>[R(st,{value:F.value,size:100,level:"H"},null,8,["value"])]),_:1},8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"])])}}});export{Pt as default};
