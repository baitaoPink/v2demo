import{_ as oe}from"./modal-form.vue_vue_type_script_setup_true_lang-BJ69RLGj.js";import{_ as le}from"./search-header-BxwkGrv3.js";import{_ as ne}from"./table-header-button-group.vue_vue_type_script_setup_true_lang-CEWz-Loh.js";import{d as ie,O as re,r as o,U as L,V as se,o as ue,b as me,f as n,w as q,h as s,a1 as N,W as de,$ as u,B as z,N as ce,Z as pe}from"./index-DrEzliHY.js";import{z as B,A as ge,B as fe,C as ve,D as be,E as ye}from"./user-manage-BW6Zf-JT.js";import{u as _e,N as he}from"./custom-table-YBGLKz8r.js";import{u as xe}from"./exportExcel-DmIPdUnp.js";import{_ as we}from"./Flex-DkQB4X0g.js";import{_ as Ne}from"./DataTable-BLC5kPHF.js";import"./multi-language-form.vue_vue_type_script_setup_true_lang-CddQKb4h.js";import"./custom-upload-xESAwsug.js";import"./Grid-ppKVTCkg.js";import"./get-slot-Bk_rJcZu.js";import"./FormItem-D43XudUj.js";import"./Spin-4EGh_M6p.js";import"./DatePicker-B2ToGdru.js";import"./TimePicker-CbQV1d7H.js";import"./Forward-RZ68qXfC.js";import"./RadioGroup-DfynhpqT.js";import"./Space-B3V6_u3T.js";function H(p){return typeof p=="function"||Object.prototype.toString.call(p)==="[object Object]"&&!pe(p)}const S="合伙人层级列表.xlsx",Te=ie({name:"user-manage_hierarchical-manage",__name:"index",setup(p){const{pagination:m,renderCell:V}=_e(),g=re(),{exportExcel:h,exportLoading:i}=xe(),d=o(!1),x=o([]),D=o({}),$=o([{type:"Input",valueName:"name",label:"名称",placeholder:"请输入名称"},{type:"Input Number",valueName:"lv",label:"级别",placeholder:"请输入级别"}]),O=["ratio","min_money","max_money"],C=o(0),f=o(!1),k=o(!0),v=o(!1),b=o(!1),M=o(!0),y=o(!1),U=o([{type:"Input",valueName:"name",label:"名称",i18n:!0},{type:"Input Number",valueName:"level",label:"级别"},{type:"Input Number",valueName:"min_num",label:"最少人数"},{type:"Input Number",valueName:"max_num",label:"最高人数"},{type:"Input Number",valueName:"ratio",label:"返佣比例"},{type:"Input Number",valueName:"min_money",label:"最低投资金额"},{type:"Input Number",valueName:"max_money",label:"最高投资金额"},{type:"Input Number",valueName:"min_position_ratio",label:"最低仓位比例"},{type:"Input Number",valueName:"max_position_ratio",label:"最高仓位比例"}]),I=o([]),w=o([]),A={name:[{required:!0,message:"请输入名称",trigger:["blur"]}],level:[{type:"number",required:!0,message:"请输入级别",trigger:["blur"]}],min_num:[{type:"number",required:!0,message:"请输入最少人数",trigger:["blur"]}],max_num:[{type:"number",required:!0,message:"请输入最高人数",trigger:["blur"]}],ratio:[{type:"number",required:!0,message:"请输入返佣比例",trigger:["blur"]}],min_money:[{type:"number",required:!0,message:"请输入最低投资金额",trigger:["blur"]}],max_money:[{type:"number",required:!0,message:"请输入最高投资金额",trigger:["blur"]}],min_position_ratio:[{type:"number",required:!0,message:"请输入最低仓位比例",trigger:["blur"]}],max_position_ratio:[{type:"number",required:!0,message:"请输入最高仓位比例",trigger:["blur"]}]};async function r(){d.value=!0;const{data:a}=await B({page:m.page,limit:m.pageSize,...D.value});x.value=a.list,m.itemCount=a.count,d.value=!1}function P(a){m.page=a,r()}function R(a){m.page=1,m.pageSize=a,r()}async function T(a){d.value=!0;const{response:e}=await be(a);e.data.status===200&&(r(),g.success(u("common.deleteSuccess")))}async function j(a){C.value=a;const{data:e}=await ye(a);w.value.forEach(l=>{typeof e[l.valueName]=="string"&&O.includes(l.valueName)&&(e[l.valueName]=Number(e[l.valueName])),l.i18n&&(l.i18nValue=e.tplang_name),l.defaultValue=e[l.valueName]}),b.value=!0}const _=[{type:"selection"},{title:"名称",key:"name",align:"center"},{title:"级别",key:"level",align:"center"},{title:"最少人数",key:"min_num",align:"center"},{title:"最高人数",key:"max_num",align:"center"},{title:"返佣比例",key:"ratio",align:"center",render:a=>`${a.ratio}%`},{title:"最低投资金额",key:"min_money",align:"center"},{title:"最高投资金额",key:"max_money",align:"center"},{title:"最低仓位比例",key:"min_position_ratio",align:"center"},{title:"最高仓位比例",key:"max_position_ratio",align:"center"},{title:"创建时间",key:"create_time",align:"center"},{title:"操作",key:"action",align:"center",width:300,fixed:"right",render:a=>{let e;return n(we,{justify:"center"},{default:()=>[n(z,{type:"success",size:"small",onClick:j.bind(null,a.id)},H(e=u("common.modify"))?e:{default:()=>[e]}),n(he,{"onPositive-click":T.bind(null,a.id)},{default:()=>[u("common.confirmDelete")],trigger:()=>{let l;return n(z,{type:"error",size:"small"},H(l=u("common.delete"))?l:{default:()=>[l]})}})]})}}];async function K(){const{data:a}=await B();h({tableColumns:_,tableData:a.list,fileName:S})}const c=o([]),E=o([]);function G(a){D.value=a,m.page=1,r()}function Q(a,e){c.value=a,E.value=e}function W(){f.value=!0}async function Z(){d.value=!0;const{response:a}=await ge({id:c.value.join(",")});a.data.status===200&&(r(),c.value=[],g.success(u("common.deleteSuccess")))}async function J(a){v.value=!0;const{response:e}=await fe(a);e.data.status===200&&(r(),g.success(u("common.addSuccess")),f.value=!1),v.value=!1}async function X(a){y.value=!0;const{response:e}=await ve(C.value,a);e.data.status===200&&(r(),g.success(u("common.modifySuccess")),b.value=!1),y.value=!1}return r(),I.value=L(U.value),w.value=L(U.value),(a,e)=>{const l=ne,Y=le,ee=Ne,ae=ce,F=oe,te=se("resize");return ue(),me("div",null,[n(ae,{title:"层级列表"},{"header-extra":q(()=>[n(l,{"export-all-loading":s(i),"onUpdate:exportAllLoading":e[0]||(e[0]=t=>N(i)?i.value=t:null),"refresh-button-loading":d.value,"onUpdate:refreshButtonLoading":e[1]||(e[1]=t=>d.value=t),"export-selected-disabled":c.value.length,"onUpdate:exportSelectedDisabled":e[2]||(e[2]=t=>c.value.length=t),"batch-delete-disabled":c.value.length,"onUpdate:batchDeleteDisabled":e[3]||(e[3]=t=>c.value.length=t),"export-filter-loading":s(i),"onUpdate:exportFilterLoading":e[4]||(e[4]=t=>N(i)?i.value=t:null),"export-selected-loading":s(i),"onUpdate:exportSelectedLoading":e[5]||(e[5]=t=>N(i)?i.value=t:null),onExportAll:K,onExportFilter:e[6]||(e[6]=t=>s(h)({tableColumns:_,tableData:x.value,fileName:S})),onExportSelected:e[7]||(e[7]=t=>s(h)({tableColumns:_,tableData:E.value,fileName:S})),onAdd:W,onBatchDelete:Z,onRefresh:r},null,8,["export-all-loading","refresh-button-loading","export-selected-disabled","batch-delete-disabled","export-filter-loading","export-selected-loading"])]),default:q(()=>[n(Y,{"search-config":$.value,onOnSearch:G},null,8,["search-config"]),de(n(ee,{remote:"",columns:_,data:x.value,loading:d.value,bordered:!1,style:{height:"620px"},"flex-height":"","scroll-x":2200,pagination:s(m),"row-key":t=>t.id,"render-cell":s(V),"onUpdate:checkedRowKeys":Q,"onUpdate:page":P,"onUpdate:pageSize":R},null,8,["data","loading","pagination","row-key","render-cell"]),[[te]])]),_:1}),n(F,{"show-form-modal":f.value,"onUpdate:showFormModal":e[8]||(e[8]=t=>f.value=t),"is-async-shut-down":k.value,"onUpdate:isAsyncShutDown":e[9]||(e[9]=t=>k.value=t),"is-show-modal-loading":v.value,"onUpdate:isShowModalLoading":e[10]||(e[10]=t=>v.value=t),"is-show-modal-form-i18n":!0,"modal-title":s(u)("common.add"),"modal-form-config":I.value,"form-rules":A,onOnSubmit:J},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"]),n(F,{"show-form-modal":b.value,"onUpdate:showFormModal":e[11]||(e[11]=t=>b.value=t),"is-async-shut-down":M.value,"onUpdate:isAsyncShutDown":e[12]||(e[12]=t=>M.value=t),"is-show-modal-loading":y.value,"onUpdate:isShowModalLoading":e[13]||(e[13]=t=>y.value=t),"is-show-modal-form-i18n":!0,"modal-title":s(u)("common.modify"),"modal-form-config":w.value,"form-rules":A,onOnSubmit:X},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"])])}}});export{Te as default};
