import{_ as se}from"./modal-form.vue_vue_type_script_setup_true_lang-BuDR1X64.js";import{_ as ue}from"./search-header-DC9myRJJ.js";import{_ as ie}from"./table-header-button-group.vue_vue_type_script_setup_true_lang-BqWHjY4C.js";import{a0 as v,d as re,O as de,r as o,U,V as me,o as ce,b as pe,f as s,w as B,h as m,a1 as A,W as fe,$ as c,X as ge,B as j,N as ve,Z as ye}from"./index-DgS_gExp.js";import{u as be,N as _e}from"./custom-table-M__G0njN.js";import{u as he}from"./exportExcel-4g3fAweF.js";import{_ as we}from"./Flex-NxzTnbAG.js";import{_ as xe}from"./DataTable-R-3tvq3U.js";import"./multi-language-form.vue_vue_type_script_setup_true_lang-D4ifp7HF.js";import"./custom-upload-DUUdPJxM.js";import"./Grid-BNV0w0mr.js";import"./get-slot-Bk_rJcZu.js";import"./FormItem-BAqcrsPW.js";import"./Spin-Bu1_C0Z0.js";import"./DatePicker-yC2d8YmP.js";import"./TimePicker-BsIq1gq9.js";import"./Forward-BOBl18BE.js";import"./RadioGroup-C9MN4_Hy.js";import"./Space-CMuvGHTq.js";function q(n){return v({url:"/system/setting/country",params:n})}function Ne(n){return v({url:"/system/setting/country",method:"post",data:n})}function Se(n,u){return v({url:`/system/setting/country/${n}`,method:"put",data:u})}function Ce(n){return v({url:`/system/setting/country/${n}`})}function De(n){return v({url:`/system/setting/country/${n}`,method:"delete"})}function ke(n){return v({url:"/system/setting/country/batchDelete",method:"post",params:n})}function P(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!ye(n)}const F="地区管理列表.xlsx",Ke=re({name:"system-config_area-management",__name:"index",setup(n){const{pagination:u,renderCell:T}=be(),b=de(),{exportExcel:N,exportLoading:i}=he(),p=o(!1),S=o([]),O=o(),V=o([{type:"Input",valueName:"name",label:"地区"},{type:"Input",valueName:"name_en",label:"英文名"},{type:"Select",valueName:"is_default",label:"是否默认",defaultOption:[{value:1,label:"是"},{value:0,label:"否"}]},{type:"Select",valueName:"status",label:"状态",defaultOption:[{value:1,label:"开启"},{value:0,label:"隐藏"}]}]),C=o(0),_=o(!1),E=o(!0),h=o(!1),G=o({}),w=o(!1),I=o(!0),x=o(!1),D=o([{type:"Input",valueName:"name",label:"地区"},{type:"Input",valueName:"name_en",label:"英文名"},{type:"Input",valueName:"country_code",label:"国家编码"},{type:"Input Number",valueName:"area_code",label:"区域编码"},{type:"Input Number",valueName:"time_diff",label:"时差"},{type:"Input",valueName:"remark",label:"备注"},{type:"Radio",valueName:"status",label:"状态",radioGroupOption:[{value:1,label:"开启"},{value:0,label:"隐藏"}]},{type:"Radio",valueName:"is_visit",label:"是否允许访问",radioGroupOption:[{value:1,label:"允许"},{value:0,label:"不允许"}]},{type:"Radio",valueName:"is_default",label:"是否默认",radioGroupOption:[{value:1,label:"是"},{value:0,label:"否"}]}]),k=o([]),M=o([]),L={name:[{required:!0,message:"请输入地区",trigger:["blur"]}],name_en:[{required:!0,message:"请输入地区",trigger:["blur"]}],country_code:[{required:!0,message:"请输入国家编码",trigger:["blur"]}],area_code:[{required:!0,type:"number",message:"请输入区域编码",trigger:["blur"]}],time_diff:[{required:!0,type:"number",message:"请输入时差",trigger:["blur"]}]};async function r(){p.value=!0;const{data:t}=await q({...O.value,page:u.page,limit:u.pageSize});S.value=t.list,u.itemCount=t.count,p.value=!1}async function H(t){p.value=!0;const{response:e}=await De(t);e.data.status===200&&(r(),b.success(c("common.deleteSuccess")))}async function K(t){C.value=t;const{data:e}=await Ce(t);G.value=e,M.value.forEach(l=>{l.defaultValue=e[l.valueName]}),w.value=!0}const y=[{type:"selection"},{title:"名称",key:"name",align:"center",width:"200"},{title:"英文名",key:"name_en",align:"center",width:"120"},{title:"国家编码",key:"country_code",align:"center",width:"100"},{title:"区域编码",key:"area_code",align:"center",width:"100"},{title:"时差",key:"time_diff",align:"center",width:"100"},{title:"状态",key:"status",align:"center",width:"100",render:t=>{const e=o(t.status===1);return s(ge,{value:e.value,"onUpdate:value":[l=>e.value=l,l=>{t.status=l?1:0,C.value=t.id,$({...t,status:l})}]},null)}},{title:"是否允许访问",key:"is_visit",align:"center",width:"130",render:t=>t.is_visit?"是":"否"},{title:"是否默认",key:"is_default",align:"center",width:"130",render:t=>t.is_default?"是":"否"},{title:"备注",key:"remark",width:"140",align:"center",ellipsis:{tooltip:!0}},{title:"更新时间",key:"update_time",align:"center",width:"180"},{title:"操作",key:"action",align:"center",width:300,fixed:"right",render:t=>{let e;return s(we,{justify:"center"},{default:()=>[s(j,{type:"success",size:"small",onClick:K.bind(null,t.id)},P(e=c("common.modify"))?e:{default:()=>[e]}),s(_e,{"onPositive-click":H.bind(null,t.id)},{default:()=>[c("common.confirmDelete")],trigger:()=>{let l;return s(j,{type:"error",size:"small"},P(l=c("common.delete"))?l:{default:()=>[l]})}})]})}}];async function X(){var l;const{data:t}=await q(),e=(l=t.list)==null?void 0:l.map(g=>({...g,status:g.status?"开启":"隐藏",is_visit:g.is_visit?"是":"否",is_default:g.is_default?"是":"否"}));N({tableColumns:y,tableData:e??[],fileName:F})}const f=o([]),R=o([]);function Q(t){O.value=t,u.page=1,r()}function W(t,e){f.value=t,R.value=e}function Z(){k.value=U(D.value),_.value=!0}async function J(){p.value=!0;const{response:t}=await ke({id:f.value.join(",")});t.data.status===200&&(r(),f.value=[],b.success(c("common.deleteSuccess")))}async function Y(t){h.value=!0;const e={};t.up_where&&(e.up_where=t.up_where.join(","));const{response:l}=await Ne({...t,...e,status:t.status?1:0});l.data.status===200&&(r(),b.success(c("common.addSuccess")),_.value=!1),h.value=!1}async function $(t){x.value=!0;const e={};t.up_where&&(e.up_where=t.up_where.join(","));const{response:l}=await Se(C.value,{...t,...e,status:t.status?1:0});l.data.status===200&&(r(),b.success(c("common.modifySuccess")),w.value=!1),x.value=!1}function ee(t){u.page=t,r()}function te(t){u.page=1,u.pageSize=t,r()}r(),k.value=U(D.value),M.value=U(D.value);const ae=o(y.reduce((t,e)=>Number(t)+Number(e.width),0));return(t,e)=>{const l=ie,g=ue,le=xe,oe=ve,z=se,ne=me("resize");return ce(),pe("div",null,[s(oe,{title:"地区管理列表"},{"header-extra":B(()=>[s(l,{"export-all-loading":m(i),"onUpdate:exportAllLoading":e[0]||(e[0]=a=>A(i)?i.value=a:null),"refresh-button-loading":p.value,"onUpdate:refreshButtonLoading":e[1]||(e[1]=a=>p.value=a),"export-selected-disabled":f.value.length,"onUpdate:exportSelectedDisabled":e[2]||(e[2]=a=>f.value.length=a),"batch-delete-disabled":f.value.length,"onUpdate:batchDeleteDisabled":e[3]||(e[3]=a=>f.value.length=a),"export-filter-loading":m(i),"onUpdate:exportFilterLoading":e[4]||(e[4]=a=>A(i)?i.value=a:null),"export-selected-loading":m(i),"onUpdate:exportSelectedLoading":e[5]||(e[5]=a=>A(i)?i.value=a:null),onExportAll:X,onExportFilter:e[6]||(e[6]=a=>{m(N)({tableColumns:y,tableData:S.value.map(d=>({...d,status:d.status?"开启":"隐藏",is_visit:d.is_visit?"是":"否",is_default:d.is_default?"是":"否"})),fileName:F})}),onExportSelected:e[7]||(e[7]=a=>{m(N)({tableColumns:y,tableData:R.value.map(d=>({...d,status:d.status?"开启":"隐藏",is_visit:d.is_visit?"是":"否",is_default:d.is_default?"是":"否"})),fileName:F})}),onAdd:Z,onBatchDelete:J,onRefresh:r},null,8,["export-all-loading","refresh-button-loading","export-selected-disabled","batch-delete-disabled","export-filter-loading","export-selected-loading"])]),default:B(()=>[s(g,{"search-config":V.value,onOnSearch:Q},null,8,["search-config"]),fe(s(le,{remote:"",columns:y,data:S.value,loading:p.value,bordered:!1,style:{height:"620px"},"flex-height":"","scroll-x":ae.value,pagination:m(u),"row-key":a=>a.id,"render-cell":m(T),"onUpdate:checkedRowKeys":W,"onUpdate:page":ee,"onUpdate:pageSize":te},null,8,["data","loading","scroll-x","pagination","row-key","render-cell"]),[[ne]])]),_:1}),s(z,{"show-form-modal":_.value,"onUpdate:showFormModal":e[8]||(e[8]=a=>_.value=a),"is-async-shut-down":E.value,"onUpdate:isAsyncShutDown":e[9]||(e[9]=a=>E.value=a),"is-show-modal-loading":h.value,"onUpdate:isShowModalLoading":e[10]||(e[10]=a=>h.value=a),"modal-title":m(c)("common.add"),"modal-form-config":k.value,"form-rules":L,onOnSubmit:Y},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"]),s(z,{"show-form-modal":w.value,"onUpdate:showFormModal":e[11]||(e[11]=a=>w.value=a),"is-async-shut-down":I.value,"onUpdate:isAsyncShutDown":e[12]||(e[12]=a=>I.value=a),"is-show-modal-loading":x.value,"onUpdate:isShowModalLoading":e[13]||(e[13]=a=>x.value=a),"modal-title":m(c)("common.modify"),"modal-form-config":M.value,"form-rules":L,onOnSubmit:$},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"])])}}});export{Ke as default};
