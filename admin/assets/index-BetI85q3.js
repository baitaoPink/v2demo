import{_ as ge}from"./modal-form.vue_vue_type_script_setup_true_lang-tU3-hIUf.js";import{_ as ve}from"./search-header-BEaDoZth.js";import{_ as ye}from"./table-header-button-group.vue_vue_type_script_setup_true_lang-C-DfQuFh.js";import{d as _e,O as be,r as o,V as he,o as ke,b as Ne,f as u,w as i,W as we,h as g,g as d,$ as f,a8 as D,K as Se,B as V,N as Me,Z as Fe}from"./index-ClXc60Q8.js";import{u as De,k as Ce,l as Ie}from"./user-manage-NDgjaMcm.js";import{u as Ue}from"./custom-table-DLqvKnHZ.js";import{_ as xe,u as Ve}from"./custom-upload-D71Q5maP.js";import{_ as Re}from"./Flex-CESa1CD9.js";import{_ as Le}from"./DataTable-C2iu46cC.js";import"./multi-language-form.vue_vue_type_script_setup_true_lang-Ddf5h8QK.js";import"./Grid-xFIQOVry.js";import"./get-slot-Bk_rJcZu.js";import"./FormItem-DwRTykPn.js";import"./Spin-B3LvPL2m.js";import"./DatePicker-uVn2PEEJ.js";import"./TimePicker-Kfakx9-p.js";import"./Forward-BysZYGA1.js";import"./RadioGroup-C9SrcqWM.js";import"./Space-BoszUUx1.js";function H(v){return typeof v=="function"||Object.prototype.toString.call(v)==="[object Object]"&&!Fe(v)}const ea=_e({name:"fund-management_recharge-list",__name:"index",setup(v){const{pagination:s,renderCell:Q}=Ue(),{handleUpload:R}=Ve(),L=be(),c=o(!1),A=o([]),$=o({user_type:"1"}),W=o([{type:"Input",valueName:"search_key_user",label:"用户账号",placeholder:"请输入用户账号"},{type:"Select",valueName:"user_type",label:"用户类型",defaultOption:[{label:"正式用户",value:1},{label:"试玩用户",value:2}]},{type:"Input",valueName:"order_no",label:"订单号",placeholder:"请输入订单号"},{type:"Select",valueName:"audit_status",label:"状态",defaultOption:[{value:"1",label:"待审核"},{value:"2",label:"审核通过"},{value:"3",label:"审核不通过"}]},{type:"Datetime",valueName:"create_time",label:"创建时间",datetimeType:"daterange"},{type:"Datetime",valueName:"audit_time",label:"审核时间",datetimeType:"daterange"}]),y=o(0),_=o({}),B=o([]),O=o([]),E=o([]),T=o([]),C=o(!1),q=o(!0),b=o(!1),h=o(!1),z=o(!1),k=o(!1),N=o(!1),j=o(!0),w=o(!1),I=o(!1),Y=o([{type:"Input",valueName:"account",label:"用户账号"},{type:"Select",valueName:"money_id",label:"币种类型"},{type:"Input",valueName:"money",label:"充值金额/数量"},{type:"Input",valueName:"audit_remark",label:"备注"}]),Z={account:[{required:!0,message:"请输入用户账号",trigger:["blur"]}],money_id:[{type:"any",required:!0,message:"请选择币种类型",trigger:["blur"]}],money:[{required:!0,message:"请输入充值金额/数量",trigger:["blur"]}]},U=o([{type:"Input",valueName:"name",label:"用户账号",disabled:!0},{type:"Radio",valueName:"audit_status",label:"审核状态",disabled:!0,radioGroupOption:[{value:"2",label:"审核通过"}]},{type:"Input",valueName:"money",label:"充值金额/数量",disabled:!0},{type:"Input",valueName:"actual_money",label:"到账金额/数量"},{type:"Input",valueName:"audit_remark",label:"备注"}]),J={actual_money:[{required:!0,message:"请输入到账金额/数量",trigger:["blur"]}]},x=o([{type:"Input",valueName:"name",label:"用户账号",disabled:!0},{type:"Radio",valueName:"audit_status",label:"审核状态",disabled:!0,radioGroupOption:[{value:"3",label:"审核不通过"}]},{type:"Input",valueName:"money",label:"充值金额/数量",disabled:!0},{type:"Input",valueName:"audit_remark",label:"备注"}]),X={audit_remark:[{required:!0,message:"请输入拒绝原因",trigger:["blur"]}]},P=o([{type:"Input",valueName:"name",label:"用户账号",disabled:!0},{type:"Radio",valueName:"audit_status",label:"审核状态",disabled:!0,radioGroupOption:[{value:"2",label:"审核通过"},{value:"3",label:"审核不通过"}]},{type:"Input",valueName:"money",label:"充值金额/数量",disabled:!0},{type:"Input",valueName:"audit_remark",label:"备注",disabled:!0}]);async function r(){c.value=!0;const{data:a}=await De({page:s.page,limit:s.pageSize,...$.value});A.value=a.list,s.itemCount=a.count,c.value=!1}function ee(a){s.page=a,r()}function ae(a){s.page=1,s.pageSize=a,r()}async function te(a){U.value.forEach(e=>{e.defaultValue=null}),y.value=a.id,U.value.forEach(e=>{e.valueName==="name"?e.defaultValue=a.account_info.account:e.valueName==="audit_status"?e.defaultValue="2":e.defaultValue=a[e.valueName]}),h.value=!0}function le(a,e){y.value=a,x.value.forEach(l=>{l.defaultValue=null}),x.value.forEach(l=>{l.valueName==="name"?l.defaultValue=e.account_info.account:l.valueName==="audit_status"?l.defaultValue="3":l.defaultValue=e[l.valueName]}),N.value=!0}function oe(a){I.value=!0,P.value.forEach(e=>{e.valueName==="name"?e.defaultValue=a.account_info.account:e.valueName==="audit_remark"?e.defaultValue=a.audit_remark:e.valueName==="audit_status"?e.defaultValue=a.audit_status.toString():e.defaultValue=a[e.valueName]})}async function G(a){a.id=y.value,w.value=!0,k.value=!0;const{response:e}=await Ce({...a});e.data.status===200&&(r(),L.success(f("common.modifySuccess"))),h.value=!1,N.value=!1,w.value=!1,k.value=!1}const ue=[{title:"ID",key:"id",align:"center"},{title:"用户账号",key:"account_info.account",align:"center"},{title:"充值单号",key:"order_no",align:"center"},{title:"正式用户",key:"user_type",align:"center",render:a=>u(D,{type:a.user_type===1?"success":"error"},{default:()=>[a.user_type===1?"是":"否"]})},{title:"充值方式",key:"pay_type",align:"center"},{title:"币种类型",key:"money_type",align:"center"},{title:"充值金额/数量",key:"money",align:"center"},{title:"到账金额/数量",key:"actual_money",align:"center"},{title:"转账图片",key:"back_id_img",align:"center",render:a=>u("div",null,[a.receipt_img?u(Se,{width:"100",height:"60",src:a.receipt_img},null):""])},{title:"状态",key:"audit_status",align:"center",render:a=>fe(a.audit_status)},{title:"提交时间",key:"create_time",align:"center"},{title:"审核时间",key:"audit_time",align:"center"},{title:"操作",key:"action",align:"center",width:200,fixed:"right",render:a=>{let e,l;return u(Re,{justify:"center"},{default:()=>[u("div",null,[a.audit_status===1?u(V,{type:"success",size:"small",onClick:te.bind(null,a)},H(e=f("common.approved"))?e:{default:()=>[e]}):""]),u("div",null,[a.audit_status===1?u(V,{type:"error",size:"small",onClick:le.bind(null,a.id,a)},H(l=f("common.rejected"))?l:{default:()=>[l]}):""]),u("div",null,[a.audit_status!==1?u(V,{size:"small",onClick:oe.bind(null,a)},{default:()=>[d("查看详情")]}):""])]})}}],p=o([]),ne=o([]);function S(a){const e=new Date(a);let l=e.getMonth()+1;l=l<10?`0${l}`:l;let n=e.getDate();return n=n<10?`0${n}`:n,`${e.getFullYear().toString()}/${l}/${n}`}function ie(a){if(a.create_time){const e=S(a.create_time[0]),l=S(a.create_time[1]);a.create_time=`${e}-${l}`}if(a.audit_time){const e=S(a.audit_time[0]),l=S(a.audit_time[1]);a.audit_time=`${e}-${l}`}$.value=a,s.page=1,r()}function se(a,e){p.value=a,ne.value=e}async function de(a){b.value=!0;const{response:e}=await Ie({...a});e.data.status===200&&(r(),L.success(f("common.addSuccess"))),C.value=!1,b.value=!1}async function re({file:a,onFinish:e,onError:l,onProgress:n}){const m=await R({file:a,onFinish:e,onError:l,onProgress:n});m&&(_.value.front_id_img=m)}async function me({file:a,onFinish:e,onError:l,onProgress:n}){const m=await R({file:a,onFinish:e,onError:l,onProgress:n});m&&(_.value.back_id_img=m)}function K(a){y.value,Reflect.deleteProperty(_.value,a)}function fe(a){switch(a){case 1:return u(D,{type:"info"},{default:()=>[d("待审核")]});case 2:return u(D,{type:"success"},{default:()=>[d("审核通过")]});case 3:return u(D,{type:"error"},{default:()=>[d("审核不通过")]});default:return""}}return r(),(a,e)=>{const l=ye,n=ve,m=Le,ce=Me,M=xe,F=ge,pe=he("resize");return ke(),Ne("div",null,[u(ce,{title:"充值列表"},{"header-extra":i(()=>[u(l,{"refresh-button-loading":c.value,"onUpdate:refreshButtonLoading":e[0]||(e[0]=t=>c.value=t),"export-selected-disabled":p.value.length,"onUpdate:exportSelectedDisabled":e[1]||(e[1]=t=>p.value.length=t),"batch-delete-disabled":p.value.length,"onUpdate:batchDeleteDisabled":e[2]||(e[2]=t=>p.value.length=t),"is-export-all":!1,"is-export-filter":!1,"is-export-selected":!1,"is-batch-delete":!1,"is-add":!1,onRefresh:r},null,8,["refresh-button-loading","export-selected-disabled","batch-delete-disabled"])]),default:i(()=>[u(n,{"search-config":W.value,onOnSearch:ie},null,8,["search-config"]),we(u(m,{remote:"",columns:ue,data:A.value,pagination:g(s),loading:c.value,bordered:!1,style:{height:"560px"},"flex-height":"","scroll-x":2200,"row-key":t=>t.id,"render-cell":g(Q),"onUpdate:checkedRowKeys":se,"onUpdate:page":ee,"onUpdate:pageSize":ae},null,8,["data","pagination","loading","row-key","render-cell"]),[[pe]])]),_:1}),u(F,{"show-form-modal":C.value,"onUpdate:showFormModal":e[7]||(e[7]=t=>C.value=t),"is-async-shut-down":q.value,"onUpdate:isAsyncShutDown":e[8]||(e[8]=t=>q.value=t),"is-show-modal-loading":b.value,"onUpdate:isShowModalLoading":e[9]||(e[9]=t=>b.value=t),"modal-title":g(f)("common.add"),"modal-form-config":Y.value,"form-rules":Z,onOnSubmit:de},{front_id_img:i(()=>[u(M,{"file-list":B.value,"onUpdate:fileList":e[3]||(e[3]=t=>B.value=t),"list-type":"image-card",max:1,"custom-request":re,onRemove:e[4]||(e[4]=t=>K("front_id_img"))},{default:i(()=>e[19]||(e[19]=[d(" 点击上传 ")])),_:1},8,["file-list"])]),back_id_img:i(()=>[u(M,{"file-list":O.value,"onUpdate:fileList":e[5]||(e[5]=t=>O.value=t),"list-type":"image-card",max:1,"custom-request":me,onRemove:e[6]||(e[6]=t=>K("back_id_img"))},{default:i(()=>e[20]||(e[20]=[d(" 点击上传 ")])),_:1},8,["file-list"])]),_:1},8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"]),u(F,{"show-form-modal":h.value,"onUpdate:showFormModal":e[12]||(e[12]=t=>h.value=t),"is-async-shut-down":z.value,"onUpdate:isAsyncShutDown":e[13]||(e[13]=t=>z.value=t),"is-show-modal-loading":k.value,"onUpdate:isShowModalLoading":e[14]||(e[14]=t=>k.value=t),"modal-title":g(f)("common.examine"),"modal-form-config":U.value,"form-rules":J,onOnSubmit:G},{front_id_img:i(()=>[u(M,{"default-file-list":E.value,"onUpdate:defaultFileList":e[10]||(e[10]=t=>E.value=t),"list-type":"image-card",max:1,disabled:""},{default:i(()=>e[21]||(e[21]=[d(" 点击上传 ")])),_:1},8,["default-file-list"])]),back_id_img:i(()=>[u(M,{"default-file-list":T.value,"onUpdate:defaultFileList":e[11]||(e[11]=t=>T.value=t),"list-type":"image-card",max:1,disabled:""},{default:i(()=>e[22]||(e[22]=[d(" 点击上传 ")])),_:1},8,["default-file-list"])]),_:1},8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"]),u(F,{"show-form-modal":N.value,"onUpdate:showFormModal":e[15]||(e[15]=t=>N.value=t),"is-async-shut-down":j.value,"onUpdate:isAsyncShutDown":e[16]||(e[16]=t=>j.value=t),"is-show-modal-loading":w.value,"onUpdate:isShowModalLoading":e[17]||(e[17]=t=>w.value=t),"modal-title":g(f)("common.examine"),"modal-form-config":x.value,"form-rules":X,onOnSubmit:G},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"]),u(F,{"show-form-modal":I.value,"onUpdate:showFormModal":e[18]||(e[18]=t=>I.value=t),"modal-title":"查看详情","modal-form-config":P.value},null,8,["show-form-modal","modal-form-config"])])}}});export{ea as default};
