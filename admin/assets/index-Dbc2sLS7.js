import{d as te,O as ae,r as l,U as M,V as oe,o as le,b as se,f as a,w as P,W as ne,h as I,$ as r,_ as x,a8 as p,B as O,g as ie,N as re,Z as ue,br as s}from"./index-BhZbmApS.js";import{_ as de}from"./modal-form.vue_vue_type_script_setup_true_lang-j1132KrY.js";import{_ as ce}from"./search-header-DhS2HM_m.js";import{_ as me}from"./table-header-button-group.vue_vue_type_script_setup_true_lang-76gGQ2zm.js";import{a as pe,d as _e,s as ve,b as ge,c as fe}from"./system-manage-Ck2CvZXp.js";import{u as ye,N as he}from"./custom-table-yyPRBDqX.js";import{_ as C}from"./Flex-Xt9D36M-.js";import{_ as be}from"./DataTable-BUHP-Ae3.js";import"./multi-language-form.vue_vue_type_script_setup_true_lang-hwQCHruZ.js";import"./custom-upload-CT98ih7i.js";import"./Grid-BYDYsNmE.js";import"./get-slot-Bk_rJcZu.js";import"./FormItem-CazWVZB1.js";import"./Spin-CGYfGxVc.js";import"./DatePicker-udzJSNwE.js";import"./TimePicker-BJXcuAD9.js";import"./Forward-fZSWWEhd.js";import"./RadioGroup-BuESdM6z.js";import"./Space-DABBuydk.js";function F(_){return typeof _=="function"||Object.prototype.toString.call(_)==="[object Object]"&&!ue(_)}const Be=te({name:"system-manage_menu-manage",__name:"index",setup(_){const{renderCell:U}=ye(),w=ae(),B=["sort","is_header","is_show","is_show_path","auth_type"],u=l(0),E=l(0),D=l([]),v=l(!1),N=l(!0),g=l(!1),f=l(!1),k=l(!0),y=l(!1),h=l([{type:"Input",valueName:"menu_name",label:"名称"},{type:"Input",valueName:"controller",label:"控制器"},{type:"Input",valueName:"module",label:"模块"},{type:"Input",valueName:"action",label:"方法"},{type:"Input",valueName:"icon",label:"图标"},{type:"Input",valueName:"menu_path",label:"菜单路径"},{type:"Input",valueName:"api_url",label:"api"},{type:"Input",valueName:"methods",label:"http方法"},{type:"Input",valueName:"unique_auth",label:"唯一权限标识"},{type:"Radio",valueName:"is_header",label:"头部菜单",radioGroupOption:[{label:"是",value:1},{label:"否",value:0}]},{type:"Input Number",valueName:"sort",label:"排序"},{type:"Radio",valueName:"auth_type",label:"权限类型",radioGroupOption:[{label:"菜单",value:1},{label:"功能",value:0}]},{type:"Radio",valueName:"is_show",label:"显示",radioGroupOption:[{label:"是",value:1},{label:"否",value:0}]},{type:"Radio",valueName:"is_show_path",label:"显示路径",radioGroupOption:[{label:"是",value:1},{label:"否",value:0}]}]),A={menu_name:[{required:!0,message:"请输入菜单名称",trigger:["blur"]}],menu_path:[{required:!0,message:"请输入菜单路径",trigger:["blur"]}],controller:[{required:!0,message:"请输入控制器",trigger:["blur"]}],action:[{required:!0,message:"请输入方法名称",trigger:["blur"]}],auth_type:[{type:"number",required:!0,message:"请选择权限类型",trigger:["change"]}]},R=l([]),b=l([]),q=l([{type:"Select",valueName:"is_show",label:"显示",defaultOption:[{value:"1",label:"显示"},{value:"0",label:"隐藏"}]},{type:"Input",valueName:"role_name",label:"关键词",placeholder:"请输入角色名称"},{type:"Select",valueName:"auth_type",label:"权限类型",placeholder:"请选择权限类型",itemWidth:"260px",defaultOption:[{value:1,label:"菜单"},{value:0,label:"功能"}]}]),m=l([]),j=l([]),z=[{title:"ID",key:"id",align:"center"},{title:"菜单名称",key:"menu_name",align:"center"},{title:"模块名称",key:"module",align:"center"},{title:"图标",key:"icon",align:"center",render:e=>e.icon?a(x,{icon:e.icon,class:"text-icon"},null):"/"},{title:"排序",key:"sort",align:"center"},{title:"是否显示",key:"is_show",align:"center",render:e=>a(p,{type:e.is_show?"success":"info"},{default:()=>[e.is_show?"是":"否"]})},{title:"是否显示路径",key:"is_show_path",align:"center",render:e=>a(p,{type:e.is_show_path?"success":"info"},{default:()=>[e.is_show_path?"是":"否"]})},{title:"模块名称",key:"module",align:"center"},{title:"路由名称",key:"menu_path",align:"center"},{title:"路径",key:"path",align:"center"},{title:"权限类型",key:"auth_type",align:"center",render:e=>a(p,{type:e.auth_type===1?"success":"info"},{default:()=>[e.auth_type===1?"菜单":"功能"]})},{title:"顶部菜单",key:"is_header",align:"center",render:e=>a(p,{type:e.is_header?"success":"info"},{default:()=>[e.is_header?"是":"否"]})},{title:"标识",key:"unique_auth",align:"center"},{title:"是否删除",key:"auth_type",align:"center",render:e=>a(p,{type:e.auth_type?"error":"info"},{default:()=>[e.auth_type?"是":"否"]})},{title:"备注",key:"mark",align:"center"},{title:"操作",key:"action",align:"center",width:300,fixed:"right",render:e=>{let t;return a(C,{justify:"center"},{default:()=>[a("div",null,[e.auth_type===1?a(O,{type:"primary",size:"small",onClick:T.bind(null,e.id)},{default:()=>[ie("新增子菜单")]}):""]),a(O,{type:"success",size:"small",onClick:W.bind(null,e.id,e.pid)},F(t=r("common.modify"))?t:{default:()=>[t]}),a(he,{"onPositive-click":G.bind(null,e.id)},{default:()=>[r("common.confirmDelete")],trigger:()=>{let n;return a(O,{type:"error",size:"small"},F(n=r("common.delete"))?n:{default:()=>[n]})}})]})}}],L=l([]),d=l(!1),S=l({});function $(e){S.value=e,c()}async function c(){d.value=!0;const{data:e}=await pe(S.value);L.value=e,d.value=!1}async function G(e){d.value=!0;const{response:t}=await _e(e);t.data.status===200&&(c(),w.success(r("common.deleteSuccess")))}function H(e,t){m.value=e,j.value=t}function T(e){e?u.value=e:u.value=0,v.value=!0}async function K(e){g.value=!0;const t={};u.value&&(t.pid=u.value);const{response:n}=await ve({...e,...t});n.data.status===200&&(c(),w.success(r("common.addSuccess")),v.value=!1),g.value=!1}async function W(e,t){u.value=e,E.value=t;const{data:n}=await ge(e);b.value.forEach(i=>{typeof n[i.valueName]=="number"&&(B.includes(i.valueName)||(n[i.valueName]=`${n[i.valueName]}`)),i.defaultValue=n[i.valueName]}),console.log(b.value),f.value=!0}async function Q(e){y.value=!0;const t={pid:E.value},{response:n}=await fe(u.value,{...e,...t});n.data.status===200&&(c(),w.success(r("common.modifySuccess")),f.value=!1),y.value=!1}function Z(){console.log("弹窗关闭了"),E.value=0}function J(){const e=Object.assign({"/src/assets/svg-icon/activity.svg":()=>s(()=>import("./activity-B4XY664I.js"),[]),"/src/assets/svg-icon/at-sign.svg":()=>s(()=>import("./at-sign-DvqQw7Qx.js"),[]),"/src/assets/svg-icon/avatar.svg":()=>s(()=>import("./avatar-ISXBCYbh.js"),[]),"/src/assets/svg-icon/banner.svg":()=>s(()=>import("./banner-DYhbe0Tu.js"),[]),"/src/assets/svg-icon/cast.svg":()=>s(()=>import("./cast-n3EmpXB4.js"),[]),"/src/assets/svg-icon/chrome.svg":()=>s(()=>import("./chrome-BM_Le6p_.js"),[]),"/src/assets/svg-icon/copy.svg":()=>s(()=>import("./copy-BsYpLlfM.js"),[]),"/src/assets/svg-icon/custom-icon.svg":()=>s(()=>import("./custom-icon-857Ak5pp.js"),[]),"/src/assets/svg-icon/empty-data.svg":()=>s(()=>import("./empty-data-DHOwFqSV.js"),[]),"/src/assets/svg-icon/expectation.svg":()=>s(()=>import("./expectation-J109LlPf.js"),[]),"/src/assets/svg-icon/heart.svg":()=>s(()=>import("./heart-DOH2U7VV.js"),[]),"/src/assets/svg-icon/logo.svg":()=>s(()=>import("./logo-BeLY4cv9.js"),[]),"/src/assets/svg-icon/network-error.svg":()=>s(()=>import("./network-error-GvKH23td.js"),[]),"/src/assets/svg-icon/no-icon.svg":()=>s(()=>import("./no-icon-Dxf6UbZK.js"),[]),"/src/assets/svg-icon/no-permission.svg":()=>s(()=>import("./no-permission-DlBNg4Hy.js"),[]),"/src/assets/svg-icon/not-found.svg":()=>s(()=>import("./not-found-CumHtE2z.js"),[]),"/src/assets/svg-icon/service-error.svg":()=>s(()=>import("./service-error-CSkmuNIG.js"),[]),"/src/assets/svg-icon/wind.svg":()=>s(()=>import("./wind-Dy5zdHKW.js"),[])});for(const t in e)Object.hasOwn(e,t)&&D.value.push(t.split("/").pop().split(".svg")[0]);h.value[4].defaultOption=D.value.map(t=>({label:t,value:t})),h.value[4].selectRenderLabel=t=>a(C,null,{default:()=>[a(x,{localIcon:t.label,class:"text-icon"},null),a("span",null,[t.label])]})}return c(),J(),R.value=M(h.value),b.value=M(h.value),(e,t)=>{const n=me,i=ce,X=be,Y=re,V=de,ee=oe("resize");return le(),se("div",null,[a(Y,{title:"菜单管理"},{"header-extra":P(()=>[a(n,{"refresh-button-loading":d.value,"onUpdate:refreshButtonLoading":t[0]||(t[0]=o=>d.value=o),"export-selected-disabled":m.value.length,"onUpdate:exportSelectedDisabled":t[1]||(t[1]=o=>m.value.length=o),"batch-delete-disabled":m.value.length,"onUpdate:batchDeleteDisabled":t[2]||(t[2]=o=>m.value.length=o),"is-export-all":!1,"is-export-filter":!1,"is-export-selected":!1,"is-batch-delete":!1,onAdd:T,onRefresh:c},null,8,["refresh-button-loading","export-selected-disabled","batch-delete-disabled"])]),default:P(()=>[a(i,{"search-config":q.value,onOnSearch:$},null,8,["search-config"]),ne(a(X,{columns:z,data:L.value,loading:d.value,bordered:!1,style:{height:"620px"},"flex-height":"","scroll-x":1e3,pagination:{pageSize:10},"row-key":o=>o.id,"render-cell":I(U),"onUpdate:checkedRowKeys":H},null,8,["data","loading","row-key","render-cell"]),[[ee]])]),_:1}),a(V,{"show-form-modal":v.value,"onUpdate:showFormModal":t[3]||(t[3]=o=>v.value=o),"is-async-shut-down":N.value,"onUpdate:isAsyncShutDown":t[4]||(t[4]=o=>N.value=o),"is-show-modal-loading":g.value,"onUpdate:isShowModalLoading":t[5]||(t[5]=o=>g.value=o),"modal-title":I(r)("common.add"),"modal-form-config":R.value,"modal-width":"800","grid-gi-span":12,"form-rules":A,onOnSubmit:K},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"]),a(V,{"show-form-modal":f.value,"onUpdate:showFormModal":t[6]||(t[6]=o=>f.value=o),"is-async-shut-down":k.value,"onUpdate:isAsyncShutDown":t[7]||(t[7]=o=>k.value=o),"is-show-modal-loading":y.value,"onUpdate:isShowModalLoading":t[8]||(t[8]=o=>y.value=o),"modal-title":I(r)("common.modify"),"modal-form-config":b.value,"modal-width":"800","grid-gi-span":12,"form-rules":A,onOnSubmit:Q,onOnClose:Z},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"])])}}});export{Be as default};
