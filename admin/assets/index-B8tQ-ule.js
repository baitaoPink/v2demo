import{_ as B}from"./search-header-BEaDoZth.js";import{_ as P}from"./table-header-button-group.vue_vue_type_script_setup_true_lang-C-DfQuFh.js";import{a0 as $,d as j,r as o,U as _,V as H,o as K,b as V,f as g,w as k,h as i,a1 as b,W as q,a2 as N,N as G}from"./index-ClXc60Q8.js";import{u as O}from"./custom-table-DLqvKnHZ.js";import{u as Q}from"./exportExcel-BkPY8vZC.js";import{_ as W}from"./DataTable-C2iu46cC.js";import"./FormItem-DwRTykPn.js";import"./DatePicker-uVn2PEEJ.js";import"./TimePicker-Kfakx9-p.js";import"./Forward-BysZYGA1.js";import"./Flex-CESa1CD9.js";import"./get-slot-Bk_rJcZu.js";import"./RadioGroup-C9SrcqWM.js";function S(D){return $({url:"/system/user/partnerSalaryLog",params:D})}const h="合伙人收益业绩列表.xlsx",pe=j({name:"user-manage_revenue-performance",__name:"index",setup(D){const{pagination:r,renderCell:T}=O(),{exportExcel:f,exportLoading:n}=Q(),d=o(!1),y=o([]),c=o(),E=o([{type:"Input",valueName:"search_key_user",label:"账号/姓名",placeholder:"请输入账号/姓名"},{type:"Datetime",datetimeType:"datetimerange",valueName:"settle_time",label:"结算时间"}]),w=o([{type:"Input",valueName:"number",label:"达到人数"},{type:"Input",valueName:"amount",label:"补贴金额"}]),U=o([]),L=o([]);async function p(){var e,l;d.value=!0;const{data:t}=await S({...c.value,settle_time:Array.isArray((e=c.value)==null?void 0:e.settle_time)?(l=c.value)==null?void 0:l.settle_time.map(s=>N(s).format("YYYY/MM/DD")).join("-"):void 0,page:r.page,limit:r.pageSize});y.value=t.list,r.itemCount=t.count,d.value=!1}const m=[{type:"selection"},{title:"Id",key:"id",align:"center",width:"100"},{title:"用户Id",key:"uid",align:"center",width:"120"},{title:"用户名称",key:"user",align:"center",width:"120",render:t=>{var e;return((e=t.user)==null?void 0:e.account)||""}},{title:"类型",key:"type",align:"center",render:t=>({1:"团队分成",2:"周工资",3:"补贴"})[t.type],width:"120"},{title:"所属货币类型",key:"money_type",align:"center",width:"200"},{title:"金额",key:"price",align:"center",width:"120",render:t=>t.price||""},{title:"是否结算",key:"is_settle",align:"center",width:"200",render:t=>({1:"是",2:"否"})[t.is_settle]},{title:"结算时间",key:"settle_time",align:"center",width:"200",render:t=>t.settle_time?N(t.settle_time).format("YYYY-MM-DD"):""},{title:"变动说明",key:"desc",align:"center",width:"200"}];async function R(){const{data:t}=await S();f({tableColumns:m,tableData:x(t.list),fileName:h})}function x(t){const e=_(t);return e.forEach(l=>{var s;if(Reflect.has(l,"user")&&(l.user=((s=l.user)==null?void 0:s.account)||"/"),Reflect.has(l,"type")){const v={1:"团队分成",2:"周工资",3:"补贴"};l.type=v[l.type]}Reflect.has(l,"is_settle")&&(l.is_settle=l.is_settle===1?"是":"否")}),e}const u=o([]),C=o([]);function Y(t){c.value=t,r.page=1,p()}function M(t,e){u.value=t,C.value=e}function z(t){r.page=t,p()}function A(t){r.page=1,r.pageSize=t,p()}return p(),U.value=_(w.value),L.value=_(w.value),(t,e)=>{const l=P,s=B,v=W,F=G,I=H("resize");return K(),V("div",null,[g(F,{title:"合伙人收益业绩列表"},{"header-extra":k(()=>[g(l,{"export-all-loading":i(n),"onUpdate:exportAllLoading":e[0]||(e[0]=a=>b(n)?n.value=a:null),"refresh-button-loading":d.value,"onUpdate:refreshButtonLoading":e[1]||(e[1]=a=>d.value=a),"export-selected-disabled":u.value.length,"onUpdate:exportSelectedDisabled":e[2]||(e[2]=a=>u.value.length=a),"batch-delete-disabled":u.value.length,"onUpdate:batchDeleteDisabled":e[3]||(e[3]=a=>u.value.length=a),"export-filter-loading":i(n),"onUpdate:exportFilterLoading":e[4]||(e[4]=a=>b(n)?n.value=a:null),"export-selected-loading":i(n),"onUpdate:exportSelectedLoading":e[5]||(e[5]=a=>b(n)?n.value=a:null),"is-batch-delete":!1,"is-add":!1,onExportAll:R,onExportFilter:e[6]||(e[6]=a=>i(f)({tableColumns:m,tableData:x(y.value),fileName:h})),onExportSelected:e[7]||(e[7]=a=>i(f)({tableColumns:m,tableData:x(C.value),fileName:h})),onRefresh:p},null,8,["export-all-loading","refresh-button-loading","export-selected-disabled","batch-delete-disabled","export-filter-loading","export-selected-loading"])]),default:k(()=>[g(s,{"search-config":E.value,onOnSearch:Y},null,8,["search-config"]),q(g(v,{remote:"",columns:m,data:y.value,loading:d.value,bordered:!1,style:{height:"620px"},"flex-height":"","scroll-x":1e3,pagination:i(r),"row-key":a=>a.id,"render-cell":i(T),"onUpdate:checkedRowKeys":M,"onUpdate:page":z,"onUpdate:pageSize":A},null,8,["data","loading","pagination","row-key","render-cell"]),[[I]])]),_:1})])}}});export{pe as default};
