import{_ as re}from"./modal-form.vue_vue_type_script_setup_true_lang-Cjcae1c8.js";import{_ as ue}from"./search-header-Y2BEBubG.js";import{_ as de}from"./table-header-button-group.vue_vue_type_script_setup_true_lang-CHhYnPru.js";import{a0 as y,d as me,O as ce,r as l,U as Y,V as pe,o as ge,b as fe,f as s,w as $,h as d,a1 as T,W as ve,$ as m,a2 as q,X as ye,B as P,N as be,Z as he}from"./index-B8uXi1CT.js";import{e as _e}from"./money-setting-aYZn9k11.js";import{u as we,N as xe}from"./custom-table-CIoqtwR0.js";import{u as Se}from"./exportExcel-BsCKL_7l.js";import{_ as De}from"./Flex-Dd7uI-X0.js";import{_ as Me}from"./DataTable-JXNMHbFE.js";import"./multi-language-form.vue_vue_type_script_setup_true_lang-BZrBw3Pt.js";import"./custom-upload-TU2i3RYC.js";import"./Grid-8XO9VEVU.js";import"./get-slot-Bk_rJcZu.js";import"./FormItem-BkyFAWg2.js";import"./Spin-CPPIHThd.js";import"./DatePicker-BJOmBFQz.js";import"./TimePicker-qmmZBHrw.js";import"./Forward-zlCbBpdq.js";import"./RadioGroup-CyWpGGc2.js";import"./Space-BomAnmEk.js";function R(n){return y({url:"/system/setting/trading_day",params:n})}function Ne(n){return y({url:"/system/setting/trading_day",method:"post",data:n})}function ke(n,i){return y({url:`/system/setting/trading_day/${n}`,method:"put",data:i})}function Ce(n){return y({url:`/system/setting/trading_day/${n}`,method:"delete"})}function Ue(n){return y({url:"/system/setting/trading_day/batchDelete",method:"post",params:n})}function V(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!he(n)}const A="交易日列表.xlsx",Qe=me({name:"system-config_trading-day",__name:"index",setup(n){const{pagination:i,renderCell:H}=we(),b=ce(),{exportExcel:N,exportLoading:r}=Se(),p=l(!1),k=l([]),h=l(),C=l([{type:"Input",valueName:"exchange_name",label:"交易所"},{type:"Select",valueName:"market_type",label:"市场标识",placeholder:"请选择市场标识",selectFilter:!0},{type:"Select",valueName:"status",label:"状态",defaultOption:[{value:1,label:"有效"},{value:2,label:"无效"}]},{type:"Datetime",datetimeType:"daterange",valueName:"date",label:"交易日"}]),_=l(0),w=l(!1),F=l(!0),x=l(!1),I=l({}),S=l(!1),L=l(!0),D=l(!1),E=l([{type:"Input",valueName:"exchange_name",label:"交易所"},{type:"Select",valueName:"market_type",label:"市场标识",placeholder:"请选择市场标识",selectFilter:!0},{type:"Select",valueName:"status",label:"状态",defaultOption:[{value:1,label:"有效"},{value:2,label:"无效"}]}]),U=l([]),M=l([]),O={name:[{required:!0,message:"请输入地区",trigger:["blur"]}],name_en:[{required:!0,message:"请输入地区",trigger:["blur"]}],country_code:[{required:!0,message:"请输入国家编码",trigger:["blur"]}],area_code:[{required:!0,type:"number",message:"请输入区域编码",trigger:["blur"]}],time_diff:[{required:!0,type:"number",message:"请输入时差",trigger:["blur"]}]};async function u(){var e,o;p.value=!0;const{data:t}=await R({...h.value,page:i.page,limit:i.pageSize,date:Array.isArray((e=h.value)==null?void 0:e.date)?(o=h.value)==null?void 0:o.date.map(c=>q(c).format("YYYY/MM/DD")).join("-"):void 0});k.value=t.list,i.itemCount=t.count,p.value=!1}async function K(t){p.value=!0;const{response:e}=await Ce(t);e.data.status===200&&(u(),b.success(m("common.deleteSuccess")))}async function X(t){_.value=t.id,I.value=t,M.value.forEach(e=>{e.defaultValue=t[e.valueName]}),S.value=!0}const f=[{type:"selection"},{title:"市场标识",key:"market_type",align:"center",width:"120"},{title:"交易所",key:"exchange_name",align:"center",width:"100"},{title:"状态",key:"status",align:"center",width:"100",render:t=>{const e=l(t.status===1);return s(ye,{value:e.value,"onUpdate:value":[o=>e.value=o,o=>{t.status=o?1:2,_.value=t.id,z({...t,status:o})}]},null)}},{title:"创建时间",key:"create_time",align:"center",width:"160",render:t=>t.create_time?q(String(t.create_time)).format("YYYY-MM-DD HH:mm:ss"):""},{title:"操作",key:"action",align:"center",width:300,fixed:"right",render:t=>{let e;return s(De,{justify:"center"},{default:()=>[s(P,{type:"success",size:"small",onClick:X.bind(null,t)},V(e=m("common.modify"))?e:{default:()=>[e]}),s(xe,{"onPositive-click":K.bind(null,t.id)},{default:()=>[m("common.confirmDelete")],trigger:()=>{let o;return s(P,{type:"error",size:"small"},V(o=m("common.delete"))?o:{default:()=>[o]})}})]})}}];async function G(){var o;const{data:t}=await R(),e=(o=t.list)==null?void 0:o.map(c=>({...c,status:c.status===1?"有效":"无效"}));N({tableColumns:f,tableData:e??[],fileName:A})}const g=l([]),j=l([]);function Q(t){h.value=t,i.page=1,u()}function W(t,e){g.value=t,j.value=e}function Z(){w.value=!0}async function J(){p.value=!0;const{response:t}=await Ue({id:g.value.join(",")});t.data.status===200&&(u(),g.value=[],b.success(m("common.deleteSuccess")))}async function ee(t){x.value=!0;const e={};t.up_where&&(e.up_where=t.up_where.join(","));const{response:o}=await Ne({...t,...e});o.data.status===200&&(u(),b.success(m("common.addSuccess")),w.value=!1),x.value=!1}async function z(t){D.value=!0;const e={};t.up_where&&(e.up_where=t.up_where.join(","));const{response:o}=await ke(_.value,{...t,...e,id:_.value});o.data.status===200&&(u(),b.success(m("common.modifySuccess")),S.value=!1),D.value=!1}function te(t){i.page=t,u()}function ae(t){i.page=1,i.pageSize=t,u()}async function oe(){const{data:t}=await _e(),e=t.list.map(o=>({label:o.name,value:o.market_type}));C.value.forEach((o,c)=>{o.valueName==="market_type"&&(C.value[c].defaultOption=e)}),U.value[1].defaultOption=e,M.value[1].defaultOption=e}oe(),u(),U.value=Y(E.value),M.value=Y(E.value);const le=l(f.reduce((t,e)=>Number(t)+Number(e.width),0));return(t,e)=>{const o=de,c=ue,ne=Me,se=be,B=re,ie=pe("resize");return ge(),fe("div",null,[s(se,{title:"交易日列表"},{"header-extra":$(()=>[s(o,{"export-all-loading":d(r),"onUpdate:exportAllLoading":e[0]||(e[0]=a=>T(r)?r.value=a:null),"refresh-button-loading":p.value,"onUpdate:refreshButtonLoading":e[1]||(e[1]=a=>p.value=a),"export-selected-disabled":g.value.length,"onUpdate:exportSelectedDisabled":e[2]||(e[2]=a=>g.value.length=a),"batch-delete-disabled":g.value.length,"onUpdate:batchDeleteDisabled":e[3]||(e[3]=a=>g.value.length=a),"export-filter-loading":d(r),"onUpdate:exportFilterLoading":e[4]||(e[4]=a=>T(r)?r.value=a:null),"export-selected-loading":d(r),"onUpdate:exportSelectedLoading":e[5]||(e[5]=a=>T(r)?r.value=a:null),onExportAll:G,onExportFilter:e[6]||(e[6]=a=>{d(N)({tableColumns:f,tableData:k.value.map(v=>({...v,status:v.status===1?"有效":"无效"})),fileName:A})}),onExportSelected:e[7]||(e[7]=a=>{d(N)({tableColumns:f,tableData:j.value.map(v=>({...v,status:v.status===1?"有效":"无效"})),fileName:A})}),onAdd:Z,onBatchDelete:J,onRefresh:u},null,8,["export-all-loading","refresh-button-loading","export-selected-disabled","batch-delete-disabled","export-filter-loading","export-selected-loading"])]),default:$(()=>[s(c,{"search-config":C.value,onOnSearch:Q},null,8,["search-config"]),ve(s(ne,{remote:"",columns:f,data:k.value,loading:p.value,bordered:!1,style:{height:"620px"},"flex-height":"","scroll-x":le.value,pagination:d(i),"row-key":a=>a.id,"render-cell":d(H),"onUpdate:checkedRowKeys":W,"onUpdate:page":te,"onUpdate:pageSize":ae},null,8,["data","loading","scroll-x","pagination","row-key","render-cell"]),[[ie]])]),_:1}),s(B,{"show-form-modal":w.value,"onUpdate:showFormModal":e[8]||(e[8]=a=>w.value=a),"is-async-shut-down":F.value,"onUpdate:isAsyncShutDown":e[9]||(e[9]=a=>F.value=a),"is-show-modal-loading":x.value,"onUpdate:isShowModalLoading":e[10]||(e[10]=a=>x.value=a),"modal-title":d(m)("common.add"),"modal-form-config":U.value,"form-rules":O,onOnSubmit:ee},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"]),s(B,{"show-form-modal":S.value,"onUpdate:showFormModal":e[11]||(e[11]=a=>S.value=a),"is-async-shut-down":L.value,"onUpdate:isAsyncShutDown":e[12]||(e[12]=a=>L.value=a),"is-show-modal-loading":D.value,"onUpdate:isShowModalLoading":e[13]||(e[13]=a=>D.value=a),"modal-title":d(m)("common.modify"),"modal-form-config":M.value,"form-rules":O,onOnSubmit:z},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"])])}}});export{Qe as default};
