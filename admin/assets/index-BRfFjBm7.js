import{_ as Q}from"./search-header-Y2BEBubG.js";import{_ as W}from"./table-header-button-group.vue_vue_type_script_setup_true_lang-CHhYnPru.js";import{d as F,bg as J,bh as S,r as o,o as P,c as X,w as E,f as n,h as p,V as Z,b as ee,a1 as k,e as te,W as ae,B as le,g as C,a2 as ne,U as oe,a8 as M,N as ie}from"./index-B8uXi1CT.js";import{q as R,r as se}from"./system-configuration-OGFzPDtW.js";import{u as z}from"./custom-table-CIoqtwR0.js";import{u as re}from"./exportExcel-BsCKL_7l.js";import{_ as de}from"./modal-form.vue_vue_type_script_setup_true_lang-Cjcae1c8.js";import{_ as $}from"./DataTable-JXNMHbFE.js";import{_ as ue}from"./Flex-Dd7uI-X0.js";import"./FormItem-BkyFAWg2.js";import"./DatePicker-BJOmBFQz.js";import"./TimePicker-qmmZBHrw.js";import"./Forward-zlCbBpdq.js";import"./multi-language-form.vue_vue_type_script_setup_true_lang-BZrBw3Pt.js";import"./custom-upload-TU2i3RYC.js";import"./Grid-8XO9VEVU.js";import"./get-slot-Bk_rJcZu.js";import"./Spin-CPPIHThd.js";import"./RadioGroup-CyWpGGc2.js";import"./Space-BomAnmEk.js";const pe=F({__name:"dividend-table",props:{isShowComponent:{type:Boolean,default:!1},isShowComponentModifiers:{},listData:{default:[]},listDataModifiers:{},tableLoading:{type:Boolean,default:!1},tableLoadingModifiers:{},pagination:{default:()=>({})},paginationModifiers:{}},emits:J(["getTableList"],["update:isShowComponent","update:listData","update:tableLoading","update:pagination"]),setup(y,{emit:r}){const{renderCell:L}=z(),v=r,i=S(y,"isShowComponent"),U=S(y,"listData"),b=S(y,"tableLoading"),d=S(y,"pagination"),x=o(!1),c=o(!1),h=o([{type:"Slot",valueName:"list",slotName:"list"}]),_=[{title:"收益",key:"dividend_amount",align:"center"},{title:"时间",key:"create_time",align:"center"}];function w(g){d.value.page=g,v("getTableList")}function D(g){d.value.page=1,d.value.pageSize=g,v("getTableList")}return(g,s)=>{const m=$,f=de;return P(),X(f,{"show-form-modal":i.value,"onUpdate:showFormModal":s[0]||(s[0]=u=>i.value=u),"is-async-shut-down":x.value,"onUpdate:isAsyncShutDown":s[1]||(s[1]=u=>x.value=u),"is-show-modal-loading":c.value,"onUpdate:isShowModalLoading":s[2]||(s[2]=u=>c.value=u),"modal-title":"分红","modal-form-config":h.value,"bottom-visible":!1},{list:E(()=>[n(m,{remote:"",columns:_,data:U.value,loading:b.value,bordered:!1,"max-height":600,"scroll-x":600,pagination:d.value,"row-key":u=>u.id,"render-cell":p(L),"onUpdate:page":w,"onUpdate:pageSize":D},null,8,["data","loading","pagination","row-key","render-cell"])]),_:1},8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-form-config"])}}}),B="产品订单列表.xlsx",Be=F({name:"system-configuration_financial-products_balance-order",__name:"index",setup(y){const{pagination:r,renderCell:L}=z(),{exportExcel:v,exportLoading:i}=re(),U=o([{type:"Input",valueName:"search_key_user",label:"账号/姓名",placeholder:"请输入账号/姓名"},{type:"Select",valueName:"order_status",label:"状态",placeholder:"请选择状态",defaultOption:[{value:"1",label:"收益中"},{value:"2",label:"已完成"},{value:"3",label:"已关闭"}]},{type:"Select",valueName:"is_user_svip",label:"会员身份",placeholder:"请选择会员身份",defaultOption:[{value:"2",label:"普通"},{value:"1",label:"Svip"}]},{type:"Input",valueName:"order_no",label:"订单号",placeholder:"请输入订单号"},{type:"Datetime",valueName:"create_time",label:"购买时间",datetimeType:"datetimerange"}]),b=[{type:"selection"},{title:"账号/姓名",key:"user",align:"center",render:t=>n("div",null,[n("p",null,[t.user?t.user.account:""]),n("p",null,[t.user?t.user.real_name:""])])},{title:"Svip等级",key:"level",align:"center",render:t=>t.user?t.user.svip_id:"/"},{title:"项目标题",key:"title",align:"center"},{title:"购买金额",key:"amount",align:"center"},{title:"收益",key:"profit",align:"center"},{title:"已获得收益金额",key:"has_profit_amount",align:"center"},{title:"加入时间",key:"create_time",align:"center"},{title:"上次分红时间",key:"last_dividend_time",align:"center"},{title:"下次分红时间",key:"next_dividend_time",align:"center"},{title:"到期时间",key:"expire_time",align:"center"},{title:"状态",key:"order_status",align:"center",render:t=>I(t.order_status)},{title:"操作",key:"action",align:"center",width:120,fixed:"right",render:t=>n(ue,{justify:"center"},{default:()=>[n(le,{type:"success",size:"small",onClick:G.bind(null,t.id)},{default:()=>[C("查看分红")]})]})}],d=o([]),x=o([]),c=o(!1),h=o([]),_=o({}),w=o(0),D=o(!1),g=o([]),s=o(!1),{pagination:m}=z();async function f(){var e,l;c.value=!0;const{data:t}=await R({..._.value,create_time:Array.isArray((e=_.value)==null?void 0:e.create_time)?(l=_.value)==null?void 0:l.create_time.map(T=>ne(T).format("YYYY/MM/DD")).join("-"):void 0,page:r.page,limit:r.pageSize});h.value=t.list,r.itemCount=t.count,c.value=!1}function u(t){r.page=t,f()}function O(t){r.page=1,r.pageSize=t,f()}async function V(){const{data:t}=await R();v({tableColumns:b,tableData:N(t.list),fileName:B})}function N(t){const e=oe(t);return e.forEach(l=>{if(Reflect.has(l,"user")&&(l.user=`
      账号:${l.user?l.user.account:"/"};
      姓名:${l.user?l.user.real_name:"/"};`),Reflect.has(l,"order_status"))switch(l.order_status){case 1:l.order_status="收益中";break;case 2:l.order_status="已完成";break;case 3:l.order_status="已关闭";break;default:l.order_status="/";break}}),e}function Y(t){const e={...t};t.time&&(e.start_create_time=t.time[0],e.end_create_time=t.time[1],Reflect.deleteProperty(e,"time")),_.value=e,r.page=1,f()}function j(t,e){d.value=t,x.value=e}function I(t){switch(t){case 1:return n(M,{type:"primary"},{default:()=>[C("收益中")]});case 2:return n(M,{type:"success"},{default:()=>[C("已完成")]});case 3:return n(M,null,{default:()=>[C("已关闭")]});default:return"/"}}async function G(t){w.value=t,await A(),D.value=!0}async function A(){s.value=!0;const{data:t}=await se(w.value,{page:m.page,limit:m.pageSize});g.value=t.list,m.itemCount=t.count,s.value=!1}return f(),(t,e)=>{const l=W,T=Q,H=$,K=ie,q=Z("resize");return P(),ee("div",null,[n(K,{title:"产品订单"},{"header-extra":E(()=>[n(l,{"export-all-loading":p(i),"onUpdate:exportAllLoading":e[0]||(e[0]=a=>k(i)?i.value=a:null),"export-filter-loading":p(i),"onUpdate:exportFilterLoading":e[1]||(e[1]=a=>k(i)?i.value=a:null),"export-selected-loading":p(i),"onUpdate:exportSelectedLoading":e[2]||(e[2]=a=>k(i)?i.value=a:null),"refresh-button-loading":c.value,"onUpdate:refreshButtonLoading":e[3]||(e[3]=a=>c.value=a),"export-selected-disabled":d.value.length,"onUpdate:exportSelectedDisabled":e[4]||(e[4]=a=>d.value.length=a),"batch-delete-disabled":d.value.length,"onUpdate:batchDeleteDisabled":e[5]||(e[5]=a=>d.value.length=a),"is-export-all":!0,"is-export-filter":!0,"is-export-selected":!0,"is-batch-delete":!1,"is-add":!1,onExportAll:V,onExportFilter:e[6]||(e[6]=a=>p(v)({tableColumns:b,tableData:N(h.value),fileName:B})),onExportSelected:e[7]||(e[7]=a=>p(v)({tableColumns:b,tableData:N(x.value),fileName:B})),onRefresh:f},null,8,["export-all-loading","export-filter-loading","export-selected-loading","refresh-button-loading","export-selected-disabled","batch-delete-disabled"])]),default:E(()=>[n(T,{"search-config":U.value,onOnSearch:Y},null,8,["search-config"]),e[12]||(e[12]=te("div",{class:"h-10px"},null,-1)),ae(n(H,{remote:"",columns:b,data:h.value,pagination:p(r),loading:c.value,bordered:!1,style:{height:"580px"},"flex-height":"","scroll-x":2200,"row-key":a=>a.id,"render-cell":p(L),"onUpdate:checkedRowKeys":j,"onUpdate:page":u,"onUpdate:pageSize":O},null,8,["data","pagination","loading","row-key","render-cell"]),[[q]])]),_:1}),n(pe,{"is-show-component":D.value,"onUpdate:isShowComponent":e[8]||(e[8]=a=>D.value=a),"list-data":g.value,"onUpdate:listData":e[9]||(e[9]=a=>g.value=a),pagination:p(m),"onUpdate:pagination":e[10]||(e[10]=a=>k(m)?m.value=a:null),"list-loading":s.value,"onUpdate:listLoading":e[11]||(e[11]=a=>s.value=a),onGetTableList:A},null,8,["is-show-component","list-data","pagination","list-loading"])])}}});export{Be as default};
