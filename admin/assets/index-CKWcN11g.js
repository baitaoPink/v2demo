import{r as E,a as y,k as j,m as H,d as $,n as O,o as N,b as L,e as p,$ as n,p as Z,q as J,s as M,c as F,w as i,f as e,h as s,g as P,t as x,v as G,l as k,D as X,E as Q,x as U,y as Y,B,z as ee,u as V,A as oe,C as ne,F as te,T as le,G as ae,H as se,I as z,J as re,K as ce,L as ie,M as de,N as ue}from"./index-hovKqFL_.js";import{_ as q,a as I}from"./FormItem-_LcKmAs5.js";import{_ as A}from"./Space-D3aac8v1.js";import"./get-slot-Bk_rJcZu.js";function pe(m){const u=E(0),r=y(()=>Math.ceil(u.value/60)),l=y(()=>u.value>0),{pause:c,resume:v}=j(()=>{u.value>0?u.value-=1:c()},{immediate:!1});function _(C=m){u.value=60*C,v()}function t(){u.value=0,c()}return H(()=>{c()}),{count:r,isCounting:l,start:_,stop:t}}const me={class:"absolute-lt z-1 size-full overflow-hidden"},fe={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},ge={height:"1337",width:"1337"},_e={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},he=["stop-color"],we=["stop-color"],ve={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},Ce={height:"896",width:"967.8852157128662"},ye={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},xe=["stop-color"],be=["stop-color"],Ne=$({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(m){const h=m,u=y(()=>O(h.themeColor,200)),r=y(()=>O(h.themeColor,500));return(l,c)=>(N(),L("div",me,[p("div",fe,[(N(),L("svg",ge,[p("defs",null,[c[0]||(c[0]=p("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),p("linearGradient",_e,[p("stop",{offset:"0","stop-color":u.value,"stop-opacity":"1"},null,8,he),p("stop",{offset:"1","stop-color":r.value,"stop-opacity":"1"},null,8,we)])]),c[1]||(c[1]=p("g",{opacity:"1"},[p("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),p("div",ve,[(N(),L("svg",Ce,[p("defs",null,[c[2]||(c[2]=p("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),p("linearGradient",ye,[p("stop",{offset:"0","stop-color":r.value,"stop-opacity":"1"},null,8,xe),p("stop",{offset:"1","stop-color":u.value,"stop-opacity":"1"},null,8,be)])]),c[3]||(c[3]=p("g",{opacity:"1"},[p("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}}),Pe=/^[\u4E00-\u9FA5a-zA-Z0-9_-]{4,16}$/,K=/^[1](([3][0-9])|([4][01456789])|([5][012356789])|([6][2567])|([7][0-8])|([8][0-9])|([9][012356789]))[0-9]{8}$/,ke=/^\w{6,18}$/,Re=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,Se=/^\d{6}$/;function D(){const m={userName:{pattern:Pe,message:n("form.userName.invalid"),trigger:"change"},phone:{pattern:K,message:n("form.phone.invalid"),trigger:"change"},pwd:{pattern:ke,message:n("form.pwd.invalid"),trigger:"change"},code:{pattern:Se,message:n("form.code.invalid"),trigger:"change"},email:{pattern:Re,message:n("form.email.invalid"),trigger:"change"}},h={userName:[r(n("form.userName.required")),m.userName],phone:[r(n("form.phone.required")),m.phone],pwd:[r(n("form.pwd.required")),m.pwd],code:[r(n("form.code.required")),m.code],email:[r(n("form.email.required")),m.email]},u=r(n("form.required"));function r(c){return{required:!0,message:c}}function l(c){return[{required:!0,message:n("form.confirmPwd.required")},{asyncValidator:(_,t)=>t.trim()!==""&&t!==Z(c)?Promise.reject(_.message):Promise.resolve(),message:n("form.confirmPwd.invalid"),trigger:"input"}]}return{patternRules:m,formRules:h,defaultRequiredRule:u,createRequiredRule:r,createConfirmPwdRule:l}}function T(){const m=E(null);async function h(){var r;await((r=m.value)==null?void 0:r.validate())}async function u(){var r;(r=m.value)==null||r.restoreValidation()}return{formRef:m,validate:h,restoreValidation:u}}const $e={class:"flex-y-center justify-between"},ze=$({name:"PwdLogin",__name:"pwd-login",setup(m){const h=J(),{formRef:u,validate:r}=T(),l=M({userName:"",password:"",googleCode:""}),c=E(!1),v=y(()=>{const{formRules:d}=D();return{userName:d.userName,password:d.pwd,googleCode:[]}});async function _(){await r(),await h.login({account:l.userName,pwd:l.password,google_code:l.googleCode}),c.value?(k.set("loginAccount",l.userName),k.set("mm",X(l.password))):(k.remove("loginAccount"),k.remove("mm"))}function t(){const d=k.get("loginAccount");if(d){const o=k.get("mm");l.userName=d,o&&(l.password=Q(o)),c.value=!0}else k.remove("mm"),c.value=!1}function C(d){c.value=d}return t(),(d,o)=>{const a=U,g=q,f=Y,b=B,R=A,S=I;return N(),F(S,{ref_key:"formRef",ref:u,model:l,rules:v.value,size:"large","show-label":!1,onKeyup:G(_,["enter"])},{default:i(()=>[e(g,{path:"userName"},{default:i(()=>[e(a,{value:l.userName,"onUpdate:value":o[0]||(o[0]=w=>l.userName=w),placeholder:s(n)("page.login.common.userNamePlaceholder")},null,8,["value","placeholder"])]),_:1}),e(g,{path:"password"},{default:i(()=>[e(a,{value:l.password,"onUpdate:value":o[1]||(o[1]=w=>l.password=w),type:"password","show-password-on":"click",placeholder:s(n)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),e(g,{path:"googleCode"},{default:i(()=>[e(a,{value:l.googleCode,"onUpdate:value":o[2]||(o[2]=w=>l.googleCode=w),placeholder:"请输入谷歌验证码，没有绑定谷歌验证器不用填！"},null,8,["value"])]),_:1}),e(R,{vertical:"",size:24},{default:i(()=>[p("div",$e,[e(f,{"default-checked":c.value,"checked-value":!0,"unchecked-value":!1,"onUpdate:checked":C},{default:i(()=>[P(x(s(n)("page.login.pwdLogin.rememberMe")),1)]),_:1},8,["default-checked"])]),e(b,{type:"primary",size:"large",round:"",block:"",loading:s(h).loginLoading,onClick:_},{default:i(()=>[P(x(s(n)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}});function W(){const{loading:m,startLoading:h,endLoading:u}=ee(),{count:r,start:l,stop:c,isCounting:v}=pe(10),_=y(()=>{let d=n("page.login.codeLogin.getCode");const o=n("page.login.codeLogin.reGetCode",{time:r.value});return m.value&&(d=""),v.value&&(d=o),d});function t(d){var o,a,g,f;return d.trim()===""?((a=(o=window.$message)==null?void 0:o.error)==null||a.call(o,n("form.phone.required")),!1):K.test(d)?!0:((f=(g=window.$message)==null?void 0:g.error)==null||f.call(g,n("form.phone.invalid")),!1)}async function C(d){var a,g;!t(d)||m.value||(h(),await new Promise(f=>{setTimeout(f,500)}),(g=(a=window.$message)==null?void 0:a.success)==null||g.call(a,n("page.login.codeLogin.sendCodeSuccess")),l(),u())}return{label:_,start:l,stop:c,isCounting:v,loading:m,getCaptcha:C}}const Le={class:"w-full flex-y-center gap-16px"},Ee=$({name:"CodeLogin",__name:"code-login",setup(m){const{toggleLoginModule:h}=V(),{formRef:u,validate:r}=T(),{label:l,isCounting:c,loading:v,getCaptcha:_}=W(),t=M({phone:"",code:""}),C=y(()=>{const{formRules:o}=D();return{phone:o.phone,code:o.code}});async function d(){var o;await r(),(o=window.$message)==null||o.success(n("page.login.common.validateSuccess"))}return(o,a)=>{const g=U,f=q,b=B,R=A,S=I;return N(),F(S,{ref_key:"formRef",ref:u,model:t,rules:C.value,size:"large","show-label":!1,onKeyup:G(d,["enter"])},{default:i(()=>[e(f,{path:"phone"},{default:i(()=>[e(g,{value:t.phone,"onUpdate:value":a[0]||(a[0]=w=>t.phone=w),placeholder:s(n)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),e(f,{path:"code"},{default:i(()=>[p("div",Le,[e(g,{value:t.code,"onUpdate:value":a[1]||(a[1]=w=>t.code=w),placeholder:s(n)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),e(b,{size:"large",disabled:s(c),loading:s(v),onClick:a[2]||(a[2]=w=>s(_)(t.phone))},{default:i(()=>[P(x(s(l)),1)]),_:1},8,["disabled","loading"])])]),_:1}),e(R,{vertical:"",size:18,class:"w-full"},{default:i(()=>[e(b,{type:"primary",size:"large",round:"",block:"",onClick:d},{default:i(()=>[P(x(s(n)("common.confirm")),1)]),_:1}),e(b,{size:"large",round:"",block:"",onClick:a[3]||(a[3]=w=>s(h)("pwd-login"))},{default:i(()=>[P(x(s(n)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Fe={class:"w-full flex-y-center gap-16px"},Me=$({name:"Register",__name:"register",setup(m){const{toggleLoginModule:h}=V(),{formRef:u,validate:r}=T(),{label:l,isCounting:c,loading:v,getCaptcha:_}=W(),t=M({phone:"",code:"",password:"",confirmPassword:""}),C=y(()=>{const{formRules:o,createConfirmPwdRule:a}=D();return{phone:o.phone,code:o.code,password:o.pwd,confirmPassword:a(t.password)}});async function d(){var o;await r(),(o=window.$message)==null||o.success(n("page.login.common.validateSuccess"))}return(o,a)=>{const g=U,f=q,b=B,R=A,S=I;return N(),F(S,{ref_key:"formRef",ref:u,model:t,rules:C.value,size:"large","show-label":!1,onKeyup:G(d,["enter"])},{default:i(()=>[e(f,{path:"phone"},{default:i(()=>[e(g,{value:t.phone,"onUpdate:value":a[0]||(a[0]=w=>t.phone=w),placeholder:s(n)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),e(f,{path:"code"},{default:i(()=>[p("div",Fe,[e(g,{value:t.code,"onUpdate:value":a[1]||(a[1]=w=>t.code=w),placeholder:s(n)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),e(b,{size:"large",disabled:s(c),loading:s(v),onClick:a[2]||(a[2]=w=>s(_)(t.phone))},{default:i(()=>[P(x(s(l)),1)]),_:1},8,["disabled","loading"])])]),_:1}),e(f,{path:"password"},{default:i(()=>[e(g,{value:t.password,"onUpdate:value":a[3]||(a[3]=w=>t.password=w),type:"password","show-password-on":"click",placeholder:s(n)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),e(f,{path:"confirmPassword"},{default:i(()=>[e(g,{value:t.confirmPassword,"onUpdate:value":a[4]||(a[4]=w=>t.confirmPassword=w),type:"password","show-password-on":"click",placeholder:s(n)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),e(R,{vertical:"",size:18,class:"w-full"},{default:i(()=>[e(b,{type:"primary",size:"large",round:"",block:"",onClick:d},{default:i(()=>[P(x(s(n)("common.confirm")),1)]),_:1}),e(b,{size:"large",round:"",block:"",onClick:a[5]||(a[5]=w=>s(h)("pwd-login"))},{default:i(()=>[P(x(s(n)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Ge=$({name:"ResetPwd",__name:"reset-pwd",setup(m){const{toggleLoginModule:h}=V(),{formRef:u,validate:r}=T(),l=M({phone:"",code:"",password:"",confirmPassword:""}),c=y(()=>{const{formRules:_,createConfirmPwdRule:t}=D();return{phone:_.phone,password:_.pwd,confirmPassword:t(l.password)}});async function v(){var _;await r(),(_=window.$message)==null||_.success(n("page.login.common.validateSuccess"))}return(_,t)=>{const C=U,d=q,o=B,a=A,g=I;return N(),F(g,{ref_key:"formRef",ref:u,model:l,rules:c.value,size:"large","show-label":!1,onKeyup:G(v,["enter"])},{default:i(()=>[e(d,{path:"phone"},{default:i(()=>[e(C,{value:l.phone,"onUpdate:value":t[0]||(t[0]=f=>l.phone=f),placeholder:s(n)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),e(d,{path:"code"},{default:i(()=>[e(C,{value:l.code,"onUpdate:value":t[1]||(t[1]=f=>l.code=f),placeholder:s(n)("page.login.common.codePlaceholder")},null,8,["value","placeholder"])]),_:1}),e(d,{path:"password"},{default:i(()=>[e(C,{value:l.password,"onUpdate:value":t[2]||(t[2]=f=>l.password=f),type:"password","show-password-on":"click",placeholder:s(n)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),e(d,{path:"confirmPassword"},{default:i(()=>[e(C,{value:l.confirmPassword,"onUpdate:value":t[3]||(t[3]=f=>l.confirmPassword=f),type:"password","show-password-on":"click",placeholder:s(n)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),e(a,{vertical:"",size:18,class:"w-full"},{default:i(()=>[e(o,{type:"primary",size:"large",round:"",block:"",onClick:v},{default:i(()=>[P(x(s(n)("common.confirm")),1)]),_:1}),e(o,{size:"large",round:"",block:"",onClick:t[4]||(t[4]=f=>s(h)("pwd-login"))},{default:i(()=>[P(x(s(n)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Ue=$({name:"BindWechat",__name:"bind-wechat",setup(m){return(h,u)=>(N(),L("div"))}}),Be={class:"w-400px lt-sm:w-300px"},qe={class:"flex-y-center justify-between"},Ie={class:"text-28px text-primary font-500 lt-sm:text-22px"},Ae={class:"i-flex-col"},De={class:"pt-24px"},Te={class:"text-18px text-primary font-medium"},Oe={class:"pt-24px"},He=$({name:"login",__name:"index",props:{module:{}},setup(m){const h=m,u=oe(),r=ne(),l=E(""),c=E(""),v={"pwd-login":{label:z["pwd-login"],component:ze},"code-login":{label:z["code-login"],component:Ee},register:{label:z.register,component:Me},"reset-pwd":{label:z["reset-pwd"],component:Ge},"bind-wechat":{label:z["bind-wechat"],component:Ue}},_=y(()=>v[h.module||"pwd-login"]),t=y(()=>r.darkMode?O(r.themeColor,600):r.themeColor),C=y(()=>{const o="#ffffff",a=r.darkMode?.5:.2;return te(o,r.themeColor,a)});async function d(){const{data:o}=await re();o&&(k.set("siteLogo",o.login_logo),k.set("siteName",o.site_name),l.value=o.login_logo,c.value=o.site_name?o.site_name:n("system.title"))}return d(),(o,a)=>{const g=Ne,f=ce,b=ie,R=de,S=ue;return N(),L("div",{class:"relative size-full flex-center overflow-hidden",style:se({backgroundColor:C.value})},[e(g,{"theme-color":t.value},null,8,["theme-color"]),e(S,{bordered:!1,class:"relative z-4 w-auto rd-12px"},{default:i(()=>[p("div",Be,[p("header",qe,[p("div",null,[e(f,{width:"64",src:l.value},null,8,["src"])]),p("h3",Ie,x(c.value),1),p("div",Ae,[e(b,{"theme-schema":s(r).themeScheme,"show-tooltip":!1,class:"text-20px lt-sm:text-18px",onSwitch:s(r).toggleThemeScheme},null,8,["theme-schema","onSwitch"]),e(R,{lang:s(u).locale,"lang-options":s(u).localeOptions,"show-tooltip":!1,onChangeLang:s(u).changeLocale},null,8,["lang","lang-options","onChangeLang"])])]),p("main",De,[p("h3",Te,x(s(n)(_.value.label)),1),p("div",Oe,[e(le,{name:s(r).page.animateMode,mode:"out-in",appear:""},{default:i(()=>[(N(),F(ae(_.value.component)))]),_:1},8,["name"])])])])]),_:1})],4)}}});export{He as default};
