import{_ as de}from"./modal-form.vue_vue_type_script_setup_true_lang-D4rPO6tH.js";import{_ as ce}from"./search-header-BhM1flca.js";import{_ as me}from"./table-header-button-group.vue_vue_type_script_setup_true_lang-CWQZkHKX.js";import{d as pe,O as ge,r as n,V as fe,o as f,b as C,f as o,w as d,W as _e,h as x,S as $,ac as j,$ as c,cu as ve,B as q,cv as ye,cw as G,cx as be,N as he,Z as we,cy as xe,c as W,x as ke}from"./index-hovKqFL_.js";import{u as Se,N as Le}from"./custom-table-DDqfUiuo.js";import{_ as Ne}from"./Flex-DFwRD2Q7.js";import{_ as Ce}from"./DataTable-DU30Lwyo.js";import{a as Fe,_ as Me}from"./FormItem-_LcKmAs5.js";import"./multi-language-form.vue_vue_type_script_setup_true_lang-CKLYA_yb.js";import"./custom-upload-ByeURddi.js";import"./Grid-BhltlsZc.js";import"./get-slot-Bk_rJcZu.js";import"./Spin-BT5AbCHY.js";import"./DatePicker-BLT4kyC3.js";import"./TimePicker-SQv-WABn.js";import"./Forward-Cg-d91Ea.js";import"./RadioGroup-v60ZBrUm.js";import"./Space-D3aac8v1.js";function H(_){return typeof _=="function"||Object.prototype.toString.call(_)==="[object Object]"&&!we(_)}const Ke=pe({name:"system-config_language-config",__name:"index",setup(_){const{pagination:s,renderCell:K}=Se(),k=ge(),F=n(null),M=n(null),p=n(!1),U=n([]),O=n([]),P=n(),S=n([{type:"Select",valueName:"is_admin",label:"语言分类",placeholder:"请输入语言分类",defaultOption:[],itemWidth:"260px",selectLabelField:"title",selectValueField:"value"},{type:"Select",valueName:"code",label:"语言类型",defaultOption:[],selectFilter:!0,selectLabelField:"name",selectValueField:"code",itemWidth:"500"},{type:"Input",valueName:"remarks",label:"搜索",placeholder:"请输入语言备注"}]),D=n([]),v=n([]),m=n([]),y=n(!1),R=n(!0),b=n(!1),h=n(!1),z=n(!0),w=n(!1),Q=n([{type:"Radio",valueName:"is_admin",label:"应用端",radioGroupOption:[{value:0,label:"页面语言"},{value:1,label:"接口语言"}]},{type:"Slot",valueName:"form",slotName:"form"}]),L=n([{type:"Radio",valueName:"is_admin",label:"应用端",radioGroupOption:[{value:0,label:"页面语言"},{value:1,label:"接口语言"}]},{type:"Input",valueName:"code",label:"状态码"},{type:"Slot",valueName:"form",slotName:"form"}]),A={language_name:[{required:!0,message:"请输入语种名称",trigger:["blur"]}],file_name:[{required:!0,message:"请输入简称",trigger:["blur"]}]};async function u(){p.value=!0;const{data:a}=await ve({page:s.page,limit:s.pageSize,...P.value});U.value=a.list,s.itemCount=a.count;const e=a.langType.langType.map(t=>({lang_explain:"",label:t.title,type_id:t.value}));v.value=e,D.value=e,S.value[0].defaultOption=a.langType.isAdmin,p.value=!1}function X(a){s.page=a,u()}function Z(a){s.page=1,s.pageSize=a,u()}async function J(a){p.value=!0;const{response:e}=await xe(a);e.data.status===200&&(u(),k.success(c("common.deleteSuccess")))}const T=[{title:"编号",key:"id",align:"center"},{title:"原语句",key:"remarks",align:"center"},{title:"对应语句翻译",key:"lang_explain",align:"center"},{title:"状态码",key:"code",align:"center"},{title:"语言类型",key:"language_name",align:"center"},{title:"操作",key:"action",align:"center",width:300,fixed:"right",render:a=>{let e;return o(Ne,{justify:"center"},{default:()=>[o(q,{type:"success",size:"small",onClick:te.bind(null,a.code)},H(e=c("common.modify"))?e:{default:()=>[e]}),o(Le,{"onPositive-click":J.bind(null,a.id)},{default:()=>[c("common.confirmDelete")],trigger:()=>{let t;return o(q,{type:"error",size:"small"},H(t=c("common.delete"))?t:{default:()=>[t]})}})]})}}],Y=n([]),ee=n([]);function ae(a){P.value=a,s.page=1,u()}function le(a,e){Y.value=a,ee.value=e}function ne(){y.value=!0}async function te(a){m.value=D.value;const{data:e}=await ye({code:a});L.value[0].defaultValue=e.list[0].is_admin,L.value[1].defaultValue=e.code,e.list.forEach((t,i)=>{m.value.length<=i||(m.value[i].lang_explain=t.lang_explain,m.value[i].id=t.id)}),h.value=!0}async function oe(a){var e;(e=F.value)==null||e.validate(async t=>{if(!t){b.value=!0;const i=v.value.map(r=>({type_id:r.type_id,remarks:v.value[0].lang_explain,lang_explain:r.lang_explain})),{response:g}=await G({is_admin:a.is_admin,remarks:i[0].lang_explain,edit:0,list:i});g.data.status===200&&(u(),k.success(c("common.addSuccess")),y.value=!1),b.value=!1}})}async function ie(a){var e;(e=M.value)==null||e.validate(async t=>{if(!t){w.value=!0;const i=m.value.map(r=>({id:r.id,type_id:r.type_id,code:a.code,remarks:m.value[0].lang_explain,lang_explain:r.lang_explain})),{response:g}=await G({is_admin:a.is_admin,code:a.code,remarks:i[0].lang_explain,edit:1,list:i});g.data.status===200&&(u(),k.success(c("common.modifySuccess")),h.value=!1),w.value=!1}})}async function se(){const{data:a}=await be();O.value=a.list,S.value[1].defaultOption=O.value}u(),se();const ue=n(T.reduce((a,e)=>Number(a)+Number(e.width),0));return(a,e)=>{const t=me,i=ce,g=Ce,r=he,V=ke,B=Me,E=Fe,I=de,re=fe("resize");return f(),C("div",null,[o(r,{title:"语言代码"},{"header-extra":d(()=>[o(t,{"refresh-button-loading":p.value,"onUpdate:refreshButtonLoading":e[0]||(e[0]=l=>p.value=l),"is-export-all":!1,"is-export-filter":!1,"is-export-selected":!1,"is-batch-delete":!1,onAdd:ne,onRefresh:u},null,8,["refresh-button-loading"])]),default:d(()=>[o(i,{"search-config":S.value,onOnSearch:ae},null,8,["search-config"]),_e(o(g,{remote:"",columns:T,data:U.value,loading:p.value,bordered:!1,style:{height:"620px"},"flex-height":"","scroll-x":ue.value,pagination:x(s),"row-key":l=>l.id,"render-cell":x(K),"onUpdate:checkedRowKeys":le,"onUpdate:page":X,"onUpdate:pageSize":Z},null,8,["data","loading","scroll-x","pagination","row-key","render-cell"]),[[re]])]),_:1}),o(I,{"show-form-modal":y.value,"onUpdate:showFormModal":e[1]||(e[1]=l=>y.value=l),"is-async-shut-down":R.value,"onUpdate:isAsyncShutDown":e[2]||(e[2]=l=>R.value=l),"is-show-modal-loading":b.value,"onUpdate:isShowModalLoading":e[3]||(e[3]=l=>b.value=l),"modal-title":x(c)("common.add"),"modal-form-config":Q.value,"form-rules":A,onOnSubmit:oe},{form:d(()=>[o(E,{ref_key:"formRef",ref:F,"label-placement":"left","label-width":"auto",size:"medium"},{default:d(()=>[(f(!0),C($,null,j(v.value,l=>(f(),W(B,{key:l.type_id,path:"lang_explain",label:l.label,rule:{required:!0,message:"请输入语句",trigger:["input","blur"],validator:()=>l.lang_explain?!0:new Error("请输入语句")}},{default:d(()=>[o(V,{value:l.lang_explain,"onUpdate:value":N=>l.lang_explain=N,clearable:""},null,8,["value","onUpdate:value"])]),_:2},1032,["label","rule"]))),128))]),_:1},512)]),_:1},8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"]),o(I,{"show-form-modal":h.value,"onUpdate:showFormModal":e[4]||(e[4]=l=>h.value=l),"is-async-shut-down":z.value,"onUpdate:isAsyncShutDown":e[5]||(e[5]=l=>z.value=l),"is-show-modal-loading":w.value,"onUpdate:isShowModalLoading":e[6]||(e[6]=l=>w.value=l),"modal-title":x(c)("common.modify"),"modal-form-config":L.value,"form-rules":A,onOnSubmit:ie},{form:d(()=>[o(E,{ref_key:"modifyFormRef",ref:M,"label-placement":"left","label-width":"auto",size:"medium"},{default:d(()=>[(f(!0),C($,null,j(m.value,l=>(f(),W(B,{key:l.type_id,path:"lang_explain",label:l.label,rule:{required:!0,message:"请输入语句",trigger:["input","blur"],validator:()=>l.lang_explain?!0:new Error("请输入语句")}},{default:d(()=>[o(V,{value:l.lang_explain,"onUpdate:value":N=>l.lang_explain=N,clearable:""},null,8,["value","onUpdate:value"])]),_:2},1032,["label","rule"]))),128))]),_:1},512)]),_:1},8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"])])}}});export{Ke as default};
