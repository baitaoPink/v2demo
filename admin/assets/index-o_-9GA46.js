import{_ as ne}from"./modal-form.vue_vue_type_script_setup_true_lang-DoZbWwaq.js";import{_ as se}from"./search-header-BMTtF8l_.js";import{_ as ie}from"./table-header-button-group.vue_vue_type_script_setup_true_lang-B0-DchGJ.js";import{d as re,O as ue,r as o,U as C,V as de,o as me,b as ce,f as n,w as z,h as r,a1 as N,W as pe,$ as u,B,N as fe,Z as ge}from"./index-CArBg04O.js";import{s as j,t as ve,v as be,w as ye,x as he,y as we}from"./user-manage-BGryZnrq.js";import{u as _e,N as xe}from"./custom-table-BTjOT39P.js";import{u as Se}from"./exportExcel-CBd_t5dx.js";import{_ as Me}from"./Flex-BI-XPGW2.js";import{_ as De}from"./DataTable-D8kk90MM.js";import"./multi-language-form.vue_vue_type_script_setup_true_lang-CILu7-Hi.js";import"./custom-upload-syTh6Ivv.js";import"./Grid-BKCm7cA2.js";import"./get-slot-Bk_rJcZu.js";import"./FormItem-DG8tpaDc.js";import"./Spin-DJsdEB-2.js";import"./DatePicker-CL3JbrfR.js";import"./TimePicker-C51DBHeq.js";import"./Forward-DBdOiGc7.js";import"./RadioGroup-CUdlQrr4.js";import"./Space-BcPIDW0k.js";function $(g){return typeof g=="function"||Object.prototype.toString.call(g)==="[object Object]"&&!ge(g)}const k="白名单设置列表.xlsx",qe=re({name:"system-config_whitelist-settings",__name:"index",setup(g){const{pagination:d,renderCell:O}=_e(),v=ue(),{exportExcel:_,exportLoading:s}=Se(),c=o(!1),x=o([]),m=o("2"),U=o({is_agent:m.value}),R=o([{type:"Input",valueName:"add_ip",label:"IP",placeholder:"请输入IP"},{type:"Input",valueName:"mark",label:"备注",placeholder:"请输入备注"}]),I=o(0),b=o(!1),E=o(!0),y=o(!1),T=o({}),h=o(!1),P=o(!0),w=o(!1),S=o([{type:"Input",valueName:"add_ip",label:"IP"},{type:"Input",valueName:"mark",label:"备注"}]),M=o([]),D=o([]),A={add_ip:[{required:!0,trigger:["blur"],validator:(t,e)=>e?/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)$/.test(e)?!0:new Error("请输入正确的IP地址"):new Error("请输入IP")}]};async function i(){c.value=!0;const{data:t}=await j({...U.value,is_agent:m.value,page:d.page,limit:d.pageSize});x.value=t.list,d.itemCount=t.count,c.value=!1}async function V(t){c.value=!0;const{response:e}=await he(t,{id:t,is_agent:m.value});e.data.status===200&&(i(),v.success(u("common.deleteSuccess")))}async function H(t){I.value=t;const{data:e}=await we(t,{is_agent:m.value});T.value=e,D.value.forEach(l=>{l.defaultValue=e[l.valueName]}),h.value=!0}const f=[{type:"selection"},{title:"IP",key:"add_ip",align:"center"},{title:"备注",key:"mark",align:"center",ellipsis:{tooltip:!0}},{title:"修改时间",key:"update_time",align:"center"},{title:"创建时间",key:"create_time",align:"center"},{title:"操作",key:"action",align:"center",width:300,fixed:"right",render:t=>{let e;return n(Me,{justify:"center"},{default:()=>[n(B,{type:"success",size:"small",onClick:H.bind(null,t.uid)},$(e=u("common.modify"))?e:{default:()=>[e]}),n(xe,{"onPositive-click":V.bind(null,t.uid)},{default:()=>[u("common.confirmDelete")],trigger:()=>{let l;return n(B,{type:"error",size:"small"},$(l=u("common.delete"))?l:{default:()=>[l]})}})]})}}];async function K(){const{data:t}=await j({is_agent:m.value});_({tableColumns:f,tableData:t.list,fileName:k})}const p=o([]),F=o([]);function q(t){U.value=t,d.page=1,i()}function G(t,e){p.value=t,F.value=e}function Q(){M.value=C(S.value),b.value=!0}async function W(){c.value=!0;const{response:t}=await ve({id:p.value.join(","),is_agent:m.value});t.data.status===200&&(i(),p.value=[],v.success(u("common.deleteSuccess")))}async function X(t){y.value=!0;const e={};t.up_where&&(e.up_where=t.up_where.join(","));const{response:l}=await be({...t,...e,status:t.status?1:0,is_agent:m.value});l.data.status===200&&(i(),v.success(u("common.addSuccess")),b.value=!1),y.value=!1}async function Z(t){w.value=!0;const e={};t.up_where&&(e.up_where=t.up_where.join(","));const{response:l}=await ye(I.value,{...t,...e,status:t.status?1:0,is_agent:m.value});l.data.status===200&&(i(),v.success(u("common.modifySuccess")),h.value=!1),w.value=!1}function J(t){d.page=t,i()}function Y(t){d.page=1,d.pageSize=t,i()}i(),M.value=C(S.value),D.value=C(S.value);const ee=o(f.reduce((t,e)=>Number(t)+Number(e.width),0));return(t,e)=>{const l=ie,te=se,ae=De,oe=fe,L=ne,le=de("resize");return me(),ce("div",null,[n(oe,{title:"代理列表"},{"header-extra":z(()=>[n(l,{"export-all-loading":r(s),"onUpdate:exportAllLoading":e[0]||(e[0]=a=>N(s)?s.value=a:null),"refresh-button-loading":c.value,"onUpdate:refreshButtonLoading":e[1]||(e[1]=a=>c.value=a),"export-selected-disabled":p.value.length,"onUpdate:exportSelectedDisabled":e[2]||(e[2]=a=>p.value.length=a),"batch-delete-disabled":p.value.length,"onUpdate:batchDeleteDisabled":e[3]||(e[3]=a=>p.value.length=a),"export-filter-loading":r(s),"onUpdate:exportFilterLoading":e[4]||(e[4]=a=>N(s)?s.value=a:null),"export-selected-loading":r(s),"onUpdate:exportSelectedLoading":e[5]||(e[5]=a=>N(s)?s.value=a:null),onExportAll:K,onExportFilter:e[6]||(e[6]=a=>r(_)({tableColumns:f,tableData:x.value,fileName:k})),onExportSelected:e[7]||(e[7]=a=>r(_)({tableColumns:f,tableData:F.value,fileName:k})),onAdd:Q,onBatchDelete:W,onRefresh:i},null,8,["export-all-loading","refresh-button-loading","export-selected-disabled","batch-delete-disabled","export-filter-loading","export-selected-loading"])]),default:z(()=>[n(te,{"search-config":R.value,onOnSearch:q},null,8,["search-config"]),pe(n(ae,{remote:"",columns:f,data:x.value,loading:c.value,bordered:!1,style:{height:"620px"},"flex-height":"","scroll-x":ee.value,pagination:r(d),"row-key":a=>a.uid,"render-cell":r(O),"onUpdate:checkedRowKeys":G,"onUpdate:page":J,"onUpdate:pageSize":Y},null,8,["data","loading","scroll-x","pagination","row-key","render-cell"]),[[le]])]),_:1}),n(L,{"show-form-modal":b.value,"onUpdate:showFormModal":e[8]||(e[8]=a=>b.value=a),"is-async-shut-down":E.value,"onUpdate:isAsyncShutDown":e[9]||(e[9]=a=>E.value=a),"is-show-modal-loading":y.value,"onUpdate:isShowModalLoading":e[10]||(e[10]=a=>y.value=a),"modal-title":r(u)("common.add"),"modal-form-config":M.value,"form-rules":A,onOnSubmit:X},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"]),n(L,{"show-form-modal":h.value,"onUpdate:showFormModal":e[11]||(e[11]=a=>h.value=a),"is-async-shut-down":P.value,"onUpdate:isAsyncShutDown":e[12]||(e[12]=a=>P.value=a),"is-show-modal-loading":w.value,"onUpdate:isShowModalLoading":e[13]||(e[13]=a=>w.value=a),"modal-title":r(u)("common.modify"),"modal-form-config":D.value,"form-rules":A,onOnSubmit:Z},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"])])}}});export{qe as default};
