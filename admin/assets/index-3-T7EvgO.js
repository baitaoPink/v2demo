import{_ as M}from"./search-header-BEaDoZth.js";import{_ as O}from"./table-header-button-group.vue_vue_type_script_setup_true_lang-C-DfQuFh.js";import{a0 as P,d as $,r,V as j,o as F,b as H,f as s,w as S,h as i,a1 as h,W as I,a2 as k,U as K,N as V}from"./index-ClXc60Q8.js";import{u as q}from"./custom-table-DLqvKnHZ.js";import{u as G}from"./exportExcel-BkPY8vZC.js";import{_ as Q}from"./DataTable-C2iu46cC.js";import"./FormItem-DwRTykPn.js";import"./DatePicker-uVn2PEEJ.js";import"./TimePicker-Kfakx9-p.js";import"./Forward-BysZYGA1.js";import"./Flex-CESa1CD9.js";import"./get-slot-Bk_rJcZu.js";import"./RadioGroup-C9SrcqWM.js";function w(C){return P({url:"/system/user/partnerSalaryContentLog/index",params:C})}const D="工资日志列表.xlsx",ue=$({name:"user-manage_salary-log",__name:"index",setup(C){const{pagination:o,renderCell:E}=q(),{exportExcel:v,exportLoading:n}=G(),p=r(!1),x=r([]),b=[{label:"团队分成",value:1},{label:"周工资",value:2}],f=r(),U=r([{type:"Input",valueName:"search_key_user",label:"账号/姓名",placeholder:"请输入账号/姓名"},{type:"Datetime",datetimeType:"datetimerange",valueName:"settle_time",label:"发放时间",placeholder:""},{type:"Select",valueName:"type",label:"业绩类型",defaultOption:b}]);async function d(){var e,a;p.value=!0;const{data:t}=await w({...f.value,settle_time:Array.isArray((e=f.value)==null?void 0:e.settle_time)?(a=f.value)==null?void 0:a.settle_time.map(u=>k(u).format("YYYY/MM/DD")).join("-"):void 0,page:o.page,limit:o.pageSize});x.value=t.list,o.itemCount=t.count,p.value=!1}const c=[{type:"selection"},{title:"账号/姓名",key:"user",align:"center",render:t=>s("div",null,[s("p",null,[t.user.account]),s("p",null,[t.real_name])])},{title:"金额",key:"profit",align:"center"},{title:"业绩类型",key:"type",align:"center",render:t=>{const e=b.find(a=>a.value===t.type);return(e==null?void 0:e.label)??""}},{title:"描述",key:"desc",align:"center"},{title:"发放时间",key:"settle_time",align:"center",render:t=>t.settle_time?k(t.settle_time).format("YYYY-MM-DD"):""}];async function L(){const{data:t}=await w();v({tableColumns:c,tableData:y(t.list),fileName:D})}function y(t){const e=K(t);return e.forEach(a=>{var u;if(Reflect.has(a,"user")&&(a.user=((u=a.user)==null?void 0:u.account)||"/"),Reflect.has(a,"type")){const g=b.find(_=>_.value===a.type);a.type=(g==null?void 0:g.label)??"/"}Reflect.has(a,"is_settle")&&(a.is_settle=a.is_settle===1?"是":"否")}),e}const m=r([]),N=r([]);function R(t){f.value=t,o.page=1,d()}function T(t,e){m.value=t,N.value=e}function Y(t){o.page=t,d()}function z(t){o.page=1,o.pageSize=t,d()}d();const A=r(c.reduce((t,e)=>Number(t)+Number(e.width),0));return(t,e)=>{const a=O,u=M,g=Q,_=V,B=j("resize");return F(),H("div",null,[s(_,{title:"工资日志列表"},{"header-extra":S(()=>[s(a,{"export-all-loading":i(n),"onUpdate:exportAllLoading":e[0]||(e[0]=l=>h(n)?n.value=l:null),"refresh-button-loading":p.value,"onUpdate:refreshButtonLoading":e[1]||(e[1]=l=>p.value=l),"export-selected-disabled":m.value.length,"onUpdate:exportSelectedDisabled":e[2]||(e[2]=l=>m.value.length=l),"batch-delete-disabled":m.value.length,"onUpdate:batchDeleteDisabled":e[3]||(e[3]=l=>m.value.length=l),"export-filter-loading":i(n),"onUpdate:exportFilterLoading":e[4]||(e[4]=l=>h(n)?n.value=l:null),"export-selected-loading":i(n),"onUpdate:exportSelectedLoading":e[5]||(e[5]=l=>h(n)?n.value=l:null),"is-add":!1,"is-batch-delete":!1,onExportAll:L,onExportFilter:e[6]||(e[6]=l=>i(v)({tableColumns:c,tableData:y(x.value),fileName:D})),onExportSelected:e[7]||(e[7]=l=>i(v)({tableColumns:c,tableData:y(N.value),fileName:D})),onRefresh:d},null,8,["export-all-loading","refresh-button-loading","export-selected-disabled","batch-delete-disabled","export-filter-loading","export-selected-loading"])]),default:S(()=>[s(u,{"search-config":U.value,onOnSearch:R},null,8,["search-config"]),I(s(g,{remote:"",columns:c,data:x.value,loading:p.value,bordered:!1,style:{height:"620px"},"flex-height":"","scroll-x":A.value,pagination:i(o),"row-key":l=>l.id,"render-cell":i(E),"onUpdate:checkedRowKeys":T,"onUpdate:page":Y,"onUpdate:pageSize":z},null,8,["data","loading","scroll-x","pagination","row-key","render-cell"]),[[B]])]),_:1})])}}});export{ue as default};
