import{_ as le}from"./modal-form.vue_vue_type_script_setup_true_lang-BuDR1X64.js";import{_ as ne}from"./search-header-DC9myRJJ.js";import{_ as se}from"./table-header-button-group.vue_vue_type_script_setup_true_lang-BqWHjY4C.js";import{d as ie,r as t,O as ue,U as L,V as de,o as re,b as ce,f as l,w as T,W as me,h as _,$ as i,a8 as B,B as V,a3 as fe,N as pe,Z as ge}from"./index-DgS_gExp.js";import{f as ve}from"./systen-configuration-DSYmlnfw.js";import{t as he,u as ye,v as _e,w as be}from"./system-configuration-BdjFx3tc.js";import{u as we,N as Ce}from"./custom-table-M__G0njN.js";import{_ as Se}from"./Flex-NxzTnbAG.js";import{_ as ke}from"./DataTable-R-3tvq3U.js";import"./multi-language-form.vue_vue_type_script_setup_true_lang-D4ifp7HF.js";import"./custom-upload-DUUdPJxM.js";import"./Grid-BNV0w0mr.js";import"./get-slot-Bk_rJcZu.js";import"./FormItem-BAqcrsPW.js";import"./Spin-Bu1_C0Z0.js";import"./DatePicker-yC2d8YmP.js";import"./TimePicker-BsIq1gq9.js";import"./Forward-BOBl18BE.js";import"./RadioGroup-C9MN4_Hy.js";import"./Space-CMuvGHTq.js";function z(m){return typeof m=="function"||Object.prototype.toString.call(m)==="[object Object]"&&!ge(m)}const He=ie({name:"system-configuration_financial-products_product-category",__name:"index",setup(m){const{pagination:n,renderCell:A}=we(),b=t([]),P=t([]),w=ue(),C=t(0),f=t([]),k=t({}),N=t([{type:"Input",valueName:"keyword",label:"标题/副标题",placeholder:"请输入标题/副标题"},{type:"Select",valueName:"lang_code",label:"语言",placeholder:"请输入语言",selectLabelField:"language_name",selectValueField:"file_name"}]),I=[{title:"名称",key:"name",align:"center"},{title:"排序",key:"sort",align:"center"},{title:"产品类型标识",key:"code",align:"center"},{title:"语言",key:"lang_code",align:"center"},{title:"显示",key:"is_open",align:"center",render:a=>l(B,{type:a.is_open===2?"error":"success"},{default:()=>[a.is_open===2?"隐藏":"显示"]})},{title:"开启",key:"status",align:"center",render:a=>l(B,{type:a.status===2?"error":"success"},{default:()=>[a.status===2?"关闭":"开启"]})},{title:"创建时间",key:"create_time",align:"center"},{title:"操作",key:"action",align:"center",width:300,fixed:"right",render:a=>{let e;return l(Se,{justify:"center"},{default:()=>[l(V,{type:"success",size:"small",onClick:$.bind(null,a)},z(e=i("common.modify"))?e:{default:()=>[e]}),l(Ce,{"onPositive-click":Z.bind(null,a.id)},{default:()=>[i("common.confirmDelete")],trigger:()=>{let c;return l(V,{type:"error",size:"small"},z(c=i("common.delete"))?c:{default:()=>[c]})}})]})}}],M=t([]),u=t(!1),S=t({}),d=t({}),R=["logo","image","icon"],p=t(!1),F=t(!0),g=t(!1),v=t(!1),x=t(!0),h=t(!1),O=t([{type:"Input",valueName:"name",label:"名称"},{type:"Input Number",valueName:"sort",label:"排序"},{type:"Input",valueName:"code",label:"产品类型标识"},{type:"Select",valueName:"lang_code",label:"语言",placeholder:"请输入语言",selectLabelField:"language_name",selectValueField:"file_name"},{type:"Switch",valueName:"is_open",label:"开启",switchChecked:1,switchUnchecked:2,defaultValue:2,switchCheckedText:"开启",switchUncheckedText:"关闭"},{type:"Switch",valueName:"status",label:"显示",switchChecked:1,switchUnchecked:2,defaultValue:2,switchCheckedText:"显示",switchUncheckedText:"隐藏"}]),y=t([]),r=t([]),U={name:[{required:!0,message:"请输入名称",trigger:["blur"]}],code:[{required:!0,message:"请输入产品类型标识",trigger:["blur"]}],lang_code:[{required:!0,message:"请输入语言",trigger:["blur"]}]};async function j(a){g.value=!0;const{response:e}=await he({...a,...d.value});e.data.status===200&&(s(),w.success(i("common.addSuccess")),p.value=!1),g.value=!1}function E(){S.value={},d.value={}}async function $(a){C.value=a.id,a&&(r.value.forEach(e=>{R.includes(e.valueName)&&(S.value[e.valueName]=[{id:e.valueName,name:e.valueName,url:a[e.valueName],status:"finished"}],d.value[e.valueName]=a[e.valueName]),e.defaultValue=a[e.valueName]}),v.value=!0)}async function q(a){h.value=!0;const{response:e}=await ye(C.value,{...a,...d.value});e.data.status===200&&(s(),w.success(i("common.modifySuccess")),v.value=!1),h.value=!1}function H(){C.value=0,S.value={},d.value={}}function K(a){k.value=a,n.page=1,s()}function G(a,e){b.value=a,P.value=e}async function s(){u.value=!0;const{data:a}=await _e({page:n.page,limit:n.pageSize,...k.value});M.value=a.list,n.itemCount=a.count,u.value=!1}function Q(a){n.page=a,s()}function W(a){n.page=1,n.pageSize=a,s()}async function Z(a){u.value=!0;const{response:e}=await be(a);e.data.status===200&&(s(),w.success(i("common.deleteSuccess")))}function J(){p.value=!0}async function X(){const{data:a}=await ve();y.value[1].defaultOption=a,r.value[1].defaultOption=a}async function Y(){const{data:a}=await fe();f.value=a.list,N.value[1].defaultOption=f.value,y.value[3].defaultOption=f.value,r.value[3].defaultOption=f.value}return s(),X(),Y(),y.value=L(O.value),r.value=L(O.value),(a,e)=>{const c=se,ee=ne,ae=ke,te=pe,D=le,oe=de("resize");return re(),ce("div",null,[l(te,{title:"产品分类"},{"header-extra":T(()=>[l(c,{"refresh-button-loading":u.value,"onUpdate:refreshButtonLoading":e[0]||(e[0]=o=>u.value=o),"batch-delete-disabled":b.value.length,"onUpdate:batchDeleteDisabled":e[1]||(e[1]=o=>b.value.length=o),"is-export-all":!1,"is-export-filter":!1,"is-export-selected":!1,"is-batch-delete":!1,onAdd:J,onRefresh:s},null,8,["refresh-button-loading","batch-delete-disabled"])]),default:T(()=>[l(ee,{"search-config":N.value,onOnSearch:K},null,8,["search-config"]),me(l(ae,{remote:"",columns:I,data:M.value,loading:u.value,bordered:!1,style:{height:"620px"},"flex-height":"","scroll-x":1500,pagination:_(n),"row-key":o=>o.id,"render-cell":_(A),"onUpdate:checkedRowKeys":G,"onUpdate:page":Q,"onUpdate:pageSize":W},null,8,["data","loading","pagination","row-key","render-cell"]),[[oe]])]),_:1}),l(D,{"show-form-modal":p.value,"onUpdate:showFormModal":e[2]||(e[2]=o=>p.value=o),"is-async-shut-down":F.value,"onUpdate:isAsyncShutDown":e[3]||(e[3]=o=>F.value=o),"is-show-modal-loading":g.value,"onUpdate:isShowModalLoading":e[4]||(e[4]=o=>g.value=o),"modal-title":_(i)("common.add"),"modal-form-config":y.value,"form-rules":U,onOnSubmit:j,onOnClose:E},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"]),l(D,{"show-form-modal":v.value,"onUpdate:showFormModal":e[5]||(e[5]=o=>v.value=o),"is-async-shut-down":x.value,"onUpdate:isAsyncShutDown":e[6]||(e[6]=o=>x.value=o),"is-show-modal-loading":h.value,"onUpdate:isShowModalLoading":e[7]||(e[7]=o=>h.value=o),"modal-title":_(i)("common.modify"),"modal-form-config":r.value,"form-rules":U,onOnSubmit:q,onOnClose:H},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"])])}}});export{He as default};
