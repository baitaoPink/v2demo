import{_ as le}from"./modal-form.vue_vue_type_script_setup_true_lang-CUtZP5po.js";import{_ as ne}from"./search-header-HvIjgtEe.js";import{_ as se}from"./table-header-button-group.vue_vue_type_script_setup_true_lang-D9uBmA4a.js";import{d as ie,O as re,r as o,U as L,V as ue,o as de,b as me,f as n,w as z,h as r,a1 as S,W as pe,$ as u,B,N as ce,Z as fe}from"./index-Cs7V50wn.js";import{a as O,b as ge,s as ve,m as ye,d as be,c as he}from"./tradeType-B0WiGrw7.js";import{u as we,N as xe}from"./custom-table-UhLLoG9d.js";import{u as _e}from"./exportExcel-z6M-N3dP.js";import{_ as Se}from"./Flex-DDwAcRM-.js";import{_ as De}from"./DataTable-CAMJVhuk.js";import"./multi-language-form.vue_vue_type_script_setup_true_lang-COSYJ2fD.js";import"./custom-upload-C27QY7jd.js";import"./Grid-qWmwYo8c.js";import"./get-slot-Bk_rJcZu.js";import"./FormItem-BBZRA4Hq.js";import"./Spin-DmemDANO.js";import"./DatePicker-KOWWGRFd.js";import"./TimePicker-BJqFFLdw.js";import"./Forward-C8rBN4KN.js";import"./RadioGroup-B0NwJwJi.js";import"./Space-C9n6suaS.js";function j(f){return typeof f=="function"||Object.prototype.toString.call(f)==="[object Object]"&&!fe(f)}const D="交易类型管理列表.xlsx",He=ie({name:"system-config_transaction-type-management",__name:"index",setup(f){const{pagination:d,renderCell:I}=we(),g=re(),{exportExcel:w,exportLoading:s}=_e(),m=o(!1),x=o([]),N=o(),P=o([{type:"Input",valueName:"name",label:"名称",placeholder:"请输入名称"},{type:"Input",valueName:"code",label:"标识",placeholder:"请输入标识"},{type:"Select",valueName:"type",label:"类型",placeholder:"请选择类型",defaultOption:[{value:0,label:"跟单"},{value:1,label:"杠杠"},{value:2,label:"买涨买跌"},{value:3,label:"全球指数"}]}]),C=o(0),v=o(!1),M=o(!0),y=o(!1),R=o({}),b=o(!1),T=o(!0),h=o(!1),k=o([{type:"Input",valueName:"name",label:"名称"},{type:"Input",valueName:"code",label:"标识"},{type:"Select",valueName:"type",label:"类型",defaultOption:[{value:0,label:"跟单"},{value:1,label:"杠杠"},{value:2,label:"买涨买跌"},{value:3,label:"全球指数"}]},{type:"Input",inputType:"textarea",valueName:"remark",label:"备注"}]),U=o([]),_=o([]),A={name:[{required:!0,message:"请输入名称",trigger:["blur"]}],code:[{required:!0,message:"请输入标识",trigger:["blur"]}],type:[{required:!0,type:"number",message:"请选择类型",trigger:["blur"]}]};async function i(){m.value=!0;const{data:a}=await O({...N.value,page:d.page,limit:d.pageSize});x.value=a.list,d.itemCount=a.count,m.value=!1}async function V(a){m.value=!0;const{response:e}=await be(a);e.data.status===200&&(i(),g.success(u("common.deleteSuccess")))}async function $(a){C.value=a;const{data:e}=await he(a);R.value=e,_.value.forEach(l=>{l.defaultValue=e[l.valueName]}),b.value=!0}const c=[{type:"selection"},{title:"名称",key:"name",align:"center"},{title:"标识",key:"code",align:"center"},{title:"备注",key:"remark",align:"center"},{title:"创建时间",key:"create_time",align:"center"},{title:"修改时间",key:"update_time",align:"center"},{title:"操作",key:"action",align:"center",width:300,fixed:"right",render:a=>{let e;return n(Se,{justify:"center"},{default:()=>[n(B,{type:"success",size:"small",onClick:$.bind(null,a.id)},j(e=u("common.modify"))?e:{default:()=>[e]}),n(xe,{"onPositive-click":V.bind(null,a.id)},{default:()=>[u("common.confirmDelete")],trigger:()=>{let l;return n(B,{type:"error",size:"small"},j(l=u("common.delete"))?l:{default:()=>[l]})}})]})}}];async function q(){const{data:a}=await O();w({tableColumns:c,tableData:a.list,fileName:D})}const p=o([]),F=o([]);function H(a){N.value=a,d.page=1,i()}function K(a,e){p.value=a,F.value=e}function G(){v.value=!0}async function Q(){m.value=!0;const{response:a}=await ge({id:p.value.join(",")});a.data.status===200&&(i(),p.value=[],g.success(u("common.deleteSuccess")))}async function W(a){y.value=!0;const e={};a.up_where&&(e.up_where=a.up_where.join(","));const{response:l}=await ve({...a,...e});l.data.status===200&&(i(),g.success(u("common.addSuccess")),v.value=!1),y.value=!1}async function X(a){h.value=!0;const e={};a.up_where&&(e.up_where=a.up_where.join(","));const{response:l}=await ye(C.value,{...a,...e});l.data.status===200&&(i(),g.success(u("common.modifySuccess")),b.value=!1),h.value=!1}function Z(a){d.page=a,i()}function J(a){d.page=1,d.pageSize=a,i()}i(),U.value=L(k.value),_.value=L(k.value);const Y=o(c.reduce((a,e)=>Number(a)+Number(e.width),0));return(a,e)=>{const l=se,ee=ne,ae=De,te=ce,E=le,oe=ue("resize");return de(),me("div",null,[n(te,{title:"交易类型管理列表"},{"header-extra":z(()=>[n(l,{"export-all-loading":r(s),"onUpdate:exportAllLoading":e[0]||(e[0]=t=>S(s)?s.value=t:null),"refresh-button-loading":m.value,"onUpdate:refreshButtonLoading":e[1]||(e[1]=t=>m.value=t),"export-selected-disabled":p.value.length,"onUpdate:exportSelectedDisabled":e[2]||(e[2]=t=>p.value.length=t),"batch-delete-disabled":p.value.length,"onUpdate:batchDeleteDisabled":e[3]||(e[3]=t=>p.value.length=t),"export-filter-loading":r(s),"onUpdate:exportFilterLoading":e[4]||(e[4]=t=>S(s)?s.value=t:null),"export-selected-loading":r(s),"onUpdate:exportSelectedLoading":e[5]||(e[5]=t=>S(s)?s.value=t:null),onExportAll:q,onExportFilter:e[6]||(e[6]=t=>r(w)({tableColumns:c,tableData:x.value,fileName:D})),onExportSelected:e[7]||(e[7]=t=>r(w)({tableColumns:c,tableData:F.value,fileName:D})),onAdd:G,onBatchDelete:Q,onRefresh:i},null,8,["export-all-loading","refresh-button-loading","export-selected-disabled","batch-delete-disabled","export-filter-loading","export-selected-loading"])]),default:z(()=>[n(ee,{"search-config":P.value,onOnSearch:H},null,8,["search-config"]),pe(n(ae,{remote:"",columns:c,data:x.value,loading:m.value,bordered:!1,style:{height:"620px"},"flex-height":"","scroll-x":Y.value,pagination:r(d),"row-key":t=>t.id,"render-cell":r(I),"onUpdate:checkedRowKeys":K,"onUpdate:page":Z,"onUpdate:pageSize":J},null,8,["data","loading","scroll-x","pagination","row-key","render-cell"]),[[oe]])]),_:1}),n(E,{"show-form-modal":v.value,"onUpdate:showFormModal":e[8]||(e[8]=t=>v.value=t),"is-async-shut-down":M.value,"onUpdate:isAsyncShutDown":e[9]||(e[9]=t=>M.value=t),"is-show-modal-loading":y.value,"onUpdate:isShowModalLoading":e[10]||(e[10]=t=>y.value=t),"modal-title":r(u)("common.add"),"modal-form-config":U.value,"form-rules":A,onOnSubmit:W},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"]),n(E,{"show-form-modal":b.value,"onUpdate:showFormModal":e[11]||(e[11]=t=>b.value=t),"is-async-shut-down":T.value,"onUpdate:isAsyncShutDown":e[12]||(e[12]=t=>T.value=t),"is-show-modal-loading":h.value,"onUpdate:isShowModalLoading":e[13]||(e[13]=t=>h.value=t),"modal-title":r(u)("common.modify"),"modal-form-config":_.value,"form-rules":A,onOnSubmit:X},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"])])}}});export{He as default};
