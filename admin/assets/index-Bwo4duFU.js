import{_ as ae}from"./modal-form.vue_vue_type_script_setup_true_lang-BJ69RLGj.js";import{_ as ne}from"./search-header-BxwkGrv3.js";import{_ as le}from"./table-header-button-group.vue_vue_type_script_setup_true_lang-CEWz-Loh.js";import{d as se,O as ie,r as a,U as S,V as re,o as de,b as ue,f as l,w as T,h as r,a1 as M,W as ce,$ as d,a8 as me,B as R,N as pe,Z as fe}from"./index-DrEzliHY.js";import{h as j,i as ge,j as ve,k as ye,l as he,m as be}from"./mentor-management-DLjCZVwc.js";import{u as we,N as xe}from"./custom-table-YBGLKz8r.js";import{u as Ce}from"./exportExcel-DmIPdUnp.js";import{_ as _e}from"./Flex-DkQB4X0g.js";import{_ as Se}from"./DataTable-BLC5kPHF.js";import"./multi-language-form.vue_vue_type_script_setup_true_lang-CddQKb4h.js";import"./custom-upload-xESAwsug.js";import"./Grid-ppKVTCkg.js";import"./get-slot-Bk_rJcZu.js";import"./FormItem-D43XudUj.js";import"./Spin-4EGh_M6p.js";import"./DatePicker-B2ToGdru.js";import"./TimePicker-CbQV1d7H.js";import"./Forward-RZ68qXfC.js";import"./RadioGroup-DfynhpqT.js";import"./Space-B3V6_u3T.js";function O(p){return typeof p=="function"||Object.prototype.toString.call(p)==="[object Object]"&&!fe(p)}const D="导师分类列表.xlsx",He=se({name:"mentor-management_mentor-category",__name:"index",setup(p){const{pagination:u,renderCell:P}=we(),f=ie(),{exportExcel:w,exportLoading:s}=Ce(),c=a(!1),x=a([]),k=a({}),V=a([{type:"Input",valueName:"name",label:"名称",placeholder:"请输入名称"}]),U=a(0),g=a(!1),N=a(!0),v=a(!1),y=a(!1),E=a(!0),h=a(!1),A=a([{type:"Input",valueName:"name",label:"标题"},{type:"Input",valueName:"code",label:"分类编码"},{type:"Switch",valueName:"status",label:"状态",switchChecked:1,switchUnchecked:2,switchCheckedText:"开启",switchUncheckedText:"关闭"}]),F=a([]),C=a([]),L={name:[{required:!0,message:"请输入标题",trigger:["blur"]}],code:[{required:!0,message:"请输入分类编码",trigger:["blur"]}]};async function i(){c.value=!0;const{data:t}=await j({page:u.page,limit:u.pageSize,...k.value});x.value=t.list,u.itemCount=t.count,c.value=!1}function $(t){u.page=t,i()}function I(t){u.page=1,u.pageSize=t,i()}async function q(t){c.value=!0;const{response:e}=await he(t);e.data.status===200&&(i(),f.success(d("common.deleteSuccess")))}async function H(t){U.value=t;const{data:e}=await be(t);C.value.forEach(n=>{n.defaultValue=e[n.valueName]}),y.value=!0}const b=[{type:"selection"},{title:"分类编码",key:"code",align:"center"},{title:"标题",key:"name",align:"center"},{title:"状态",key:"status",align:"center",render:t=>l(me,{type:t.status===1?"success":"error"},{default:()=>[t.status===1?"开启":"关闭"]})},{title:"创建时间",key:"create_time",align:"center"},{title:"更新时间",key:"update_time",align:"center"},{title:"操作",key:"action",align:"center",width:300,fixed:"right",render:t=>{let e;return l(_e,{justify:"center"},{default:()=>[l(R,{type:"success",size:"small",onClick:H.bind(null,t.id)},O(e=d("common.modify"))?e:{default:()=>[e]}),l(xe,{"onPositive-click":q.bind(null,t.id)},{default:()=>[d("common.confirmDelete")],trigger:()=>{let n;return l(R,{type:"error",size:"small"},O(n=d("common.delete"))?n:{default:()=>[n]})}})]})}}];async function K(){const{data:t}=await j();w({tableColumns:b,tableData:_(t.list),fileName:D})}function _(t){const e=S(t);return e.forEach(n=>{Reflect.has(n,"status")&&(n.status=n.status===1?"开启":"关闭")}),e}const m=a([]),z=a([]);function G(t){k.value=t,u.page=1,i()}function Q(t,e){m.value=t,z.value=e}function W(){g.value=!0}async function Z(){c.value=!0;const{response:t}=await ge({id:m.value.join(",")});t.data.status===200&&(i(),m.value=[],f.success(d("common.deleteSuccess")))}async function J(t){v.value=!0;const{response:e}=await ve(t);e.data.status===200&&(i(),f.success(d("common.addSuccess")),g.value=!1),v.value=!1}async function X(t){h.value=!0;const{response:e}=await ye(U.value,t);e.data.status===200&&(i(),f.success(d("common.modifySuccess")),y.value=!1),h.value=!1}return i(),F.value=S(A.value),C.value=S(A.value),(t,e)=>{const n=le,Y=ne,ee=Se,te=pe,B=ae,oe=re("resize");return de(),ue("div",null,[l(te,{title:"导师分类列表"},{"header-extra":T(()=>[l(n,{"export-all-loading":r(s),"onUpdate:exportAllLoading":e[0]||(e[0]=o=>M(s)?s.value=o:null),"refresh-button-loading":c.value,"onUpdate:refreshButtonLoading":e[1]||(e[1]=o=>c.value=o),"export-selected-disabled":m.value.length,"onUpdate:exportSelectedDisabled":e[2]||(e[2]=o=>m.value.length=o),"batch-delete-disabled":m.value.length,"onUpdate:batchDeleteDisabled":e[3]||(e[3]=o=>m.value.length=o),"export-filter-loading":r(s),"onUpdate:exportFilterLoading":e[4]||(e[4]=o=>M(s)?s.value=o:null),"export-selected-loading":r(s),"onUpdate:exportSelectedLoading":e[5]||(e[5]=o=>M(s)?s.value=o:null),onExportAll:K,onExportFilter:e[6]||(e[6]=o=>r(w)({tableColumns:b,tableData:_(x.value),fileName:D})),onExportSelected:e[7]||(e[7]=o=>r(w)({tableColumns:b,tableData:_(z.value),fileName:D})),onAdd:W,onBatchDelete:Z,onRefresh:i},null,8,["export-all-loading","refresh-button-loading","export-selected-disabled","batch-delete-disabled","export-filter-loading","export-selected-loading"])]),default:T(()=>[l(Y,{"search-config":V.value,onOnSearch:G},null,8,["search-config"]),ce(l(ee,{remote:"",columns:b,data:x.value,loading:c.value,bordered:!1,style:{height:"620px"},"flex-height":"","scroll-x":1e3,pagination:r(u),"row-key":o=>o.id,"render-cell":r(P),"onUpdate:checkedRowKeys":Q,"onUpdate:page":$,"onUpdate:pageSize":I},null,8,["data","loading","pagination","row-key","render-cell"]),[[oe]])]),_:1}),l(B,{"show-form-modal":g.value,"onUpdate:showFormModal":e[8]||(e[8]=o=>g.value=o),"is-async-shut-down":N.value,"onUpdate:isAsyncShutDown":e[9]||(e[9]=o=>N.value=o),"is-show-modal-loading":v.value,"onUpdate:isShowModalLoading":e[10]||(e[10]=o=>v.value=o),"modal-title":r(d)("common.add"),"modal-form-config":F.value,"form-rules":L,onOnSubmit:J},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"]),l(B,{"show-form-modal":y.value,"onUpdate:showFormModal":e[11]||(e[11]=o=>y.value=o),"is-async-shut-down":E.value,"onUpdate:isAsyncShutDown":e[12]||(e[12]=o=>E.value=o),"is-show-modal-loading":h.value,"onUpdate:isShowModalLoading":e[13]||(e[13]=o=>h.value=o),"modal-title":r(d)("common.modify"),"modal-form-config":C.value,"form-rules":L,onOnSubmit:X},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"])])}}});export{He as default};
