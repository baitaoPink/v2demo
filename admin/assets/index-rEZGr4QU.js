import{_ as ea}from"./modal-form.vue_vue_type_script_setup_true_lang-D4rPO6tH.js";import{_ as aa}from"./search-header-BhM1flca.js";import{_ as la}from"./table-header-button-group.vue_vue_type_script_setup_true_lang-CWQZkHKX.js";import{d as ta,O as na,r as n,V as oa,o as g,b as O,f as t,w as o,h as i,a1 as Q,W,g as x,S as B,ac as q,Y as ge,e as s,B as Y,t as z,$ as N,cr as ua,bm as sa,a8 as ye,U as Z,cs as J,N as ra,bq as ia,x as da,Z as pa,c as be,a5 as ca}from"./index-hovKqFL_.js";import{q as ma,r as va}from"./user-manage-DL2_q0fx.js";import{s as fa}from"./systen-configuration-BsFxIRHK.js";import{b as _a,e as ga,c as he,d as ya,f as ba}from"./mentor-management-CM4qTCUr.js";import{u as ha}from"./custom-table-DDqfUiuo.js";import{_ as xa,u as Na}from"./custom-upload-ByeURddi.js";import{u as wa}from"./exportExcel-Cd1dBC53.js";import{_ as Sa}from"./Table-DDH6v4Sv.js";import{_ as Ua}from"./Flex-DFwRD2Q7.js";import{_ as ka}from"./DataTable-DU30Lwyo.js";import{_ as Ca}from"./Space-D3aac8v1.js";import{a as Oa,_ as Fa}from"./RadioGroup-v60ZBrUm.js";import{b as Ma}from"./multi-language-form.vue_vue_type_script_setup_true_lang-CKLYA_yb.js";import{_ as Da}from"./Grid-BhltlsZc.js";import{a as Ia}from"./FormItem-_LcKmAs5.js";import"./DatePicker-BLT4kyC3.js";import"./TimePicker-SQv-WABn.js";import"./Forward-Cg-d91Ea.js";import"./Spin-BT5AbCHY.js";import"./get-slot-Bk_rJcZu.js";const La={class:"w-230px"},Ra={class:"w-240px"},Ea={class:"w-230px"},Aa={class:"w-230px"},Ta={class:"w-230px"};function $a(A){return typeof A=="function"||Object.prototype.toString.call(A)==="[object Object]"&&!pa(A)}const X="导师申请列表.xlsx",rl=ta({name:"mentor-management_mentor-apply",__name:"index",setup(A){const{pagination:v,renderCell:xe}=ha(),{handleUpload:Ne}=Na(),{exportExcel:G,exportLoading:p}=wa(),y=na(),ee=n([]),F=n(""),w=n(!1),ae=n([]),le=n([]),f=n(1),we=[{label:"每日跟单",value:1},{label:"多日跟单",value:2}],S=n(0),Se=[{label:"通用类型",value:1},{label:"层级类型",value:2}],U=n(0),k=n(0),_=n([]),Ue=n([{type:"Input",valueName:"account",label:"登录名/账号/姓名",placeholder:"请输入账号/姓名"},{type:"Datetime",valueName:"time",label:"申请时间",placeholder:"请选择申请时间",datetimeType:"datetimerange"}]),T=[{type:"selection"},{title:"账号/姓名",key:"account",align:"center",render:l=>t("div",null,[t("p",null,[l.account]),t("p",null,[l.real_name])])},{title:"备注",key:"remark",align:"center"},{title:"申请时间",key:"create_time",align:"center"},{title:"操作",key:"action",align:"center",width:300,fixed:"right",render:l=>{let e;return t("div",null,[l.status===0?t(Ua,{justify:"center"},{default:()=>[t(Y,{type:"success",size:"small",onClick:Le.bind(null,l.id,l.status,l.result_remark)},$a(e=N("common.examine"))?e:{default:()=>[e]})]}):Fe(l.status)])}}],M=n([]),te=n([]),D=n(!1),P=n([]),ne=n({}),oe=n(0),I=n({}),ue=n([]),$=n(!1),se=n(!0),c=n(!1),L=n([{type:"Select",valueName:"uid",label:"用户",selectLabelField:"name",selectValueField:"value",selectFilter:!0},{type:"Slot",valueName:"avatar",label:"头像",slotName:"avatar"},{type:"Input",valueName:"product_name",label:"产品名称"},{type:"Input",valueName:"name",label:"讲师名称",i18n:!0},{type:"Input",valueName:"experience",label:"操盘经验"},{type:"Input",valueName:"explain",label:"个人名言",i18n:!0},{type:"Input Number",valueName:"divide_into",label:"佣金比例"},{type:"Input Number",valueName:"total_revenue",label:"总收益率"},{type:"Input Number",valueName:"monthly_revenue",label:"月收益率"},{type:"Input Number",valueName:"position",label:"仓位率"},{type:"Input Number",valueName:"max_rollback",label:"最大回撤率"},{type:"Input Number",valueName:"win_rate",label:"回报率"},{type:"Slot",valueName:"type",label:"跟单类型",slotName:"type"},{type:"Select",valueName:"category_code",label:"导师分类",placeholder:"请选择导师分类",defaultOption:[],selectLabelField:"name",selectValueField:"value"},{type:"Slot",valueName:"typeConfig",slotName:"typeConfig",gridGiSpan:24},{type:"Input Number",valueName:"stable_value",label:"稳定性指数"},{type:"Radio",valueName:"is_hot",label:"是否热门",radioGroupOption:[{label:"否",value:2},{label:"是",value:1}]},{type:"Tag Select",valueName:"tags",label:"标签",placeholder:"请输入标签，按空格确认",i18n:!0},{type:"Input Number",valueName:"follow_number",label:"跟单人数"},{type:"Input Number",valueName:"max_follow_number",label:"跟单最高人数"},{type:"Input Number",valueName:"price",label:"跟单所需金额"},{type:"Multiple Select",valueName:"vips",label:"跟单用户等级",placeholder:"请选择跟单用户等级",defaultOption:[],selectLabelField:"name",selectValueField:"value"},{type:"Input",valueName:"remark",label:"备注"},{type:"Switch",valueName:"status",label:"状态",switchChecked:1,switchUnchecked:0,switchCheckedText:"启用",switchUncheckedText:"禁用"},{type:"Select",valueName:"market_type_id",label:"股市类型",placeholder:"请选择股市类型",defaultOption:[],selectLabelField:"name",selectValueField:"id"},{type:"Slot",valueName:"statistics_data",label:"统计数据",slotName:"statistics_data",gridGiSpan:24}]),ke={uid:[{type:"number",required:!0,message:"请选择用户",trigger:["blur"]}],avatar:[{required:!0,message:"请上传头像",trigger:["blur"],validator:()=>I.value.avatar?!0:new Error("请上传头像")}],market_type_id:[{type:"number",required:!0,message:"请选择股市类型",trigger:["blur"]}]},m=n({}),Ce=[{name:"分润",fields:"divide_into",placeholder:"请输入分润"},{name:"资产管理规模",fields:"asset_scale",placeholder:"请输入资产管理规模"},{name:"回报率",fields:"return_rate",placeholder:"请输入回报率"},{name:"盈亏比例",fields:"pnl_ratio",placeholder:"请输入盈亏比例"},{name:"胜率",fields:"win_rate",placeholder:"请输入胜率"},{name:"跟单用户盈亏",fields:"follow_user_pnl",placeholder:"请输入跟单用户盈亏"},{name:"每笔交易平均盈亏",fields:"avg_pnl",placeholder:"请输入每笔交易平均盈亏"},{name:"交易达人盈亏",fields:"trader_pnl",placeholder:"请输入交易达人盈亏"},{name:"累计收益率",type:"Input",fields:"accumulated_return_rate",placeholder:"请输入累计收益率，用英文逗号隔开"},{name:"累计收益额",type:"Input",fields:"daily_profit",placeholder:"请输入累计收益额，用英文逗号隔开"},{name:"每日盈亏",type:"Input",fields:"daily_pnl",placeholder:"请输入每日盈亏，用英文逗号隔开"}];function Oe(){_.value.forEach(l=>{l.partner_ids=null})}function Fe(l){return l===1?t(ye,{type:"success"},{default:()=>[x("审核通过")]}):l===2?t(ye,{type:"error"},{default:()=>[x("审核不通过")]}):""}async function Me(l){c.value=!0;const e={};Object.keys(I.value).length===1&&(e.avatar=I.value.avatar);let u={};if(l.tags){const r=Z(l.tags);for(const E in r)Object.hasOwn(r,E)&&(r[E]=r[E].join(","));e.tags=r}if(l.vips&&(e.vips=l.vips.join(",")),Object.keys(m.value).length&&(u={...m.value},u.accumulated_return_rate=J(u.accumulated_return_rate),u.daily_profit=J(u.daily_profit),u.daily_pnl=J(u.daily_pnl)),f.value===1){if(typeof U.value!="number")return c.value=!1,y.error("请输入最低投资金额");if(typeof k.value!="number")return c.value=!1,y.error("请输入最高投资金额");if(k.value<U.value)return c.value=!1,y.error("最高投资金额不能小于最低投资金额");e.min_money=U.value,e.max_money=k.value}else if(f.value===2){if(!_.value.length)return c.value=!1,y.error("请配置跟买产品");if(!Object.values(_.value).some(r=>Object.values(r).includes(null)))e.product_type=S.value,e.product=Z(_.value),S.value===1&&e.product.forEach(r=>{r.partner_ids=r.partner_ids.join(",")});else return c.value=!1,y.error("请配置跟买产品")}const{response:R}=await _a({...l,...e,type:f.value,statistics_data:u});R.data.status===200&&(b(),y.success(N("common.addSuccess")),$.value=!1),c.value=!1}function De(){f.value=1,m.value={},_.value=[],S.value=0,U.value=0,k.value=0}const j=n(!1),re=n(!0),V=n(!1),ie=n([{type:"Radio",valueName:"status",label:"审核状态",radioGroupOption:[{label:"审核通过",value:1},{label:"审核不通过",value:2}]},{type:"Slot",valueName:"result_remark",slotName:"result_remark"}]),Ie={status:[{type:"number",required:!0,message:"请选择状态",trigger:["input","blur"],validator(l,e){return l.field?e===0?(w.value=!1,new Error("请选择审核状态")):e===2?(w.value=!0,!0):(w.value=!1,!0):!0}}]};function Le(l,e,u){oe.value=l,ie.value[0].defaultValue=e,e===2?w.value=!0:w.value=!1,u?F.value=u:F.value="",j.value=!0}async function Re(l){V.value=!0;const{response:e}=await ga(oe.value,{result_remark:F.value,...l});e.data.status===200&&(b(),y.success(N("common.modifySuccess")),j.value=!1),V.value=!1}async function b(){D.value=!0;const{data:l}=await he({page:v.page,limit:v.pageSize,...ne.value});P.value=l.list,v.itemCount=l.count,D.value=!1}function Ee(l){v.page=l,b()}function Ae(l){v.page=1,v.pageSize=l,b()}async function Te(){const{data:l}=await he();G({tableColumns:T,tableData:H(l.list),fileName:X})}function H(l){const e=Z(l);return e.forEach(u=>{Reflect.has(u,"account")&&(u.account=`
      账号:${u.account?u.account:"/"};
      姓名:${u.real_name?u.real_name:"/"};`)}),e}function $e(l){const e={...l};l.time&&(e.start_create_time=l.time[0],e.end_create_time=l.time[1],Reflect.deleteProperty(e,"time")),ne.value=e,v.page=1,b()}function je(){$.value=!0}function Ve(){_.value.push({day:null,partner_ids:null,min_money:null,max_money:null,commission_rate:null})}function Be(l){_.value.splice(l,1)}function qe(l,e){M.value=l,te.value=e}async function ze({file:l,onFinish:e,onError:u,onProgress:R}){const r=await Ne({file:l,onFinish:e,onError:u,onProgress:R});r&&(I.value.avatar=r)}function Ge(){Reflect.deleteProperty(I.value,"avatar")}async function Pe(){const{data:l}=await ya();ee.value=l,L.value[0].defaultOption=ee.value}async function He(){const{data:l}=await ma();ae.value=l,L.value[21].defaultOption=ae.value}async function Ke(){const{data:l}=await fa();L.value[24].defaultOption=l.list}async function Qe(){const{data:l}=await va();le.value=l}async function We(){const{data:l}=await ba();L.value[13].defaultOption=l}return b(),Pe(),He(),Ke(),Qe(),We(),(l,e)=>{const u=la,R=aa,r=ka,E=ra,Ye=xa,de=Fa,pe=Ca,ce=Oa,h=ia,K=Ma,me=Da,ve=Ia,Ze=ca,Je=Sa,fe=da,_e=ea,Xe=oa("resize");return g(),O("div",null,[t(E,{title:"导师申请列表"},{"header-extra":o(()=>[t(u,{"export-all-loading":i(p),"onUpdate:exportAllLoading":e[0]||(e[0]=a=>Q(p)?p.value=a:null),"export-filter-loading":i(p),"onUpdate:exportFilterLoading":e[1]||(e[1]=a=>Q(p)?p.value=a:null),"export-selected-loading":i(p),"onUpdate:exportSelectedLoading":e[2]||(e[2]=a=>Q(p)?p.value=a:null),"refresh-button-loading":D.value,"onUpdate:refreshButtonLoading":e[3]||(e[3]=a=>D.value=a),"export-selected-disabled":M.value.length,"onUpdate:exportSelectedDisabled":e[4]||(e[4]=a=>M.value.length=a),"batch-delete-disabled":M.value.length,"onUpdate:batchDeleteDisabled":e[5]||(e[5]=a=>M.value.length=a),"is-export-all":!0,"is-export-filter":!0,"is-export-selected":!0,"is-batch-delete":!1,onExportAll:Te,onExportFilter:e[6]||(e[6]=a=>i(G)({tableColumns:T,tableData:H(P.value),fileName:X})),onExportSelected:e[7]||(e[7]=a=>i(G)({tableColumns:T,tableData:H(te.value),fileName:X})),onAdd:je,onRefresh:b},null,8,["export-all-loading","export-filter-loading","export-selected-loading","refresh-button-loading","export-selected-disabled","batch-delete-disabled"])]),default:o(()=>[t(R,{"search-config":Ue.value,onOnSearch:$e},null,8,["search-config"]),W(t(r,{remote:"",columns:T,data:P.value,pagination:i(v),loading:D.value,bordered:!1,style:{height:"620px"},"flex-height":"","scroll-x":1e3,"row-key":a=>a.id,"render-cell":i(xe),"onUpdate:checkedRowKeys":qe,"onUpdate:page":Ee,"onUpdate:pageSize":Ae},null,8,["data","pagination","loading","row-key","render-cell"]),[[Xe]])]),_:1}),t(_e,{"show-form-modal":$.value,"onUpdate:showFormModal":e[13]||(e[13]=a=>$.value=a),"is-async-shut-down":se.value,"onUpdate:isAsyncShutDown":e[14]||(e[14]=a=>se.value=a),"is-show-modal-loading":c.value,"onUpdate:isShowModalLoading":e[15]||(e[15]=a=>c.value=a),"is-show-modal-form-i18n":!0,"modal-title":i(N)("common.add"),"width-class":"w-1200px","modal-form-config":L.value,"grid-gi-span":12,"form-rules":ke,onOnSubmit:Me},{avatar:o(()=>[t(Ye,{"file-list":ue.value,"onUpdate:fileList":e[8]||(e[8]=a=>ue.value=a),"list-type":"image-card",max:1,accept:"image/*","custom-request":ze,onRemove:Ge},{default:o(()=>e[20]||(e[20]=[x(" 点击上传 ")])),_:1},8,["file-list"])]),type:o(()=>[t(ce,{value:f.value,"onUpdate:value":e[9]||(e[9]=a=>f.value=a),name:"radiogroup"},{default:o(()=>[t(pe,null,{default:o(()=>[(g(),O(B,null,q(we,a=>t(de,{key:a.label,value:a.value},{default:o(()=>[x(z(a.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["value"])]),typeConfig:o(()=>[W(s("div",null,[t(ve,{"label-width":"auto","label-placement":"left","show-require-mark":"",model:m.value},{default:o(()=>[t(me,{cols:24,"x-gap":24},{default:o(()=>[t(K,{span:12,label:"最低投资金额",path:"min_money"},{default:o(()=>[t(h,{value:U.value,"onUpdate:value":e[10]||(e[10]=a=>U.value=a),clearable:"",validator:a=>a>=0,placeholder:"请输入最低投资金额"},null,8,["value","validator"])]),_:1}),t(K,{span:12,label:"最高投资金额",path:"max_money"},{default:o(()=>[t(h,{value:k.value,"onUpdate:value":e[11]||(e[11]=a=>k.value=a),clearable:"",validator:a=>a>=0,placeholder:"请输入最高投资金额"},null,8,["value","validator"])]),_:1})]),_:1})]),_:1},8,["model"])],512),[[ge,f.value===1]]),W(s("div",null,[e[22]||(e[22]=s("div",{class:"m-b-10px color-#1f2225"},"产品类型",-1)),t(ce,{value:S.value,"onUpdate:value":[e[12]||(e[12]=a=>S.value=a),Oe],name:"radiogroup"},{default:o(()=>[t(pe,null,{default:o(()=>[(g(),O(B,null,q(Se,a=>t(de,{key:a.label,value:a.value},{default:o(()=>[x(z(a.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["value"]),e[23]||(e[23]=s("div",{class:"m-t-10px color-#1f2225"},"跟买产品",-1)),t(Je,{class:"m-t-10px","single-line":!1},{default:o(()=>[e[21]||(e[21]=s("thead",null,[s("tr",null,[s("th",{class:"!text-align-center"},"交易日"),s("th",{class:"!text-align-center"},"层级"),s("th",{class:"!text-align-center"},"最小投入金额"),s("th",{class:"!text-align-center"},"最大投入金额"),s("th",{class:"!text-align-center"},"佣金比例"),s("th",{class:"!text-align-center"},"操作")])],-1)),s("tbody",null,[(g(!0),O(B,null,q(_.value,(a,C)=>(g(),O("tr",{key:C},[s("td",La,[t(h,{value:a.day,"onUpdate:value":d=>a.day=d,clearable:"",placeholder:"交易日"},null,8,["value","onUpdate:value"])]),s("td",Ra,[t(Ze,{value:a.partner_ids,"onUpdate:value":d=>a.partner_ids=d,multiple:S.value===1,filterable:"",clearable:"",placeholder:"层级","label-field":"name","value-field":"value",options:le.value},null,8,["value","onUpdate:value","multiple","options"])]),s("td",Ea,[t(h,{value:a.min_money,"onUpdate:value":d=>a.min_money=d,clearable:"",placeholder:"最小投入金额"},null,8,["value","onUpdate:value"])]),s("td",Aa,[t(h,{value:a.max_money,"onUpdate:value":d=>a.max_money=d,clearable:"",placeholder:"最大投入金额"},null,8,["value","onUpdate:value"])]),s("td",Ta,[t(h,{value:a.commission_rate,"onUpdate:value":d=>a.commission_rate=d,clearable:"",placeholder:"佣金比例"},null,8,["value","onUpdate:value"])]),s("td",null,[t(i(Y),{type:"error",size:"small",onClick:d=>Be(C)},{default:o(()=>[x(z(i(N)("common.delete")),1)]),_:2},1032,["onClick"])])]))),128))])]),_:1}),e[24]||(e[24]=s("div",{class:"h-10px"},null,-1)),t(i(Y),{type:"primary",size:"small",onClick:Ve},{default:o(()=>[x(z(i(N)("common.add")),1)]),_:1})],512),[[ge,f.value===2]])]),statistics_data:o(()=>[t(ve,{"label-width":"auto",model:m.value},{default:o(()=>[t(me,{cols:24,"x-gap":24},{default:o(()=>[(g(),O(B,null,q(Ce,a=>t(K,{key:a.fields,span:12,label:a.name,path:a.fields},{default:o(()=>[a.type==="Input"?(g(),be(fe,{key:0,value:m.value[a.fields],"onUpdate:value":C=>m.value[a.fields]=C,clearable:"",placeholder:a.placeholder},null,8,["value","onUpdate:value","placeholder"])):(g(),be(h,{key:1,value:m.value[a.fields],"onUpdate:value":C=>m.value[a.fields]=C,clearable:"",placeholder:a.placeholder},null,8,["value","onUpdate:value","placeholder"]))]),_:2},1032,["label","path"])),64))]),_:1})]),_:1},8,["model"])]),_:1},8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"]),t(_e,{"show-form-modal":j.value,"onUpdate:showFormModal":e[17]||(e[17]=a=>j.value=a),"is-async-shut-down":re.value,"onUpdate:isAsyncShutDown":e[18]||(e[18]=a=>re.value=a),"is-show-modal-loading":V.value,"onUpdate:isShowModalLoading":e[19]||(e[19]=a=>V.value=a),"modal-title":i(N)("common.examine"),"modal-form-config":ie.value,"form-rules":Ie,onOnSubmit:Re,onOnClose:De},ua({_:2},[w.value?{name:"result_remark",fn:o(()=>[t(fe,{value:F.value,"onUpdate:value":e[16]||(e[16]=a=>F.value=a),"allow-input":i(sa),placeholder:"请输入拒绝原因",clearable:""},null,8,["value","allow-input"])]),key:"0"}:void 0]),1032,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"])])}}});export{rl as default};
