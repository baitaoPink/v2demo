import{_ as se}from"./modal-form.vue_vue_type_script_setup_true_lang-BGpCBuuL.js";import{_ as ie}from"./search-header-DKkxeb92.js";import{_ as ue}from"./table-header-button-group.vue_vue_type_script_setup_true_lang-Co_MiHfJ.js";import{a0 as g,d as de,O as me,r as n,U as E,V as pe,o as ce,b as fe,f as s,w as I,h as d,a1 as k,W as ge,$ as m,B as j,N as ye,Z as ve}from"./index-BGn2hxht.js";import{u as be,N as he}from"./custom-table-CkjRR_Ue.js";import{u as we}from"./exportExcel-Bj9ZbbX3.js";import{_ as _e}from"./Flex-BOUMy5Qd.js";import{_ as xe}from"./DataTable-B20boM9S.js";import"./multi-language-form.vue_vue_type_script_setup_true_lang-BLS00VyW.js";import"./custom-upload-BnYTuu-H.js";import"./Grid-D6W4PgKj.js";import"./get-slot-Bk_rJcZu.js";import"./FormItem-hAQEuGNb.js";import"./Spin-CneC0ahg.js";import"./DatePicker-ByFFtn5f.js";import"./TimePicker-B2GQNCjg.js";import"./Forward-BMPR_CvR.js";import"./RadioGroup-QgSZfQqx.js";import"./Space-AspkDbzB.js";function O(l){return g({url:"/system/user/partnerSalary",params:l})}function Se(l){return g({url:"/system/user/partnerSalary",method:"post",data:l})}function Me(l,r){return g({url:`/system/user/partnerSalary/${l}`,method:"put",data:r})}function Ne(l){return g({url:`/system/user/partnerSalary/${l}`})}function De(l){return g({url:`/system/user/partnerSalary/${l}`,method:"delete"})}function Ce(l){return g({url:"/system/user/partnerSalary/batchDelete",method:"post",params:l})}function P(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!ve(l)}const U="工资设置列表.xlsx",Ge=de({name:"user-manage_salary-settings",__name:"index",setup(l){const{pagination:r,renderCell:T}=be(),v=me(),{exportExcel:_,exportLoading:i}=we(),p=n(!1),x=n([]),F=n(),V=n([{type:"Input",valueName:"min_money",label:"最小投资金额",placeholder:"请输入最小投资金额"},{type:"Input",valueName:"max_money",label:"最大投资金额",placeholder:"请输入最大投资金额"},{type:"Input",valueName:"ratio",label:"百分比",placeholder:"请输入百分比"}]),A=n(0),f=n(!1),L=n(!0),b=n(!1),q=n({}),h=n(!1),R=n(!0),w=n(!1),S=n(null),M=n(null),N=n([{type:"Input",valueName:"min_money",label:"最小投资金额",placeholder:"请输入最小投资金额"},{type:"Input",valueName:"max_money",label:"最大投资金额",placeholder:"请输入最大投资金额"},{type:"Input",valueName:"ratio",label:"百分比",placeholder:"请输入百分比"}]),D=n([]),C=n([]),$={min_money:[{required:!0,trigger:["blur"],type:"string",validator:(t,e)=>{const a=f.value?S.value:M.value;return e?!Number(e)||e<=0?new Error("请输入大于0的数"):Number(e)>=(a==null?void 0:a.formModel.max_money)?new Error("最小投资金额必须小于最大投资金额"):!0:new Error("请输入最小投资金额")}}],max_money:[{required:!0,type:"string",trigger:["blur"],validator:(t,e)=>{const a=f.value?S.value:M.value;return e?!Number(e)||e<=0?new Error("请输入大于0的数"):Number(e)<=(a==null?void 0:a.formModel.min_money)?new Error("最大投资金额必须大于最小投资金额"):!0:new Error("请输入最大投资金额")}}],ratio:[{required:!0,type:"string",trigger:["blur"],validator:(t,e)=>e?!Number(e)||e<=0?new Error("请输入大于0的数"):!0:new Error("请输入百分比")}]};async function u(){p.value=!0;const{data:t}=await O({...F.value,page:r.page,limit:r.pageSize});x.value=t.list,r.itemCount=t.count,p.value=!1}async function H(t){p.value=!0;const{response:e}=await De(t);e.data.status===200&&(u(),v.success(m("common.deleteSuccess")))}async function K(t){A.value=t;const{data:e}=await Ne(t);q.value=e,C.value.forEach(a=>{a.defaultValue=e[a.valueName]}),h.value=!0}const y=[{type:"selection"},{title:"最小投资金额",key:"min_money",align:"center"},{title:"最大投资金额",key:"max_money",align:"center"},{title:"百分比",key:"ratio",align:"center",render:t=>`${t.ratio}%`},{title:"创建时间",key:"create_time",align:"center"},{title:"修改时间",key:"update_time",align:"center"},{title:"操作",key:"action",align:"center",width:300,fixed:"right",render:t=>{let e;return s(_e,{justify:"center"},{default:()=>[s(j,{type:"success",size:"small",onClick:K.bind(null,t.id)},P(e=m("common.modify"))?e:{default:()=>[e]}),s(he,{"onPositive-click":H.bind(null,t.id)},{default:()=>[m("common.confirmDelete")],trigger:()=>{let a;return s(j,{type:"error",size:"small"},P(a=m("common.delete"))?a:{default:()=>[a]})}})]})}}];async function G(){const{data:t}=await O();_({tableColumns:y,tableData:t.list,fileName:U})}const c=n([]),z=n([]);function Q(t){F.value=t,r.page=1,u()}function W(t,e){c.value=t,z.value=e}function X(){D.value=E(N.value),f.value=!0}async function Z(){p.value=!0;const{response:t}=await Ce({id:c.value.join(",")});t.data.status===200&&(u(),c.value=[],v.success(m("common.deleteSuccess")))}async function J(t){b.value=!0;const e={};t.up_where&&(e.up_where=t.up_where.join(","));const{response:a}=await Se({...t,...e});a.data.status===200&&(u(),v.success(m("common.addSuccess")),f.value=!1),b.value=!1}async function Y(t){w.value=!0;const e={};t.up_where&&(e.up_where=t.up_where.join(","));const{response:a}=await Me(A.value,{...t,...e});a.data.status===200&&(u(),v.success(m("common.modifySuccess")),h.value=!1),w.value=!1}function ee(t){r.page=t,u()}function te(t){r.page=1,r.pageSize=t,u()}u(),D.value=E(N.value),C.value=E(N.value);const oe=n(y.reduce((t,e)=>Number(t)+Number(e.width),0));return(t,e)=>{const a=ue,ae=ie,ne=xe,le=ye,B=se,re=pe("resize");return ce(),fe("div",null,[s(le,{title:"工资设置列表列表"},{"header-extra":I(()=>[s(a,{"export-all-loading":d(i),"onUpdate:exportAllLoading":e[0]||(e[0]=o=>k(i)?i.value=o:null),"refresh-button-loading":p.value,"onUpdate:refreshButtonLoading":e[1]||(e[1]=o=>p.value=o),"export-selected-disabled":c.value.length,"onUpdate:exportSelectedDisabled":e[2]||(e[2]=o=>c.value.length=o),"batch-delete-disabled":c.value.length,"onUpdate:batchDeleteDisabled":e[3]||(e[3]=o=>c.value.length=o),"export-filter-loading":d(i),"onUpdate:exportFilterLoading":e[4]||(e[4]=o=>k(i)?i.value=o:null),"export-selected-loading":d(i),"onUpdate:exportSelectedLoading":e[5]||(e[5]=o=>k(i)?i.value=o:null),onExportAll:G,onExportFilter:e[6]||(e[6]=o=>d(_)({tableColumns:y,tableData:x.value,fileName:U})),onExportSelected:e[7]||(e[7]=o=>d(_)({tableColumns:y,tableData:z.value,fileName:U})),onAdd:X,onBatchDelete:Z,onRefresh:u},null,8,["export-all-loading","refresh-button-loading","export-selected-disabled","batch-delete-disabled","export-filter-loading","export-selected-loading"])]),default:I(()=>[s(ae,{"search-config":V.value,onOnSearch:Q},null,8,["search-config"]),ge(s(ne,{remote:"",columns:y,data:x.value,loading:p.value,bordered:!1,style:{height:"620px"},"flex-height":"","scroll-x":oe.value,pagination:d(r),"row-key":o=>o.id,"render-cell":d(T),"onUpdate:checkedRowKeys":W,"onUpdate:page":ee,"onUpdate:pageSize":te},null,8,["data","loading","scroll-x","pagination","row-key","render-cell"]),[[re]])]),_:1}),s(B,{ref_key:"addModalFormRef",ref:S,"show-form-modal":f.value,"onUpdate:showFormModal":e[8]||(e[8]=o=>f.value=o),"is-async-shut-down":L.value,"onUpdate:isAsyncShutDown":e[9]||(e[9]=o=>L.value=o),"is-show-modal-loading":b.value,"onUpdate:isShowModalLoading":e[10]||(e[10]=o=>b.value=o),"modal-title":d(m)("common.add"),"modal-form-config":D.value,"form-rules":$,onOnSubmit:J},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"]),s(B,{ref_key:"modifyModalFormRef",ref:M,"show-form-modal":h.value,"onUpdate:showFormModal":e[11]||(e[11]=o=>h.value=o),"is-async-shut-down":R.value,"onUpdate:isAsyncShutDown":e[12]||(e[12]=o=>R.value=o),"is-show-modal-loading":w.value,"onUpdate:isShowModalLoading":e[13]||(e[13]=o=>w.value=o),"modal-title":d(m)("common.modify"),"modal-form-config":C.value,"form-rules":$,onOnSubmit:Y},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"])])}}});export{Ge as default};
