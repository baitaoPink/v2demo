import{_ as W}from"./modal-form.vue_vue_type_script_setup_true_lang-BGpCBuuL.js";import{_ as Z}from"./table-header-button-group.vue_vue_type_script_setup_true_lang-Co_MiHfJ.js";import{d as J,O as Y,r as o,U as k,V as ee,o as ae,b as te,f as n,w as D,W as oe,h as b,$ as s,a3 as le,cx as ne,X as se,B as F,cz as N,cA as ie,N as ue,Z as de,cB as re}from"./index-BGn2hxht.js";import{u as me,N as ce}from"./custom-table-CkjRR_Ue.js";import{_ as fe}from"./Flex-BOUMy5Qd.js";import{_ as pe}from"./DataTable-B20boM9S.js";import"./multi-language-form.vue_vue_type_script_setup_true_lang-BLS00VyW.js";import"./custom-upload-BnYTuu-H.js";import"./Grid-D6W4PgKj.js";import"./get-slot-Bk_rJcZu.js";import"./FormItem-hAQEuGNb.js";import"./Spin-CneC0ahg.js";import"./DatePicker-ByFFtn5f.js";import"./TimePicker-B2GQNCjg.js";import"./Forward-BMPR_CvR.js";import"./RadioGroup-QgSZfQqx.js";import"./Space-AspkDbzB.js";function T(p){return typeof p=="function"||Object.prototype.toString.call(p)==="[object Object]"&&!de(p)}const Te=J({name:"system-config_language-management",__name:"index",setup(p){const{pagination:u,renderCell:V}=me(),g=Y(),r=o(!1),_=o([]),z=o(),w=o(0),v=o(!1),S=o(!0),y=o(!1),c=o(!1),C=o(!0),m=o(!1),M=o([{type:"Input",valueName:"language_name",label:"语种名称"},{type:"Select",valueName:"file_name",label:"语言标识",selectFilter:!0,selectLabelField:"name",selectValueField:"code"},{type:"Radio",valueName:"is_default",label:"是否默认",radioGroupOption:[{value:1,label:"开启"},{value:0,label:"关闭"}]},{type:"Radio",valueName:"status",label:"状态",radioGroupOption:[{value:1,label:"开启"},{value:0,label:"关闭"}]}]),h=o([]),d=o([]),x={language_name:[{required:!0,message:"请输入语种名称",trigger:["blur"]}]};async function i(){r.value=!0;const{data:a}=await le({page:u.page,limit:u.pageSize,...z.value});_.value=a.list,u.itemCount=a.count,r.value=!1}function A(a){u.page=a,i()}function O(a){u.page=1,u.pageSize=a,i()}async function B(){const{data:a}=await ne();h.value[1].defaultOption=a.list,d.value[1].defaultOption=a.list}async function R(a){r.value=!0;const{response:e}=await re(a);e.data.status===200&&(i(),g.success(s("common.deleteSuccess")))}async function P(a){w.value=a.id,d.value[0].defaultValue=a.language_name,d.value[1].defaultValue=a.file_name,d.value[2].defaultValue=a.is_default,d.value[3].defaultValue=a.status,c.value=!0}const L=[{title:"语种名称",key:"language_name",align:"center"},{title:"浏览器语言识别码",key:"file_name",align:"center"},{title:"状态",key:"up_where",align:"center",width:"100",render:a=>{const e=o(a.status===1);return n(se,{value:e.value,"onUpdate:value":[l=>e.value=l,l=>{a.status=l?1:0,K({...a,status:l})}]},null)}},{title:"操作",key:"action",align:"center",width:300,fixed:"right",render:a=>{let e;return n(fe,{justify:"center"},{default:()=>[n(F,{type:"success",size:"small",onClick:P.bind(null,a)},T(e=s("common.modify"))?e:{default:()=>[e]}),n(ce,{"onPositive-click":R.bind(null,a.id)},{default:()=>[s("common.confirmDelete")],trigger:()=>{let l;return n(F,{type:"error",size:"small"},T(l=s("common.delete"))?l:{default:()=>[l]})}})]})}}],f=o([]),j=o([]);function $(a,e){f.value=a,j.value=e}function E(){v.value=!0}async function G(a){y.value=!0;const{response:e}=await N(0,{...a});e.data.status===200&&(i(),g.success(s("common.addSuccess")),v.value=!1),y.value=!1}async function I(a){m.value=!0;const{response:e}=await N(w.value,a);e.data.status===200&&(i(),g.success(s("common.modifySuccess")),c.value=!1),m.value=!1}async function K(a){m.value=!0;const{response:e}=await ie(a.id,a.status?1:0);e.data.status===200&&(i(),g.success(s("common.modifySuccess")),c.value=!1),m.value=!1}i(),h.value=k(M.value),d.value=k(M.value);const X=o(L.reduce((a,e)=>Number(a)+Number(e.width),0));return B(),(a,e)=>{const l=Z,q=pe,H=ue,U=W,Q=ee("resize");return ae(),te("div",null,[n(H,{title:"语种列表"},{"header-extra":D(()=>[n(l,{"refresh-button-loading":r.value,"onUpdate:refreshButtonLoading":e[0]||(e[0]=t=>r.value=t),"export-selected-disabled":f.value.length,"onUpdate:exportSelectedDisabled":e[1]||(e[1]=t=>f.value.length=t),"batch-delete-disabled":f.value.length,"onUpdate:batchDeleteDisabled":e[2]||(e[2]=t=>f.value.length=t),"is-export-all":!1,"is-export-filter":!1,"is-export-selected":!1,"is-batch-delete":!1,onAdd:E,onRefresh:i},null,8,["refresh-button-loading","export-selected-disabled","batch-delete-disabled"])]),default:D(()=>[oe(n(q,{remote:"",columns:L,data:_.value,loading:r.value,bordered:!1,style:{height:"680px"},"flex-height":"","scroll-x":X.value,pagination:b(u),"row-key":t=>t.id,"render-cell":b(V),"onUpdate:checkedRowKeys":$,"onUpdate:page":A,"onUpdate:pageSize":O},null,8,["data","loading","scroll-x","pagination","row-key","render-cell"]),[[Q]])]),_:1}),n(U,{"show-form-modal":v.value,"onUpdate:showFormModal":e[3]||(e[3]=t=>v.value=t),"is-async-shut-down":S.value,"onUpdate:isAsyncShutDown":e[4]||(e[4]=t=>S.value=t),"is-show-modal-loading":y.value,"onUpdate:isShowModalLoading":e[5]||(e[5]=t=>y.value=t),"modal-title":b(s)("common.add"),"modal-form-config":h.value,"form-rules":x,onOnSubmit:G},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"]),n(U,{"show-form-modal":c.value,"onUpdate:showFormModal":e[6]||(e[6]=t=>c.value=t),"is-async-shut-down":C.value,"onUpdate:isAsyncShutDown":e[7]||(e[7]=t=>C.value=t),"is-show-modal-loading":m.value,"onUpdate:isShowModalLoading":e[8]||(e[8]=t=>m.value=t),"modal-title":b(s)("common.modify"),"modal-form-config":d.value,"form-rules":x,onOnSubmit:I},null,8,["show-form-modal","is-async-shut-down","is-show-modal-loading","modal-title","modal-form-config"])])}}});export{Te as default};
